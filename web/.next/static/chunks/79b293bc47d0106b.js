(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,i)=>{var r={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return(i+r)*3/4-r},t.toByteArray=function(e){var t,i,s=l(e),a=s[0],o=s[1],u=new n((a+o)*3/4-o),h=0,c=o>0?a-4:a;for(i=0;i<c;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===o&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,u[h++]=255&t),1===o&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],a=0,o=r-n;a<o;a+=16383)s.push(function(e,t,r){for(var n,s=[],a=t;a<r;a+=3)n=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===n?s.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&s.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],r=[],n="u">typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}r[45]=62,r[95]=63},72:function(e,t,i){"use strict";var r=i(675),n=i(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,i)}function l(e,t,i){if("string"==typeof e){var r=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|f(r,n),l=a(s),u=l.write(r,n);return u!==s&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(k(e,SharedArrayBuffer)||e&&k(e.buffer,SharedArrayBuffer)))return function(e,t,i){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),o.prototype),r}(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(null!=h&&h!==e)return o.from(h,t,i);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),i=a(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),i=a(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,i){return l(e,t,i)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,i){return(u(e),e<=0)?a(e):void 0!==t?"string"==typeof i?a(e).fill(t,i):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return h(e)},o.allocUnsafeSlow=function(e){return h(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return S(e).length;default:if(n)return r?-1:I(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,i){var n,s,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=t;s<i;++s)n+=N[e[s]];return n}(this,t,i);case"utf8":case"utf-8":return v(this,t,i);case"ascii":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":return n=this,s=t,a=i,0===s&&a===n.length?r.fromByteArray(n):r.fromByteArray(n.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var r=e.slice(t,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,t,i);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function g(e,t,i,r,n){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(s=i*=1)!=s&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length)if(n)return -1;else i=e.length-1;else if(i<0)if(!n)return -1;else i=0;if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:y(e,t,i,r,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,i);else return Uint8Array.prototype.lastIndexOf.call(e,t,i);return y(e,[t],i,r,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,i,r,n){var s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,i/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var h=-1;for(s=i;s<o;s++)if(u(e,s)===u(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*a}else -1!==h&&(s-=s-h),h=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){for(var c=!0,d=0;d<l;d++)if(u(e,s+d)!==u(t,d)){c=!1;break}if(c)return s}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,r=t.length,n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:+(r<i)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,r=o.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var s=e[i];if(k(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,i,r,n){if(k(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var s=n-r,a=i-t,l=Math.min(s,a),u=this.slice(r,n),h=e.slice(t,i),c=0;c<l;++c)if(u[c]!==h[c]){s=u[c],a=h[c];break}return s<a?-1:+(a<s)},o.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},o.prototype.indexOf=function(e,t,i){return g(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return g(this,e,t,i,!1)};function v(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var s,a,o,l,u=e[n],h=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=i)switch(c){case 1:u<128&&(h=u);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&u)<<6|63&s)>127&&(h=l);break;case 3:s=e[n+1],a=e[n+2],(192&s)==128&&(192&a)==128&&(l=(15&u)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:s=e[n+1],a=e[n+2],o=e[n+3],(192&s)==128&&(192&a)==128&&(192&o)==128&&(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),n+=c}var d=r,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return p}function w(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function b(e,t,i,r,n,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function x(e,t,i,r,n,s){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function E(e,t,i,r,s){return t*=1,i>>>=0,s||x(e,t,i,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,i,r,23,4),i+4}function A(e,t,i,r,s){return t*=1,i>>>=0,s||x(e,t,i,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,i,r,52,8),i+8}o.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,a,o,l,u,h,c,d=this.length-t;if((void 0===i||i>d)&&(i=d),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[i+a]=l}return a}(this,e,t,i);case"utf8":case"utf-8":return n=t,s=i,C(I(e,this.length-n),this,n,s);case"ascii":return a=t,o=i,C(_(e),this,a,o);case"latin1":case"binary":return function(e,t,i,r){return C(_(t),e,i,r)}(this,e,t,i);case"base64":return l=t,u=i,C(S(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,c=i,C(function(e,t){for(var i,r,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(i=e.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(e,this.length-h),this,h,c);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},o.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||w(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=1,a=0;for(this[t]=255&e;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},o.prototype.writeUIntBE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=i-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},o.prototype.writeUInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=0,a=1,o=0;for(this[t]=255&e;++s<i&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},o.prototype.writeIntBE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=i-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a|0)-o&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,i){return E(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return E(this,e,t,!1,i)},o.prototype.writeDoubleLE=function(e,t,i){return A(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return A(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,r){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,r);else if(this===e&&i<t&&t<r)for(var s=n-1;s>=0;--s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,r),t);return n},o.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var a=o.isBuffer(e)?e:o.from(e,r),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=a[n%l]}return this};var T=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var i,r=e.length,n=null,s=[],a=0;a<r;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319||a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function _(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function S(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var N=function(){for(var e="0123456789abcdef",t=Array(256),i=0;i<16;++i)for(var r=16*i,n=0;n<16;++n)t[r+n]=e[i]+e[n];return t}()},783:function(e,t){t.read=function(e,t,i,r,n){var s,a,o=8*n-r-1,l=(1<<o)-1,u=l>>1,h=-7,c=i?n-1:0,d=i?-1:1,f=e[t+c];for(c+=d,s=f&(1<<-h)-1,f>>=-h,h+=o;h>0;s=256*s+e[t+c],c+=d,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;h>0;a=256*a+e[t+c],c+=d,h-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=u}return(f?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,i,r,n,s){var a,o,l,u=8*s-n-1,h=(1<<u)-1,c=h>>1,d=5960464477539062e-23*(23===n),f=r?0:s-1,p=r?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(a++,l/=2),a+c>=h?(o=0,a=h):a+c>=1?(o=(t*l-1)*Math.pow(2,n),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,n),a=0));n>=8;e[i+f]=255&o,f+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;e[i+f]=255&a,f+=p,a/=256,u-=8);e[i+f-p]|=128*m}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}},a=!0;try{r[e](i,i.exports,s),a=!1}finally{a&&delete n[e]}return i.exports}s.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},88143,(e,t,i)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:i,blurHeight:r,blurDataURL:n,objectFit:s}){let a=i?40*i:e,o=r?40*r:t,l=a&&o?`viewBox='0 0 ${a} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===s?"xMidYMid":"cover"===s?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${n}'/%3E%3C/svg%3E`}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},87690,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return s},imageConfigDefault:function(){return a}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let s=["default","imgix","cloudinary","akamai","custom"],a={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"getImgProps",{enumerable:!0,get:function(){return u}}),e.r(33525);let r=e.r(43369),n=e.r(88143),s=e.r(87690),a=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u({src:e,sizes:t,unoptimized:i=!1,priority:u=!1,preload:h=!1,loading:c,className:d,quality:f,width:p,height:m,fill:g=!1,style:y,overrideSrc:v,onLoad:w,onLoadingComplete:b,placeholder:x="empty",blurDataURL:E,fetchPriority:A,decoding:T="async",layout:I,objectFit:_,objectPosition:S,lazyBoundary:C,lazyRoot:k,...N},R){var P;let D,O,M,{imgConf:L,showAltText:j,blurComplete:V,defaultLoader:F}=R,U=L||s.imageConfigDefault;if("allSizes"in U)D=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),i=U.qualities?.sort((e,t)=>e-t);D={...U,allSizes:e,deviceSizes:t,qualities:i}}if(void 0===F)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=N.loader||F;delete N.loader,delete N.srcSet;let z="__next_img_default"in B;if(z){if("custom"===D.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:i,...r}=t;return e(r)}}if(I){"fill"===I&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[I];e&&(y={...y,...e});let i={responsive:"100vw",fill:"100vw"}[I];i&&!t&&(t=i)}let q="",$=l(p),H=l(m);if((P=e)&&"object"==typeof P&&(o(P)||void 0!==P.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(O=t.blurWidth,M=t.blurHeight,E=E||t.blurDataURL,q=t.src,!g)if($||H){if($&&!H){let e=$/t.width;H=Math.round(t.height*e)}else if(!$&&H){let e=H/t.height;$=Math.round(t.width*e)}}else $=t.width,H=t.height}let K=!u&&!h&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:q)||e.startsWith("data:")||e.startsWith("blob:"))&&(i=!0,K=!1),D.unoptimized&&(i=!0),z&&!D.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(i=!0);let W=l(f),G=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:_,objectPosition:S}:{},j?{}:{color:"transparent"},y),Q=V||"empty"===x?null:"blur"===x?`url("data:image/svg+xml;charset=utf-8,${(0,n.getImageBlurSvg)({widthInt:$,heightInt:H,blurWidth:O,blurHeight:M,blurDataURL:E||"",objectFit:G.objectFit})}")`:`url("${x}")`,Y=a.includes(G.objectFit)?"fill"===G.objectFit?"100% 100%":"cover":G.objectFit,X=Q?{backgroundSize:Y,backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:Q}:{},J=function({config:e,src:t,unoptimized:i,width:n,quality:s,sizes:a,loader:o}){if(i){let e=(0,r.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let i=t.includes("?")?"&":"?";t=`${t}${i}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:u}=function({deviceSizes:e,allSizes:t},i,r){if(r){let i=/(^|\s)(1?\d?\d)vw/g,n=[];for(let e;e=i.exec(r);)n.push(parseInt(e[2]));if(n.length){let i=.01*Math.min(...n);return{widths:t.filter(t=>t>=e[0]*i),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof i?{widths:e,kind:"w"}:{widths:[...new Set([i,2*i].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,n,a),h=l.length-1;return{sizes:a||"w"!==u?a:"100vw",srcSet:l.map((i,r)=>`${o({config:e,src:t,quality:s,width:i})} ${"w"===u?i:r+1}${u}`).join(", "),src:o({config:e,src:t,quality:s,width:l[h]})}}({config:D,src:e,unoptimized:i,width:$,quality:W,sizes:t,loader:B}),Z=K?"lazy":c;return{props:{...N,loading:Z,fetchPriority:A,width:$,height:H,decoding:T,className:d,style:{...G,...X},sizes:J.sizes,srcSet:J.srcSet,src:v||J.src},meta:{unoptimized:i,preload:h||u,placeholder:x,fill:g}}}},98879,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return o}});let r=e.r(71645),n="u"<typeof window,s=n?()=>{}:r.useLayoutEffect,a=n?()=>{}:r.useEffect;function o(e){let{headManager:t,reduceComponentsToState:i}=e;function o(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(i(e))}}return n&&(t?.mountedInstances?.add(e.children),o()),s(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),s(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),a(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={default:function(){return m},defaultHead:function(){return c}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let s=e.r(55682),a=e.r(90809),o=e.r(43476),l=a._(e.r(71645)),u=s._(e.r(98879)),h=e.r(42732);function c(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function d(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let f=["name","httpEquiv","charSet","itemProp"];function p(e){let t,i,r,n;return e.reduce(d,[]).reverse().concat(c().reverse()).filter((t=new Set,i=new Set,r=new Set,n={},e=>{let s=!0,a=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){a=!0;let i=e.key.slice(e.key.indexOf("$")+1);t.has(i)?s=!1:t.add(i)}switch(e.type){case"title":case"base":i.has(e.type)?s=!1:i.add(e.type);break;case"meta":for(let t=0,i=f.length;t<i;t++){let i=f[t];if(e.props.hasOwnProperty(i))if("charSet"===i)r.has(i)?s=!1:r.add(i);else{let t=e.props[i],r=n[i]||new Set;("name"!==i||!a)&&r.has(t)?s=!1:(r.add(t),n[i]=r)}}}return s})).reverse().map((e,t)=>{let i=e.key||t;return l.default.cloneElement(e,{key:i})})}let m=function({children:e}){let t=(0,l.useContext)(h.HeadManagerContext);return(0,o.jsx)(u.default,{reduceComponentsToState:p,headManager:t,children:e})};("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},18556,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ImageConfigContext",{enumerable:!0,get:function(){return s}});let r=e.r(55682)._(e.r(71645)),n=e.r(87690),s=r.default.createContext(n.imageConfigDefault)},65856,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,i)=>{"use strict";function r(e,t){let i=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-i)<Math.abs(e-i)?t:e,0):i}Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return a}});let r=e.r(70965),n=e.r(43369);function s({config:e,src:t,width:i,quality:s}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let a=(0,r.findClosestQuality)(s,e),o=(0,n.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${i}&q=${a}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}s.__next_img_default=!0;let a=s},18581,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"useMergedRef",{enumerable:!0,get:function(){return n}});let r=e.r(71645);function n(e,t){let i=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=i.current;e&&(i.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(i.current=s(e,r)),t&&(n.current=s(t,r))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let i=e(t);return"function"==typeof i?i:()=>e(null)}}("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},85437,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"Image",{enumerable:!0,get:function(){return b}});let r=e.r(55682),n=e.r(90809),s=e.r(43476),a=n._(e.r(71645)),o=r._(e.r(74080)),l=r._(e.r(25633)),u=e.r(8927),h=e.r(87690),c=e.r(18556);e.r(33525);let d=e.r(65856),f=r._(e.r(1948)),p=e.r(18581),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,i,r,n,s,a){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&n(!0),i?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,n=!1;i.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>n,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{n=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function y(e){return a.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let v=(0,a.forwardRef)(({src:e,srcSet:t,sizes:i,height:r,width:n,decoding:o,className:l,style:u,fetchPriority:h,placeholder:c,loading:d,unoptimized:f,fill:m,onLoadRef:v,onLoadingCompleteRef:w,setBlurComplete:b,setShowAltText:x,sizesInput:E,onLoad:A,onError:T,...I},_)=>{let S=(0,a.useCallback)(e=>{e&&(T&&(e.src=e.src),e.complete&&g(e,c,v,w,b,f,E))},[e,c,v,w,b,T,f,E]),C=(0,p.useMergedRef)(_,S);return(0,s.jsx)("img",{...I,...y(h),loading:d,width:n,height:r,decoding:o,"data-nimg":m?"fill":"1",className:l,style:u,sizes:i,srcSet:t,src:e,ref:C,onLoad:e=>{g(e.currentTarget,c,v,w,b,f,E)},onError:e=>{x(!0),"empty"!==c&&b(!0),T&&T(e)}})});function w({isAppRouter:e,imgAttributes:t}){let i={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...y(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,i),null):(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...i},"__nimg-"+t.src+t.srcSet+t.sizes)})}let b=(0,a.forwardRef)((e,t)=>{let i=(0,a.useContext)(d.RouterContext),r=(0,a.useContext)(c.ImageConfigContext),n=(0,a.useMemo)(()=>{let e=m||r||h.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),i=e.deviceSizes.sort((e,t)=>e-t),n=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:i,qualities:n,localPatterns:"u"<typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:o,onLoadingComplete:l}=e,p=(0,a.useRef)(o);(0,a.useEffect)(()=>{p.current=o},[o]);let g=(0,a.useRef)(l);(0,a.useEffect)(()=>{g.current=l},[l]);let[y,b]=(0,a.useState)(!1),[x,E]=(0,a.useState)(!1),{props:A,meta:T}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:n,blurComplete:y,showAltText:x});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{...A,unoptimized:T.unoptimized,placeholder:T.placeholder,fill:T.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:b,setShowAltText:E,sizesInput:e.sizes,ref:t}),T.preload?(0,s.jsx)(w,{isAppRouter:!i,imgAttributes:A}):null]})});("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},94909,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={default:function(){return h},getImageProps:function(){return u}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let s=e.r(55682),a=e.r(8927),o=e.r(85437),l=s._(e.r(1948));function u(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let h=o.Image},57688,(e,t,i)=>{t.exports=e.r(94909)},13716,e=>{"use strict";let t,i,r,n,s,a,o,l,u,h;var c,d,f,p,m,g,y,v,w,b,x,E,A,T,I,_,S,C,k=e.i(43476),N=e.i(71645),R=e.i(47167);let P=function(e){let t=[],i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:((64512&n)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128)}return t},D=function(e){let t=[],i=0,r=0;for(;i<e.length;){let n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[i++];t[r++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{let s=e[i++],a=e[i++];t[r++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a)}}return t.join("")},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=n>>2,h=(3&n)<<4|a>>4,c=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(c=64)),r.push(i[u],i[h],i[c],i[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):D(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let n=i[e.charAt(t++)],s=t<e.length?i[e.charAt(t)]:0,a=++t<e.length?i[e.charAt(t)]:64,o=++t<e.length?i[e.charAt(t)]:64;if(++t,null==n||null==s||null==a||null==o)throw new M;let l=n<<2|s>>4;if(r.push(l),64!==a){let e=s<<4&240|a>>2;if(r.push(e),64!==o){let e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let L=function(e){let t=P(e);return O.encodeByteArray(t,!0)},j=function(e){return L(e).replace(/\./g,"")},V=function(e){try{return O.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},F=()=>{try{return("u">typeof self?self:"u">typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===R.default||void 0===R.default.env)return;let e=R.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("u"<typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&V(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},U=e=>F()?.emulatorHosts?.[e],B=()=>F()?.config,z=e=>F()?.[`_${e}`];class q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function $(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H(e){return(await fetch(e,{credentials:"include"})).ok}let K={},W=!1;function G(e,t){if("u"<typeof window||"u"<typeof document||!$(window.location.host)||K[e]===t||K[e]||W)return;function i(e){return`__firebase__banner__${e}`}K[e]=t;let r="__firebase__banner",n=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(K))K[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(r),t=!1,e||((e=document.createElement("div")).setAttribute("id",r),t=!0),{created:t,element:e}),a=i("text"),o=document.getElementById(a)||document.createElement("span"),l=i("learnmore"),u=document.getElementById(l)||document.createElement("a"),h=i("preprendIcon"),c=document.getElementById(h)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",u.setAttribute("id",l),u.innerText="Learn more",u.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",u.setAttribute("target","__blank"),u.style.paddingLeft="5px",u.style.textDecoration="underline";let i=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;W=!0,(e=document.getElementById(r))&&e.remove()},e);c.setAttribute("width","24"),c.setAttribute("id",h),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px",t.append(c,o,u,i),document.body.appendChild(t)}n?(o.innerText="Preview backend disconnected.",c.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(c.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,o.innerText="Preview backend running in this workspace."),o.setAttribute("id",a)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function Q(){return"u">typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return"u">typeof WorkerGlobalScope&&"u">typeof self&&self instanceof WorkerGlobalScope}function X(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function J(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Z(){return new Promise((e,t)=>{try{let i=!0,r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{t(n.error?.message||"")}}catch(e){t(e)}})}class ee extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){var i,r;let n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(i=a,r=n,i.replace(ei,(e,t)=>{let i=r[t];return null!=i?String(i):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ee(s,l,n)}}let ei=/\{\$([^}]+)}/g;function er(e,t){if(e===t)return!0;let i=Object.keys(e),r=Object.keys(t);for(let n of i){if(!r.includes(n))return!1;let i=e[n],s=t[n];if(en(i)&&en(s)){if(!er(i,s))return!1}else if(i!==s)return!1}for(let e of r)if(!i.includes(e))return!1;return!0}function en(e){return null!==e&&"object"==typeof e}function es(e){let t=[];for(let[i,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ea(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[i,r]=e.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function eo(e){let t=e.indexOf("?");if(!t)return"";let i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}class el{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:i}:e).next&&(r.next=eu),void 0===r.error&&(r.error=eu),void 0===r.complete&&(r.complete=eu);let n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"u">typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eu(){}function eh(e,t=1e3,i=2){let r=t*Math.pow(i,e),n=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+n)}function ec(e){return e&&e._delegate?e._delegate:e}class ed{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let ef="[DEFAULT]";class ep{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new q;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(i)return null;throw e}if(i)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ef})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=ef){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=ef){return this.instances.has(e)}getOptions(e=ef){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[e,t]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let n=this.instances.get(i);return n&&e(n,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var i;let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e)===ef?void 0:i,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ef){return this.component?this.component.multipleInstances?e:ef:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class em{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ep(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let eg=[];(c=p||(p={}))[c.DEBUG=0]="DEBUG",c[c.VERBOSE=1]="VERBOSE",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.SILENT=5]="SILENT";let ey={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},ev=p.INFO,ew={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},eb=(e,t,...i)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),n=ew[t];if(n)console[n](`[${r}]  ${e.name}:`,...i);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ex{constructor(e){this.name=e,this._logLevel=ev,this._logHandler=eb,this._userLogHandler=null,eg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in p))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ey[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...e),this._logHandler(this,p.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...e),this._logHandler(this,p.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,p.INFO,...e),this._logHandler(this,p.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,p.WARN,...e),this._logHandler(this,p.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...e),this._logHandler(this,p.ERROR,...e)}}let eE=new WeakMap,eA=new WeakMap,eT=new WeakMap,eI=new WeakMap,e_=new WeakMap,eS={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return eA.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eT.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return eC(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function eC(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(eC(e.result)),r()},s=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&eE.set(t,e)}).catch(()=>{}),e_.set(t,e),t}if(eI.has(e))return eI.get(e);let r=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ek(this),t),eC(eE.get(this))}:function(...t){return eC(e.apply(ek(this),t))}:function(t,...i){let r=e.call(ek(this),t,...i);return eT.set(r,t.sort?t.sort():[t]),eC(r)};return e instanceof IDBTransaction&&function(e){if(eA.has(e))return;let t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),r()},s=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});eA.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,eS):e}(e);return r!==e&&(eI.set(e,r),e_.set(r,e)),r}let ek=e=>e_.get(e);function eN(e,t,{blocked:i,upgrade:r,blocking:n,terminated:s}={}){let a=indexedDB.open(e,t),o=eC(a);return r&&a.addEventListener("upgradeneeded",e=>{r(eC(a.result),e.oldVersion,e.newVersion,eC(a.transaction),e)}),i&&a.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let eR=["get","getKey","getAll","getAllKeys","count"],eP=["put","add","delete","clear"],eD=new Map;function eO(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eD.get(t))return eD.get(t);let i=t.replace(/FromIndex$/,""),r=t!==i,n=eP.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(n||eR.includes(i)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[i](...t),n&&s.done]))[0]};return eD.set(t,s),s}eS={...u=eS,get:(e,t,i)=>eO(e,t)||u.get(e,t,i),has:(e,t)=>!!eO(e,t)||u.has(e,t)};class eM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let eL="@firebase/app",ej="0.14.6",eV=new ex("@firebase/app"),eF="[DEFAULT]",eU={[eL]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eB=new Map,ez=new Map,eq=new Map;function e$(e,t){try{e.container.addComponent(t)}catch(i){eV.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function eH(e,t){e.container.addOrOverwriteComponent(t)}function eK(e){let t=e.name;if(eq.has(t))return eV.debug(`There were multiple attempts to register component ${t}.`),!1;for(let i of(eq.set(t,e),eB.values()))e$(i,e);for(let t of ez.values())e$(t,e);return!0}function eW(e,t){let i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function eG(e,t,i=eF){eW(e,t).clearInstance(i)}function eQ(e){return void 0!==e.options}function eY(e){return!eQ(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function eX(e){return null!=e&&void 0!==e.settings}function eJ(){eq.clear()}let eZ=new et("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class e0{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ed("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eZ.create("app-deleted",{appName:this._name})}}function e1(e,t){let i=V(e.split(".")[1]);null===i?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(i).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(i).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class e2 extends e0{constructor(e,t,i,r){const n=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:i,automaticDataCollectionEnabled:n};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig={automaticDataCollectionEnabled:n,...t},this._serverConfig.authIdToken&&e1(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&e1(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"u">typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,e9(eL,ej,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){e7(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw eZ.create("server-app-deleted")}}let e6="12.6.0";function e3(e,t={}){let i=e;"object"!=typeof t&&(t={name:t});let r={name:eF,automaticDataCollectionEnabled:!0,...t},n=r.name;if("string"!=typeof n||!n)throw eZ.create("bad-app-name",{appName:String(n)});if(i||(i=B()),!i)throw eZ.create("no-options");let s=eB.get(n);if(s)if(er(i,s.options)&&er(r,s.config))return s;else throw eZ.create("duplicate-app",{appName:n});let a=new em(n);for(let e of eq.values())a.addComponent(e);let o=new e0(i,r,a);return eB.set(n,o),o}function e4(e,t={}){let i;if(("u">typeof window||Y())&&!Y())throw eZ.create("invalid-server-app-environment");let r=t||{};if(e&&(eQ(e)?i=e.options:eY(e)?r=e:i=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),i||(i=B()),!i)throw eZ.create("no-options");let n={...r,...i};if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==r.releaseOnDeref&&"u"<typeof FinalizationRegistry)throw eZ.create("finalization-registry-not-supported",{});let s=""+[...JSON.stringify(n)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),a=ez.get(s);if(a)return a.incRefCount(r.releaseOnDeref),a;let o=new em(s);for(let e of eq.values())o.addComponent(e);let l=new e2(i,r,s,o);return ez.set(s,l),l}function e5(e=eF){let t=eB.get(e);if(!t&&e===eF&&B())return e3();if(!t)throw eZ.create("no-app",{appName:e});return t}function e8(){return Array.from(eB.values())}async function e7(e){let t=!1,i=e.name;eB.has(i)?(t=!0,eB.delete(i)):ez.has(i)&&0>=e.decRefCount()&&(ez.delete(i),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function e9(e,t,i){let r=eU[e]??e;i&&(r+=`-${i}`);let n=r.match(/\s|\//),s=t.match(/\s|\//);if(n||s){let e=[`Unable to register library "${r}" with version "${t}":`];n&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),n&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eV.warn(e.join(" "));return}eK(new ed(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function te(e,t){if(null!==e&&"function"!=typeof e)throw eZ.create("invalid-log-argument");for(let i of eg){let r=null;t&&t.level&&(r=ey[t.level]),null===e?i.userLogHandler=null:i.userLogHandler=(t,i,...n)=>{let s=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(r??t.logLevel)&&e({level:p[i].toLowerCase(),message:s,args:n,type:t.name})}}}function tt(e){eg.forEach(t=>{t.setLogLevel(e)})}let ti="firebase-heartbeat-store",tr=null;function tn(){return tr||(tr=eN("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ti)}catch(e){console.warn(e)}}}).catch(e=>{throw eZ.create("idb-open",{originalErrorMessage:e.message})})),tr}async function ts(e){try{let t=(await tn()).transaction(ti),i=await t.objectStore(ti).get(to(e));return await t.done,i}catch(e){if(e instanceof ee)eV.warn(e.message);else{let t=eZ.create("idb-get",{originalErrorMessage:e?.message});eV.warn(t.message)}}}async function ta(e,t){try{let i=(await tn()).transaction(ti,"readwrite"),r=i.objectStore(ti);await r.put(t,to(e)),await i.done}catch(e){if(e instanceof ee)eV.warn(e.message);else{let t=eZ.create("idb-set",{originalErrorMessage:e?.message});eV.warn(t.message)}}}function to(e){return`${e.name}!${e.options.appId}`}class tl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new th(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=tu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eV.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=tu(),{heartbeatsToSend:t,unsentEntries:i}=function(e,t=1024){let i=[],r=e.slice();for(let n of e){let e=i.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),tc(i)>t){e.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),tc(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=j(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return eV.warn(e),""}}}function tu(){return new Date().toISOString().substring(0,10)}class th{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!J()&&Z().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await ts(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return ta(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return ta(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function tc(e){return j(JSON.stringify({version:2,heartbeats:e})).length}function td(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}eK(new ed("platform-logger",e=>new eM(e),"PRIVATE")),eK(new ed("heartbeat",e=>new tl(e),"PRIVATE")),e9(eL,ej,""),e9(eL,ej,"esm2020"),e9("fire-js",""),e.s(["SDK_VERSION",()=>e6,"_DEFAULT_ENTRY_NAME",()=>eF,"_addComponent",()=>e$,"_addOrOverwriteComponent",()=>eH,"_apps",()=>eB,"_clearComponents",()=>eJ,"_components",()=>eq,"_getProvider",()=>eW,"_isFirebaseApp",()=>eQ,"_isFirebaseServerApp",()=>eX,"_isFirebaseServerAppSettings",()=>eY,"_registerComponent",()=>eK,"_removeServiceInstance",()=>eG,"_serverApps",()=>ez,"deleteApp",()=>e7,"getApp",()=>e5,"getApps",()=>e8,"initializeApp",()=>e3,"initializeServerApp",()=>e4,"onLog",()=>te,"registerVersion",()=>e9,"setLogLevel",()=>tt],92953);let tf=new et("auth","Firebase",td()),tp=new ex("@firebase/auth");function tm(e,...t){tp.logLevel<=p.ERROR&&tp.error(`Auth (${e6}): ${e}`,...t)}function tg(e,...t){throw tb(e,...t)}function ty(e,...t){return tb(e,...t)}function tv(e,t,i){return new et("auth","Firebase",{...td(),[t]:i}).create(t,{appName:e.name})}function tw(e){return tv(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tb(e,...t){if("string"!=typeof e){let i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(i,...r)}return tf.create(e,...t)}function tx(e,t,...i){if(!e)throw tb(t,...i)}function tE(e){let t="INTERNAL ASSERTION FAILED: "+e;throw tm(t),Error(t)}function tA(){return"u">typeof self&&self.location?.href||""}function tT(){return"u">typeof self&&self.location?.protocol||null}class tI{constructor(e,t){var i;this.shortDelay=e,this.longDelay=t,i="Short delay should be less than long delay!",t>e||tE(i),this.isMobile="u">typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return!("u">typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===tT()||"https:"===tT()||X()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function t_(e,t){var i,r;i=e.emulator,r="Emulator should always be set here",i||tE(r);let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class tS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"u">typeof self&&"fetch"in self?self.fetch:"u">typeof globalThis&&globalThis.fetch?globalThis.fetch:"u">typeof fetch?fetch:void tE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"u">typeof self&&"Headers"in self?self.Headers:"u">typeof globalThis&&globalThis.Headers?globalThis.Headers:"u">typeof Headers?Headers:void tE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"u">typeof self&&"Response"in self?self.Response:"u">typeof globalThis&&globalThis.Response?globalThis.Response:"u">typeof Response?Response:void tE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let tC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tN=new tI(3e4,6e4);function tR(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function tP(e,t,i,r,n={}){return tD(e,n,async()=>{let n={},s={};r&&("GET"===t?s=r:n={body:JSON.stringify(r)});let a=es({key:e.config.apiKey,...s}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);let l={method:t,headers:o,...n};return"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&$(e.emulatorConfig.host)&&(l.credentials="include"),tS.fetch()(await tM(e,e.config.apiHost,i,a),l)})}async function tD(e,t,i){e._canInitEmulator=!1;let r={...tC,...t};try{let t=new tL(e),n=await Promise.race([i(),t.promise]);t.clearNetworkTimeout();let s=await n.json();if("needConfirmation"in s)throw tj(e,"account-exists-with-different-credential",s);if(n.ok&&!("errorMessage"in s))return s;{let[t,i]=(n.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw tj(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw tj(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw tj(e,"user-disabled",s);let a=r[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw tv(e,a,i);tg(e,a)}}catch(t){if(t instanceof ee)throw t;tg(e,"network-request-failed",{message:String(t)})}}async function tO(e,t,i,r,n={}){let s=await tP(e,t,i,r,n);return"mfaPendingCredential"in s&&tg(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function tM(e,t,i,r){let n=`${t}${i}?${r}`,s=e.config.emulator?t_(e.config,n):`${e.config.apiScheme}://${n}`;return tk.includes(i)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class tL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ty(this.auth,"network-request-failed")),tN.get())})}}function tj(e,t,i){let r={appName:e.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);let n=ty(e,t,r);return n.customData._tokenResponse=i,n}function tV(e){return void 0!==e&&void 0!==e.enterprise}class tF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tU(e,t){return tP(e,"GET","/v2/recaptchaConfig",tR(e,t))}async function tB(e,t){return tP(e,"POST","/v1/accounts:delete",t)}async function tz(e,t){return tP(e,"POST","/v1/accounts:lookup",t)}function tq(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function t$(e,t=!1){let i=ec(e),r=await i.getIdToken(t),n=tK(r);tx(n&&n.exp&&n.auth_time&&n.iat,i.auth,"internal-error");let s="object"==typeof n.firebase?n.firebase:void 0,a=s?.sign_in_provider;return{claims:n,token:r,authTime:tq(tH(n.auth_time)),issuedAtTime:tq(tH(n.iat)),expirationTime:tq(tH(n.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function tH(e){return 1e3*Number(e)}function tK(e){let[t,i,r]=e.split(".");if(void 0===t||void 0===i||void 0===r)return tm("JWT malformed, contained fewer than 3 sections"),null;try{let e=V(i);if(!e)return tm("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return tm("Caught error parsing JWT payload as JSON",e?.toString()),null}}function tW(e){let t=tK(e);return tx(t,"internal-error"),tx(void 0!==t.exp,"internal-error"),tx(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tG(e,t,i=!1){if(i)return t;try{return await t}catch(t){throw t instanceof ee&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class tQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(!e)return this.errorBackoff=3e4,Math.max(0,(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tY{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tq(this.lastLoginAt),this.creationTime=tq(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tX(e){var t,i;let r=e.auth,n=await e.getIdToken(),s=await tG(e,tz(r,{idToken:n}));tx(s?.users.length,r,"internal-error");let a=s.users[0];e._notifyReloadListener(a);let o=a.providerUserInfo?.length?tZ(a.providerUserInfo):[],l=(t=e.providerData,i=o,[...t.filter(e=>!i.some(t=>t.providerId===e.providerId)),...i]),u=e.isAnonymous,h=!(e.email&&a.passwordHash)&&!l?.length;Object.assign(e,{uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new tY(a.createdAt,a.lastLoginAt),isAnonymous:!!u&&h})}async function tJ(e){let t=ec(e);await tX(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tZ(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function t0(e,t){let i=await tD(e,{},async()=>{let i=es({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:n}=e.config,s=await tM(e,r,"/v1/token",`key=${n}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let o={method:"POST",headers:a,body:i};return e.emulatorConfig&&$(e.emulatorConfig.host)&&(o.credentials="include"),tS.fetch()(s,o)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function t1(e,t){return tP(e,"POST","/v2/accounts:revokeToken",tR(e,t))}class t2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tx(e.idToken,"internal-error"),tx(void 0!==e.idToken,"internal-error"),tx(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):tW(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tx(0!==e.length,"internal-error");let t=tW(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(tx(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:n}=await t0(e,t);this.updateTokensAndExpiration(i,r,Number(n))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:n}=t,s=new t2;return i&&(tx("string"==typeof i,"internal-error",{appName:e}),s.refreshToken=i),r&&(tx("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),n&&(tx("number"==typeof n,"internal-error",{appName:e}),s.expirationTime=n),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t2,this.toJSON())}_performRefresh(){return tE("not implemented")}}function t6(e,t){tx("string"==typeof e||void 0===e,"internal-error",{appName:t})}class t3{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new tQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new tY(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await tG(this,this.stsTokenManager.getToken(this.auth,e));return tx(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return t$(this,e)}reload(){return tJ(this)}_assign(e){this!==e&&(tx(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new t3({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){tx(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await tX(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eX(this.auth.app))return Promise.reject(tw(this.auth));let e=await this.getIdToken();return await tG(this,tB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,r=t.email??void 0,n=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:h,emailVerified:c,isAnonymous:d,providerData:f,stsTokenManager:p}=t;tx(h&&p,e,"internal-error");let m=t2.fromJSON(this.name,p);tx("string"==typeof h,e,"internal-error"),t6(i,e.name),t6(r,e.name),tx("boolean"==typeof c,e,"internal-error"),tx("boolean"==typeof d,e,"internal-error"),t6(n,e.name),t6(s,e.name),t6(a,e.name),t6(o,e.name),t6(l,e.name),t6(u,e.name);let g=new t3({uid:h,auth:e,email:r,emailVerified:c,displayName:i,isAnonymous:d,photoURL:s,phoneNumber:n,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:u});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t,i=!1){let r=new t2;r.updateFromServerResponse(t);let n=new t3({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await tX(n),n}static async _fromGetAccountInfoResponse(e,t,i){let r=t.users[0];tx(void 0!==r.localId,"internal-error");let n=void 0!==r.providerUserInfo?tZ(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!n?.length,a=new t2;a.updateFromIdToken(i);let o=new t3({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:n,metadata:new tY(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!n?.length}),o}}let t4=new Map;function t5(e){var t,i;t="Expected a class definition",e instanceof Function||tE(t);let r=t4.get(e);return r?(i="Instance stored in cache mismatched with class",r instanceof e||tE(i)):(r=new e,t4.set(e,r)),r}class t8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function t7(e,t,i){return`firebase:${e}:${t}:${i}`}t8.type="NONE";class t9{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:n}=this.auth;this.fullUserKey=t7(this.userKey,r.apiKey,n),this.fullPersistenceKey=t7("persistence",r.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await tz(this.auth,{idToken:e}).catch(()=>void 0);return t?t3._fromGetAccountInfoResponse(this.auth,t,e):null}return t3._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new t9(t5(t8),e,i);let r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),n=r[0]||t5(t8),s=t7(i,e.config.apiKey,e.name),a=null;for(let i of t)try{let t=await i._get(s);if(t){let r;if("string"==typeof t){let i=await tz(e,{idToken:t}).catch(()=>void 0);if(!i)break;r=await t3._fromGetAccountInfoResponse(e,i,t)}else r=t3._fromJSON(e,t);i!==n&&(a=r),n=i;break}}catch{}let o=r.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&o.length&&(n=o[0],a&&await n._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==n)try{await e._remove(s)}catch{}}))),new t9(n,e,i)}}function ie(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(is(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(it(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(io(t))return"Blackberry";if(il(t))return"Webos";if(ii(t))return"Safari";if((t.includes("chrome/")||ir(t))&&!t.includes("edge/"))return"Chrome";if(ia(t))return"Android";let i=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(i?.length===2)return i[1]}return"Other"}function it(e=Q()){return/firefox\//i.test(e)}function ii(e=Q()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ir(e=Q()){return/crios\//i.test(e)}function is(e=Q()){return/iemobile/i.test(e)}function ia(e=Q()){return/android/i.test(e)}function io(e=Q()){return/blackberry/i.test(e)}function il(e=Q()){return/webos/i.test(e)}function iu(e=Q()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ih(e=Q()){return iu(e)||ia(e)||il(e)||io(e)||/windows phone/i.test(e)||is(e)}function ic(e,t=[]){let i;switch(e){case"Browser":i=ie(Q());break;case"Worker":i=`${ie(Q())}-${e}`;break;default:i=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${e6}/${r}`}class id{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=t=>new Promise((i,r)=>{try{let r=e(t);i(r)}catch(e){r(e)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}async function ip(e,t={}){return tP(e,"GET","/v2/passwordPolicy",tR(e,t))}class im{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let i;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}class ig{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new id(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=t5(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted){if(this.persistenceManager=await t9.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tz(this,{idToken:e}),i=await t3._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(eX(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,n=i?._redirectEventId,s=await this.tryRedirectSignIn(e);(!t||t===n)&&s?.user&&(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return(tx(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tX(e)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("u"<typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(eX(this.app))return Promise.reject(tw(this));let t=e?ec(e):null;return t&&tx(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tx(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return eX(this.app)?Promise.reject(tw(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return eX(this.app)?Promise.reject(tw(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(t5(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new im(await ip(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new et("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await t1(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&t5(e)||this._popupRedirectResolver;tx(t,this,"argument-error"),this.redirectPersistenceManager=await t9.create(this,[t5(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return(this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e)?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let n="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tx(a,this,"internal-error"),a.then(()=>{s||n(this.currentUser)}),"function"==typeof t){let n=e.addObserver(t,i,r);return()=>{s=!0,n()}}{let i=e.addObserver(t);return()=>{s=!0,i()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tx(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ic(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(eX(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&function(e,...t){tp.logLevel<=p.WARN&&tp.warn(`Auth (${e6}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){let i=new el(e,void 0);return i.subscribe.bind(i)}(e=>this.observer=e)}get next(){return tx(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let iv={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iw(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ib{constructor(){this.enterprise=new ix}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ix{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}let iE="NO_RECAPTCHA";class iA{constructor(e){this.type="recaptcha-enterprise",this.auth=ec(e)}async verify(e="verify",t=!1){async function i(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,i)=>{tU(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)i(Error("recaptcha Enterprise site key undefined"));else{let i=new tF(r);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}}).catch(e=>{i(e)})})}function r(t,i,r){let n=window.grecaptcha;tV(n)?n.enterprise.ready(()=>{n.enterprise.execute(t,{action:e}).then(e=>{i(e)}).catch(()=>{i(iE)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ib().execute("siteKey",{action:"verify"}):new Promise((e,n)=>{i(this.auth).then(i=>{if(!t&&tV(window.grecaptcha))r(i,e,n);else{var s;if("u"<typeof window)return void n(Error("RecaptchaVerifier is only supported in browser"));let t=iv.recaptchaEnterpriseScript;0!==t.length&&(t+=i),(s=t,iv.loadJS(s)).then(()=>{r(i,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function iT(e,t,i,r=!1,n=!1){let s,a=new iA(e);if(n)s=iE;else try{s=await a.verify(i)}catch(e){s=await a.verify(i,!0)}let o={...t};if("mfaSmsEnrollment"===i||"mfaSmsSignIn"===i){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function iI(e,t,i,r,n){if("EMAIL_PASSWORD_PROVIDER"===n)if(!e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return r(e,t).catch(async n=>{if("auth/missing-recaptcha-token"!==n.code)return Promise.reject(n);{console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let n=await iT(e,t,i,"getOobCode"===i);return r(e,n)}});else{let n=await iT(e,t,i,"getOobCode"===i);return r(e,n)}if("PHONE_PROVIDER"!==n)return Promise.reject(n+" provider is not supported.");if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let n=await iT(e,t,i);return r(e,n).catch(async n=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&("auth/missing-recaptcha-token"===n.code||"auth/invalid-app-credential"===n.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${i} flow.`);let n=await iT(e,t,i,!1,!0);return r(e,n)}return Promise.reject(n)})}{let n=await iT(e,t,i,!1,!0);return r(e,n)}}async function i_(e){let t=ec(e),i=new tF(await tU(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new iA(t).verify()}function iS(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function iC(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class ik{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tE("not implemented")}_getIdTokenResponse(e){return tE("not implemented")}_linkToIdToken(e,t){return tE("not implemented")}_getReauthenticationResolver(e){return tE("not implemented")}}async function iN(e,t){return tP(e,"POST","/v1/accounts:signUp",t)}async function iR(e,t){return tO(e,"POST","/v1/accounts:signInWithPassword",tR(e,t))}async function iP(e,t){return tO(e,"POST","/v1/accounts:signInWithEmailLink",tR(e,t))}async function iD(e,t){return tO(e,"POST","/v1/accounts:signInWithEmailLink",tR(e,t))}class iO extends ik{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new iO(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new iO(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return iI(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",iR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iP(e,{email:this._email,oobCode:this._password});default:tg(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return iI(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iD(e,{idToken:t,email:this._email,oobCode:this._password});default:tg(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function iM(e,t){return tO(e,"POST","/v1/accounts:signInWithIdp",tR(e,t))}class iL extends ik{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new iL(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tg("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let{providerId:t,signInMethod:i,...r}="string"==typeof e?JSON.parse(e):e;if(!t||!i)return null;let n=new iL(t,i);return n.idToken=r.idToken||void 0,n.accessToken=r.accessToken||void 0,n.secret=r.secret,n.nonce=r.nonce,n.pendingToken=r.pendingToken||null,n}_getIdTokenResponse(e){return iM(e,this.buildRequest())}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,iM(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,iM(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=es(t)}return e}}async function ij(e,t){return tP(e,"POST","/v1/accounts:sendVerificationCode",tR(e,t))}async function iV(e,t){return tO(e,"POST","/v1/accounts:signInWithPhoneNumber",tR(e,t))}async function iF(e,t){let i=await tO(e,"POST","/v1/accounts:signInWithPhoneNumber",tR(e,t));if(i.temporaryProof)throw tj(e,"account-exists-with-different-credential",i);return i}let iU={USER_NOT_FOUND:"user-not-found"};async function iB(e,t){return tO(e,"POST","/v1/accounts:signInWithPhoneNumber",tR(e,{...t,operation:"REAUTH"}),iU)}class iz extends ik{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new iz({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new iz({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return iV(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return iF(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return iB(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}=e;return i||t||r||n?new iz({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:n}):null}}class iq{constructor(e){const t=ea(eo(e)),i=t.apiKey??null,r=t.oobCode??null,n=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);tx(i&&r&&n,"argument-error"),this.apiKey=i,this.operation=n,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t,i,r,n=(i=(t=ea(eo(e)).link)?ea(eo(t)).deep_link_id:null,((r=ea(eo(e)).deep_link_id)?ea(eo(r)).link:null)||r||i||t||e);try{return new iq(n)}catch{return null}}}class i${constructor(){this.providerId=i$.PROVIDER_ID}static credential(e,t){return iO._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let i=iq.parseLink(t);return tx(i,"argument-error"),iO._fromEmailAndCode(e,i.code,i.tenantId)}}i$.PROVIDER_ID="password",i$.EMAIL_PASSWORD_SIGN_IN_METHOD="password",i$.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class iK extends iH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iW extends iK{constructor(){super("facebook.com")}static credential(e){return iL._fromParams({providerId:iW.PROVIDER_ID,signInMethod:iW.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iW.credentialFromTaggedObject(e)}static credentialFromError(e){return iW.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iW.credential(e.oauthAccessToken)}catch{return null}}}iW.FACEBOOK_SIGN_IN_METHOD="facebook.com",iW.PROVIDER_ID="facebook.com";class iG extends iK{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return iL._fromParams({providerId:iG.PROVIDER_ID,signInMethod:iG.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return iG.credentialFromTaggedObject(e)}static credentialFromError(e){return iG.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return iG.credential(t,i)}catch{return null}}}iG.GOOGLE_SIGN_IN_METHOD="google.com",iG.PROVIDER_ID="google.com";class iQ extends iK{constructor(){super("github.com")}static credential(e){return iL._fromParams({providerId:iQ.PROVIDER_ID,signInMethod:iQ.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iQ.credentialFromTaggedObject(e)}static credentialFromError(e){return iQ.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iQ.credential(e.oauthAccessToken)}catch{return null}}}iQ.GITHUB_SIGN_IN_METHOD="github.com",iQ.PROVIDER_ID="github.com";class iY extends iK{constructor(){super("twitter.com")}static credential(e,t){return iL._fromParams({providerId:iY.PROVIDER_ID,signInMethod:iY.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return iY.credentialFromTaggedObject(e)}static credentialFromError(e){return iY.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return iY.credential(t,i)}catch{return null}}}iY.TWITTER_SIGN_IN_METHOD="twitter.com",iY.PROVIDER_ID="twitter.com";class iX{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){return new iX({user:await t3._fromIdTokenResponse(e,i,r),providerId:iJ(i),_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){return await e._updateTokensIfNecessary(i,!0),new iX({user:e,providerId:iJ(i),_tokenResponse:i,operationType:t})}}function iJ(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class iZ extends ee{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,iZ.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new iZ(e,t,i,r)}}function i0(e,t,i,r){return("reauthenticate"===t?i._getReauthenticationResolver(e):i._getIdTokenResponse(e)).catch(i=>{if("auth/multi-factor-auth-required"===i.code)throw iZ._fromErrorAndOperation(e,i,t,r);throw i})}async function i1(e,t,i=!1){let r=await tG(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return iX._forOperation(e,"link",r)}async function i2(e,t,i=!1){let{auth:r}=e;if(eX(r.app))return Promise.reject(tw(r));let n="reauthenticate";try{let s=await tG(e,i0(r,n,t,e),i);tx(s.idToken,r,"internal-error");let a=tK(s.idToken);tx(a,r,"internal-error");let{sub:o}=a;return tx(e.uid===o,r,"user-mismatch"),iX._forOperation(e,n,s)}catch(e){throw e?.code==="auth/user-not-found"&&tg(r,"user-mismatch"),e}}async function i6(e,t,i=!1){if(eX(e.app))return Promise.reject(tw(e));let r="signIn",n=await i0(e,r,t),s=await iX._fromIdTokenResponse(e,r,n);return i||await e._updateCurrentUser(s.user),s}async function i3(e,t){return i6(ec(e),t)}class i4{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?i5._fromServerResponse(e,t):"totpInfo"in t?i8._fromServerResponse(e,t):tg(e,"internal-error")}}class i5 extends i4{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new i5(t)}}class i8 extends i4{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new i8(t)}}async function i7(e,t,i){if(eX(e.app))return Promise.reject(tw(e));let r=ec(e),n=i$.credentialWithLink(t,i||tA());return tx(n._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),i3(r,n)}function i9(e,t){return tP(e,"POST","/v2/accounts/mfaEnrollment:start",tR(e,t))}new WeakMap;let re="__sak";class rt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(re,"1"),this.storage.removeItem(re),Promise.resolve(!0)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ri extends rt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ih(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){let i;if(!e.key)return void this.forAllChangedKeys((e,t,i)=>{this.notifyListeners(e,i)});let r=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},s=this.storage.getItem(r);((i=Q()).indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0)&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ri.type="LOCAL";class rr extends rt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rr.type="SESSION";class rn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let i=new rn(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:i,data:r}=e.data,n=this.handlersMap[i];if(!n?.size)return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:i});let s=Array.from(n).map(async t=>t(e.origin,r)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function rs(e="",t=10){let i="";for(let e=0;e<t;e++)i+=Math.floor(10*Math.random());return e+i}rn.receivers=[];class ra{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r,n,s="u">typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let l=rs("",20);s.port1.start();let u=setTimeout(()=>{o(Error("unsupported_event"))},i);n={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(e.data.response);break;default:clearTimeout(u),clearTimeout(r),o(Error("invalid_response"))}}},this.handlers.add(n),s.port1.addEventListener("message",n.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{n&&this.removeMessageHandler(n)})}}function ro(){return window}function rl(){return void 0!==ro().WorkerGlobalScope&&"function"==typeof ro().importScripts}async function ru(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}let rh="firebaseLocalStorageDb",rc="firebaseLocalStorage",rd="fbase_key";class rf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rp(e,t){return e.transaction([rc],t?"readwrite":"readonly").objectStore(rc)}function rm(){let e=indexedDB.open(rh,1);return new Promise((t,i)=>{e.addEventListener("error",()=>{i(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(rc,{keyPath:rd})}catch(e){i(e)}}),e.addEventListener("success",async()=>{let i=e.result;i.objectStoreNames.contains(rc)?t(i):(i.close(),await new rf(indexedDB.deleteDatabase(rh)).toPromise(),t(await rm()))})})}async function rg(e,t,i){return new rf(rp(e,!0).put({[rd]:t,value:i})).toPromise()}async function ry(e,t){let i=rp(e,!1).get(t),r=await new rf(i).toPromise();return void 0===r?null:r.value}function rv(e,t){return new rf(rp(e,!0).delete(t)).toPromise()}class rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await rm()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rn._getInstance(rl()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ru(),!this.activeServiceWorker)return;this.sender=new ra(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await rm();return await rg(e,re,"1"),await rv(e,re),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>rg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ry(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new rf(rp(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],i=new Set;if(0!==e.length)for(let{fbase_key:r,value:n}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(n)&&(this.notifyListeners(r,n),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!i.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let e of Array.from(i))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function rb(e,t){return tP(e,"POST","/v2/accounts/mfaSignIn:start",tR(e,t))}rw.type="LOCAL",iw("rcb"),new tI(3e4,6e4);let rx="recaptcha";async function rE(e,t,i){if(!e._getRecaptchaConfig())try{await i_(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"==typeof t?{phoneNumber:t}:t,"session"in r){let t=r.session;if("phoneNumber"in r){tx("enroll"===t.type,e,"internal-error");let n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===iE){tx(i?.type===rx,e,"argument-error");let r=await rA(e,t,i);return i9(e,r)}return i9(e,t)},a=iI(e,n,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{tx("signin"===t.type,e,"internal-error");let n=r.multiFactorHint?.uid||r.multiFactorUid;tx(n,e,"missing-multi-factor-info");let s={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===iE){tx(i?.type===rx,e,"argument-error");let r=await rA(e,t,i);return rb(e,r)}return rb(e,t)},o=iI(e,s,"mfaSmsSignIn",a,"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=async(e,t)=>{if(t.captchaResponse===iE){tx(i?.type===rx,e,"argument-error");let r=await rA(e,t,i);return ij(e,r)}return ij(e,t)},s=iI(e,t,"sendVerificationCode",n,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{i?._reset()}}async function rA(e,t,i){tx(i.type===rx,e,"argument-error");let r=await i.verify();tx("string"==typeof r,e,"argument-error");let n={...t};if("phoneEnrollmentInfo"in n){let e=n.phoneEnrollmentInfo.phoneNumber,t=n.phoneEnrollmentInfo.captchaResponse,i=n.phoneEnrollmentInfo.clientType,s=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:i,recaptchaVersion:s}}),n}if(!("phoneSignInInfo"in n))return Object.assign(n,{recaptchaToken:r}),n;{let e=n.phoneSignInInfo.captchaResponse,t=n.phoneSignInInfo.clientType,i=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:i}}),n}}class rT{constructor(e){this.providerId=rT.PROVIDER_ID,this.auth=ec(e)}verifyPhoneNumber(e,t){return rE(this.auth,e,ec(t))}static credential(e,t){return iz._fromVerification(e,t)}static credentialFromResult(e){return rT.credentialFromTaggedObject(e)}static credentialFromError(e){return rT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:i}=e;return t&&i?iz._fromTokenResponse(t,i):null}}function rI(e,t){return t?t5(t):(tx(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rT.PROVIDER_ID="phone",rT.PHONE_SIGN_IN_METHOD="phone";class r_ extends ik{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iM(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iM(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iM(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rS(e){return i6(e.auth,new r_(e),e.bypassAuthState)}function rC(e){let{auth:t,user:i}=e;return tx(i,t,"internal-error"),i2(i,new r_(e),e.bypassAuthState)}async function rk(e){let{auth:t,user:i}=e;return tx(i,t,"internal-error"),i1(i,new r_(e),e.bypassAuthState)}class rN{constructor(e,t,i,r,n=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:n,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:i,tenantId:n||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rS;case"linkViaPopup":case"linkViaRedirect":return rk;case"reauthViaPopup":case"reauthViaRedirect":return rC;default:tg(this.auth,"internal-error")}}resolve(e){var t,i;t=this.pendingPromise,i="Pending promise was never set",t||tE(i),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,i;t=this.pendingPromise,i="Pending promise was never set",t||tE(i),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let rR=new tI(2e3,1e4);async function rP(e,t,i){if(eX(e.app))return Promise.reject(ty(e,"operation-not-supported-in-this-environment"));let r=ec(e);if(!(t instanceof iH))throw iH.name!==t.constructor.name&&tg(e,"argument-error"),tv(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);let n=rI(r,i);return new rD(r,"signInViaPopup",t,n).executeNotNull()}class rD extends rN{constructor(e,t,i,r,n){super(e,t,r,n),this.provider=i,this.authWindow=null,this.pollId=null,rD.currentPopupAction&&rD.currentPopupAction.cancel(),rD.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return tx(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||tE(t);let i=rs();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],i),this.authWindow.associatedEvent=i,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ty(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ty(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rD.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ty(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rR.get())};e()}}rD.currentPopupAction=null;let rO=new Map;class rM extends rN{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=rO.get(this.auth._key());if(!e){try{let t=await rL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}rO.set(this.auth._key(),e)}return this.bypassAuthState||rO.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rL(e,t){var i;let r=t7("pendingRedirect",(i=t).config.apiKey,i.name),n=t5(e._redirectPersistence);if(!await n._isAvailable())return!1;let s=await n._get(r)==="true";return await n._remove(r),s}function rj(e,t){rO.set(e._key(),t)}async function rV(e,t,i=!1){if(eX(e.app))return Promise.reject(tw(e));let r=ec(e),n=rI(r,t),s=new rM(r,n,i),a=await s.execute();return a&&!i&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class rF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rB(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rB(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ty(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rU(e))}saveEventToCache(e){this.cachedEventUids.add(rU(e)),this.lastProcessedEventTime=Date.now()}}function rU(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rB({type:e,error:t}){return"unknown"===e&&t?.code==="auth/no-auth-event"}async function rz(e,t={}){return tP(e,"GET","/v1/projects",t)}let rq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r$=/^https?/;async function rH(e){if(e.config.emulator)return;let{authorizedDomains:t}=await rz(e);for(let e of t)try{if(function(e){let t=tA(),{protocol:i,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let n=new URL(e);return""===n.hostname&&""===r?"chrome-extension:"===i&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===i&&n.hostname===r}if(!r$.test(i))return!1;if(rq.test(e))return r===e;let n=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}(e))return}catch{}tg(e,"unauthorized-domain")}let rK=new tI(3e4,6e4);function rW(){let e=ro().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let rG=null,rQ=new tI(5e3,15e3),rY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rJ(e){let t,i,r,n,s,a=await (rG=rG||new Promise((t,i)=>{function r(){rW(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rW(),i(ty(e,"network-request-failed"))},timeout:rK.get()})}if(ro().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ro().gapi?.load)r();else{var n;let t=iw("iframefcb");return ro()[t]=()=>{gapi.load?r():i(ty(e,"network-request-failed"))},(n=`${iv.gapiScript}?onload=${t}`,iv.loadJS(n)).catch(e=>i(e))}}).catch(e=>{throw rG=null,e})),o=ro().gapi;return tx(o,e,"internal-error"),a.open({where:document.body,url:(tx((t=e.config).authDomain,e,"auth-domain-config-required"),i=t.emulator?t_(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:e6},(n=rX.get(e.config.apiHost))&&(r.eid=n),(s=e._getFrameworks()).length&&(r.fw=s.join(",")),`${i}?${es(r).slice(1)}`),messageHandlersFilter:o.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rY,dontclear:!0},t=>new Promise(async(i,r)=>{await t.restyle({setHideOnLeave:!1});let n=ty(e,"network-request-failed"),s=ro().setTimeout(()=>{r(n)},rQ.get());function a(){ro().clearTimeout(s),i(t)}t.ping(a).then(a,()=>{r(n)})}))}let rZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class r0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let r1=encodeURIComponent("fac");async function r2(e,t,i,r,n,s){tx(e.config.authDomain,e,"auth-domain-config-required"),tx(e.config.apiKey,e,"invalid-api-key");let a={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:r,v:e6,eventId:n};if(t instanceof iH)for(let[i,r]of(t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",!function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())&&(a.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))a[i]=r;if(t instanceof iK){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}for(let t of(e.tenantId&&(a.tid=e.tenantId),Object.keys(a)))void 0===a[t]&&delete a[t];let o=await e._getAppCheckToken(),l=o?`#${r1}=${encodeURIComponent(o)}`:"";return`${function({config:e}){return e.emulator?t_(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${es(a).slice(1)}${l}`}let r6="webStorageSupport",r3=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=rV,this._overrideRedirectResult=rj}async _openPopup(e,t,i,r){var n,s;n=this.eventManagers[e._key()]?.manager,s="_initialize() not called before _openPopup()",n||tE(s);let a=await r2(e,t,i,tA(),r);return function(e,t,i,r=500,n=600){let s=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",l={...rZ,width:r.toString(),height:n.toString(),top:s,left:a},u=Q().toLowerCase();i&&(o=ir(u)?"_blank":i),it(u)&&(t=t||"http://localhost",l.scrollbars="yes");let h=Object.entries(l).reduce((e,[t,i])=>`${e}${t}=${i},`,"");if(function(e=Q()){return iu(e)&&!!window.navigator?.standalone}(u)&&"_self"!==o){var c,d;let e,i;return c=t||"",d=o,(e=document.createElement("a")).href=c,e.target=d,(i=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i),new r0(null)}let f=window.open(t||"",o,h);tx(f,e,"popup-blocked");try{f.focus()}catch(e){}return new r0(f)}(e,a,rs())}async _openRedirect(e,t,i,r){var n;return await this._originValidation(e),n=await r2(e,t,i,tA(),r),ro().location.href=n,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var i;let{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(i="If manager is not set, promise should be",r||tE(i),r)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await rJ(e),i=new rF(e);return t.register("authEvent",t=>(tx(t?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r6,{type:r6},i=>{let r=i?.[0]?.[r6];void 0!==r&&t(!!r),tg(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ih()||ii()||iu()}};var r4="@firebase/auth",r5="1.12.0";class r8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tx(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let r7=z("authIdTokenMaxAge")||300,r9=null;iv={loadJS:e=>new Promise((t,i)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{let t=ty("internal-error");t.customData=e,i(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},d="Browser",eK(new ed("auth",(e,{options:t})=>{let i,r,n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;tx(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let u=new ig(n,s,a,{apiKey:o,authDomain:l,clientPlatform:d,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ic(d)});return r=(Array.isArray(i=t?.persistence||[])?i:[i]).map(t5),t?.errorMap&&u._updateErrorMap(t.errorMap),u._initializeWithPersistence(r,t?.popupRedirectResolver),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),eK(new ed("auth-internal",e=>new r8(ec(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),e9(r4,r5,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(d)),e9(r4,r5,"esm2020"),e.s([],58556),e.i(58556);var ne=function(){return(ne=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},nt=function(e){return{loading:null==e,value:e}},ni=function(e){var t=e?e():void 0,i=(0,N.useReducer)(function(e,t){switch(t.type){case"error":return ne(ne({},e),{error:t.error,loading:!1,value:void 0});case"reset":return nt(t.defaultValue);case"value":return ne(ne({},e),{error:void 0,loading:!1,value:t.value});default:return e}},nt(t)),r=i[0],n=i[1],s=(0,N.useCallback)(function(){n({type:"reset",defaultValue:e?e():void 0})},[e]),a=(0,N.useCallback)(function(e){n({type:"error",error:e})},[]),o=(0,N.useCallback)(function(e){n({type:"value",value:e})},[]);return(0,N.useMemo)(function(){return{error:r.error,loading:r.loading,reset:s,setError:a,setValue:o,value:r.value}},[r.error,r.loading,s,a,o,r.value])},nr=function(e,t){var i=ni(function(){return e.currentUser}),r=i.error,n=i.loading,s=i.setError,a=i.setValue,o=i.value;return(0,N.useEffect)(function(){var i,r=(i=function(e){var i,r,n,o;return i=void 0,r=void 0,n=void 0,o=function(){return function(e,t){var i,r,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){var l=[s,o];if(i)throw TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&l[0]?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){a.label=l[1];break}if(6===l[0]&&a.label<n[1]){a.label=n[1],n=l;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(l);break}n[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{i=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:if(!(null==t?void 0:t.onUserChanged))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return i.sent(),[3,4];case 3:return s(i.sent()),[3,4];case 4:return a(e),[2]}})},new(n||(n=Promise))(function(e,t){function s(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):((i=t.value)instanceof n?i:new n(function(e){e(i)})).then(s,a)}l((o=o.apply(i,r||[])).next())})},ec(e).onAuthStateChanged(i,s,void 0));return function(){r()}},[e]),[o,n,r]};e9("firebase","12.7.0","app"),e.i(92953);var nn=e.i(67034),ns="u">typeof globalThis?globalThis:"u">typeof window?window:e.g,na={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}var t=function(){this.blockSize=-1};function i(){}function r(e,t,i){i||(i=0);let r=Array(16);if("string"==typeof t)for(var n=0;n<16;++n)r[n]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(n=0;n<16;++n)r[n]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],n=e.g[2];let s=e.g[3],a;a=t+(s^i&(n^s))+r[0]+0xd76aa478|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[1]+0xe8c7b756|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[2]+0x242070db|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[3]+0xc1bdceee|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[4]+0xf57c0faf|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[5]+0x4787c62a|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[6]+0xa8304613|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[7]+0xfd469501|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[8]+0x698098d8|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[9]+0x8b44f7af|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[10]+0xffff5bb1|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[11]+0x895cd7be|0,a=t+(s^(i=n+(a<<22|a>>>10))&(n^s))+r[12]+0x6b901122|0,a=s+(n^(t=i+(a<<7|a>>>25))&(i^n))+r[13]+0xfd987193|0,a=n+(i^(s=t+(a<<12|a>>>20))&(t^i))+r[14]+0xa679438e|0,a=i+(t^(n=s+(a<<17|a>>>15))&(s^t))+r[15]+0x49b40821|0,i=n+(a<<22|a>>>10),a=t+(n^s&(i^n))+r[1]+0xf61e2562|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[11]+0x265e5a51|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[0]+0xe9b6c7aa|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[5]+0xd62f105d|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[15]+0xd8a1e681|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[4]+0xe7d3fbc8|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[9]+0x21e1cde6|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[3]+0xf4d50d87|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[8]+0x455a14ed|0,i=n+(a<<20|a>>>12),a=t+(n^s&(i^n))+r[13]+0xa9e3e905|0,t=i+(a<<5|a>>>27),a=s+(i^n&(t^i))+r[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=n+(t^i&(s^t))+r[7]+0x676f02d9|0,n=s+(a<<14|a>>>18),a=i+(s^t&(n^s))+r[12]+0x8d2a4c8a|0,a=t+((i=n+(a<<20|a>>>12))^n^s)+r[5]+0xfffa3942|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[8]+0x8771f681|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[11]+0x6d9d6122|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[14]+0xfde5380c|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[1]+0xa4beea44|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[4]+0x4bdecfa9|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[7]+0xf6bb4b60|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[10]+0xbebfbc70|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[13]+0x289b7ec6|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[0]+0xeaa127fa|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[3]+0xd4ef3085|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[6]+0x4881d05|0,a=t+((i=n+(a<<23|a>>>9))^n^s)+r[9]+0xd9d4d039|0,a=s+((t=i+(a<<4|a>>>28))^i^n)+r[12]+0xe6db99e5|0,a=n+((s=t+(a<<11|a>>>21))^t^i)+r[15]+0x1fa27cf8|0,a=i+((n=s+(a<<16|a>>>16))^s^t)+r[2]+0xc4ac5665|0,i=n+(a<<23|a>>>9),a=t+(n^(i|~s))+r[0]+0xf4292244|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[14]+0xab9423a7|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[5]+0xfc93a039|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[12]+0x655b59c3|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[10]+0xffeff47d|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[1]+0x85845dd1|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[8]+0x6fa87e4f|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[6]+0xa3014314|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[13]+0x4e0811a1|0,i=n+(a<<21|a>>>11),a=t+(n^(i|~s))+r[4]+0xf7537e82|0,t=i+(a<<6|a>>>26),a=s+(i^(t|~n))+r[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=n+(t^(s|~i))+r[2]+0x2ad7d2bb|0,n=s+(a<<15|a>>>17),a=i+(s^(n|~t))+r[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(n+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+n|0,e.g[3]=e.g[3]+s|0}function n(e,t){this.h=t;let i=[],r=!0;for(let n=e.length-1;n>=0;n--){let s=0|e[n];r&&s==t||(i[n]=s,r=!1)}this.g=i}i.prototype=t.prototype,e.F=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.D=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)},e.prototype.u=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.v=function(e,t){void 0===t&&(t=e.length);let i=t-this.blockSize,n=this.C,s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=i;)r(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(n[s++]=e.charCodeAt(a++),s==this.blockSize){r(this,n),s=0;break}}else for(;a<t;)if(n[s++]=e[a++],s==this.blockSize){r(this,n),s=0;break}}this.h=s,this.o+=t},e.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var i=e.length-8;i<e.length;++i)e[i]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,i=0;i<4;++i)for(let r=0;r<32;r+=8)e[t++]=this.g[i]>>>r&255;return e};var s,a={};function o(e){var t;return -128<=e&&e<128?(t=function(e){return new n([0|e],e<0?-1:0)},Object.prototype.hasOwnProperty.call(a,e)?a[e]:a[e]=t(e)):new n([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return p(l(-e));let t=[],i=1;for(let r=0;e>=i;r++)t[r]=e/i|0,i*=0x100000000;return new n(t,0)}var u=o(0),h=o(1),c=o(0x1000000);function d(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return -1==e.h}function p(e){let t=e.g.length,i=[];for(let r=0;r<t;r++)i[r]=~e.g[r];return new n(i,~e.h).add(h)}function y(e,t){return e.add(p(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function w(e,t){this.g=e,this.h=t}function b(e,t){if(d(t))throw Error("division by zero");if(d(e))return new w(u,u);if(f(e))return t=b(p(e),t),new w(p(t.g),p(t.h));if(f(t))return t=b(e,p(t)),new w(p(t.g),t.h);if(e.g.length>30){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var i=h,r=t;0>=r.l(e);)i=x(i),r=x(r);var n=E(i,1),s=E(r,1);for(r=E(r,2),i=E(i,2);!d(r);){var a=s.add(r);0>=a.l(e)&&(n=n.add(i),s=a),r=E(r,1),i=E(i,1)}return t=y(e,n.j(t)),new w(n,t)}for(n=u;e.l(t)>=0;){for(r=(r=Math.ceil(Math.log(i=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=l(i)).j(t);f(a)||a.l(e)>0;)i-=r,a=(s=l(i)).j(t);d(s)&&(s=h),n=n.add(s),e=y(e,a)}return new w(n,e)}function x(e){let t=e.g.length+1,i=[];for(let r=0;r<t;r++)i[r]=e.i(r)<<1|e.i(r-1)>>>31;return new n(i,e.h)}function E(e,t){let i=t>>5;t%=32;let r=e.g.length-i,s=[];for(let n=0;n<r;n++)s[n]=t>0?e.i(n+i)>>>t|e.i(n+i+1)<<32-t:e.i(n+i);return new n(s,e.h)}(s=n.prototype).m=function(){if(f(this))return-p(this).m();let e=0,t=1;for(let i=0;i<this.g.length;i++){let r=this.i(i);e+=(r>=0?r:0x100000000+r)*t,t*=0x100000000}return e},s.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(f(this))return"-"+p(this).toString(e);let t=l(Math.pow(e,6));var i=this;let r="";for(;;){let n=b(i,t).g,s=(((i=y(i,n.j(t))).g.length>0?i.g[0]:i.h)>>>0).toString(e);if(d(i=n))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},s.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return f(e=y(this,e))?-1:+!d(e)},s.abs=function(){return f(this)?p(this):this},s.add=function(e){let t=Math.max(this.g.length,e.g.length),i=[],r=0;for(let n=0;n<=t;n++){let t=r+(65535&this.i(n))+(65535&e.i(n)),s=(t>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);r=s>>>16,t&=65535,s&=65535,i[n]=s<<16|t}return new n(i,-0x80000000&i[i.length-1]?-1:0)},s.j=function(e){if(d(this)||d(e))return u;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(c)&&0>e.l(c))return l(this.m()*e.m());let t=this.g.length+e.g.length,i=[];for(var r=0;r<2*t;r++)i[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let n=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);i[2*r+2*t]+=s*o,v(i,2*r+2*t),i[2*r+2*t+1]+=n*o,v(i,2*r+2*t+1),i[2*r+2*t+1]+=s*a,v(i,2*r+2*t+1),i[2*r+2*t+2]+=n*a,v(i,2*r+2*t+2)}for(e=0;e<t;e++)i[e]=i[2*e+1]<<16|i[2*e];for(e=t;e<2*t;e++)i[e]=0;return new n(i,0)},s.B=function(e){return b(this,e).h},s.and=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)&e.i(r);return new n(i,this.h&e.h)},s.or=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)|e.i(r);return new n(i,this.h|e.h)},s.xor=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)^e.i(r);return new n(i,this.h^e.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,g=na.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.B,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=l,n.fromString=function e(t,i){if(0==t.length)throw Error("number format error: empty string");if((i=i||10)<2||36<i)throw Error("radix out of range: "+i);if("-"==t.charAt(0))return p(e(t.substring(1),i));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');let r=l(Math.pow(i,8)),n=u;for(let e=0;e<t.length;e+=8){var s=Math.min(8,t.length-e);let a=parseInt(t.substring(e,e+s),i);s<8?(s=l(Math.pow(i,s)),n=n.j(s).add(l(a))):n=(n=n.j(r)).add(l(a))}return n},m=na.Integer=n}).apply(void 0!==ns?ns:"u">typeof self?self:"u">typeof window?window:{});var no="u">typeof globalThis?globalThis:"u">typeof window?window:e.g,nl={};(function(){var e,t,i=Object.defineProperty,r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof no&&no];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function n(e,t){if(t)e:{var n=r;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in n))break e;n=n[a]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}n("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),n("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),n("Object.entries",function(e){return e||function(e){var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push([t,e[t]]);return i}});var s=s||{},a=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,i){return e.call.apply(e.bind,arguments)}function u(e,t,i){return(u=l).apply(null,arguments)}function h(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function i(){}i.prototype=t.prototype,e.Z=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.Ob=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)}}var d="u">typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function f(e){let t=e.length;if(t>0){let i=Array(t);for(let r=0;r<t;r++)i[r]=e[r];return i}return[]}function p(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var i=typeof r;if("array"==(i="object"!=i?i:r?Array.isArray(r)?"array":i:"null")||"object"==i&&"number"==typeof r.length){i=e.length||0;let t=r.length||0;e.length=i+t;for(let n=0;n<t;n++)e[i+n]=r[n]}else e.push(r)}}var m=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new g,e=>e.reset());class g{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,_=!1,S=new class{constructor(){this.h=this.g=null}add(e,t){let i=m.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},C=()=>{let e=Promise.resolve(void 0);I=()=>{e.then(k)}};function k(){let e;for(var t;e=null,S.g&&(e=S.g,S.g=S.g.next,S.g||(S.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){a.setTimeout(()=>{throw e},0)}(e)}m.j(t),m.h<100&&(m.h++,t.next=m.g,m.g=t)}_=!1}function N(){this.u=this.u,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(e){}return e}();function D(e){return/^[\s\xa0]*$/.test(e)}function O(e,t){R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(O,R),O.prototype.init=function(e,t){let i=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==i?t=e.fromElement:"mouseout"==i&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),L=0;function j(e,t,i,r,n){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!r,this.ha=n,this.key=++L,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function F(e,t,i){for(let r in e)t.call(i,e[r],r,e)}function U(e){let t={};for(let i in e)t[i]=e[i];return t}let B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(e,t){let i,r;for(let t=1;t<arguments.length;t++){for(i in r=arguments[t])e[i]=r[i];for(let t=0;t<B.length;t++)i=B[t],Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}}function q(e){this.src=e,this.g={},this.h=0}function $(e,t){let i=t.type;if(i in e.g){var r,n=e.g[i],s=Array.prototype.indexOf.call(n,t,void 0);(r=s>=0)&&Array.prototype.splice.call(n,s,1),r&&(V(t),0==e.g[i].length&&(delete e.g[i],e.h--))}}function H(e,t,i,r){for(let n=0;n<e.length;++n){let s=e[n];if(!s.da&&s.listener==t&&!!i==s.capture&&s.ha==r)return n}return -1}q.prototype.add=function(e,t,i,r,n){let s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);let a=H(e,t,r,n);return a>-1?(t=e[a],i||(t.fa=!1)):((t=new j(t,this.src,s,!!r,n)).fa=i,e.push(t)),t};var K="closure_lm_"+(1e6*Math.random()|0),W={};function G(e,t,i,r,n,s){if(!t)throw Error("Invalid event type");let a=o(n)?!!n.capture:!!n,l=J(e);if(l||(e[K]=l=new q(e)),(i=l.add(t,i,r,a,s)).proxy)return i;if(r=function e(t){return X.call(e.src,e.listener,t)},i.proxy=r,r.src=e,r.listener=i,e.addEventListener)P||(n=a),void 0===n&&(n=!1),e.addEventListener(t.toString(),r,n);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Q(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])$(t.i,e);else{var i=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(i,r,e.capture):t.detachEvent?t.detachEvent(Y(i),r):t.addListener&&t.removeListener&&t.removeListener(r),(i=J(t))?($(i,e),0==i.h&&(i.src=null,t[K]=null)):V(e)}}}function Y(e){return e in W?W[e]:W[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new O(t,this);let i=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=i.call(r,t)}return e}function J(e){return(e=e[K])instanceof q?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(e){return"function"==typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function et(){N.call(this),this.i=new q(this),this.M=this,this.G=null}function ei(e,t){let i,r;var n,s=e.G;if(s)for(n=[];s;s=s.G)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var a=t;z(t=new R(s,e),a)}if(a=!0,n)for(r=n.length-1;r>=0;r--)a=er(i=t.g=n[r],s,!0,t)&&a;if(a=er(i=t.g=e,s,!0,t)&&a,a=er(i,s,!1,t)&&a,n)for(r=0;r<n.length;r++)a=er(i=t.g=n[r],s,!1,t)&&a}function er(e,t,i,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let n=!0;for(let s=0;s<t.length;++s){let a=t[s];if(a&&!a.da&&a.capture==i){let t=a.listener,i=a.ha||a.src;a.fa&&$(e.i,a),n=!1!==t.call(i,r)&&n}}return n&&!r.defaultPrevented}c(et,N),et.prototype[M]=!0,et.prototype.removeEventListener=function(e,t,i,r){!function e(t,i,r,n,s){if(Array.isArray(i))for(var a=0;a<i.length;a++)e(t,i[a],r,n,s);else(n=o(n)?!!n.capture:!!n,r=ee(r),t&&t[M])?(t=t.i,(a=String(i).toString())in t.g&&(r=H(i=t.g[a],r,n,s))>-1&&(V(i[r]),Array.prototype.splice.call(i,r,1),0==i.length&&(delete t.g[a],t.h--))):t&&(t=J(t))&&(i=t.g[i.toString()],t=-1,i&&(t=H(i,r,n,s)),(r=t>-1?i[t]:null)&&Q(r))}(this,e,t,i,r)},et.prototype.N=function(){if(et.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let i=e.g[t];for(let e=0;e<i.length;e++)V(i[e]);delete e.g[t],e.h--}}this.G=null},et.prototype.J=function(e,t,i,r){return this.i.add(String(e),t,!1,i,r)},et.prototype.K=function(e,t,i,r){return this.i.add(String(e),t,!0,i,r)};class en extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=function(e,t){if("function"!=typeof e)if(e&&"function"==typeof e.handleEvent)e=u(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>0x7fffffff?-1:a.setTimeout(e,t||0)}(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let i=t.h;t.h=null,t.m.apply(null,i)}(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(e){N.call(this),this.h=e,this.g={}}c(es,N);var ea=[];function eo(e){F(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}es.prototype.N=function(){es.Z.N.call(this),eo(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=a.JSON.stringify,eu=a.JSON.parse,eh=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ec(){}function ed(){}var ef={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ep(){R.call(this,"d")}function em(){R.call(this,"c")}c(ep,R),c(em,R);var eg={},ey=null;function ev(){return ey=ey||new et}function ew(e){R.call(this,eg.Ia,e)}function eb(e){let t=ev();ei(t,new ew(t))}function ex(e,t){R.call(this,eg.STAT_EVENT,e),this.stat=t}function eE(e){let t=ev();ei(t,new ex(t,e))}function eA(e,t){R.call(this,eg.Ja,e),this.size=t}function eT(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function eI(){this.g=!0}function e_(e,t,i,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{let s=JSON.parse(t);if(s){for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var i=s[e];if(!(i.length<2)){var r=i[1];if(Array.isArray(r)&&!(r.length<1)){var n=r[0];if("noop"!=n&&"stop"!=n&&"close"!=n)for(let e=1;e<r.length;e++)r[e]=""}}}}return el(s)}catch(e){return t}}(e,i)+(r?" "+r:"")})}eg.Ia="serverreachability",c(ew,R),eg.STAT_EVENT="statevent",c(ex,R),eg.Ja="timingevent",c(eA,R),eI.prototype.ua=function(){this.g=!1},eI.prototype.info=function(){};var eS={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function ek(){}function eN(e){return encodeURIComponent(String(e))}function eR(e,t,i,r){this.j=e,this.i=t,this.l=i,this.S=r||1,this.V=new es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eP}function eP(){this.i=null,this.g="",this.h=!1}c(ek,ec),ek.prototype.g=function(){return new XMLHttpRequest},e=new ek;var eD={},eO={};function eM(e,t,i){e.M=1,e.A=e4(e0(t)),e.u=i,e.R=!0,eL(e,null)}function eL(e,t){e.F=Date.now(),eV(e),e.B=e0(e.A);var i,r,n,s,a,l,h=e.B,c=e.S;Array.isArray(c)||(c=[String(c)]),tu(h.i,"t",c),e.C=0,h=e.j.L,e.h=new eP,e.g=tQ(e.j,h?t:null,!e.u),e.P>0&&(e.O=new en(u(e.Y,e,e.g),e.P)),t=e.V,h=e.g,c=e.ba;var d="readystatechange";Array.isArray(d)||(d&&(ea[0]=d.toString()),d=ea);for(let e=0;e<d.length;e++){let i=function e(t,i,r,n,s){if(n&&n.once)return function e(t,i,r,n,s){if(Array.isArray(i)){for(let a=0;a<i.length;a++)e(t,i[a],r,n,s);return null}return r=ee(r),t&&t[M]?t.K(i,r,o(n)?!!n.capture:!!n,s):G(t,i,r,!0,n,s)}(t,i,r,n,s);if(Array.isArray(i)){for(let a=0;a<i.length;a++)e(t,i[a],r,n,s);return null}return r=ee(r),t&&t[M]?t.J(i,r,o(n)?!!n.capture:!!n,s):G(t,i,r,!1,n,s)}(h,d[e],c||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.J?U(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),eb(),i=e.i,r=e.v,n=e.B,s=e.l,a=e.S,l=e.u,i.info(function(){if(i.g)if(l){var e="",t=l.split("&");for(let i=0;i<t.length;i++){var o=t[i].split("=");if(o.length>1){let t=o[0];o=o[1];let i=t.split("_");e=i.length>=2&&"type"==i[1]?e+(t+"=")+o+"&":e+(t+"=redacted&")}}}else e=null;else e=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+r+"\n"+n+"\n"+e})}function ej(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function eV(e){e.T=Date.now()+e.H,eF(e,e.H)}function eF(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=eT(u(e.aa,e),t)}function eU(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function eB(e){0==e.j.I||e.K||t$(e.j,e)}function ez(e){eU(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,eo(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function eq(e,t){try{var i=e.j;if(0!=i.I&&(i.g==e||eG(i.h,e))){if(!e.L&&eG(i.h,e)&&3==i.I){try{var r=i.Ba.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var n=r;if(0==n[0]){e:if(!i.v){if(i.g)if(i.g.F+3e3<e.F)tq(i),tD(i);else break e;tU(i),eE(18)}}else i.xa=n[1],0<i.xa-i.K&&n[2]<37500&&i.F&&0==i.A&&!i.C&&(i.C=eT(u(i.Va,i),6e3));1>=eW(i.h)&&i.ta&&(i.ta=void 0)}else tK(i,11)}else if((e.L||i.g==e)&&tq(i),!D(t))for(n=i.Ba.g.parse(t),t=0;t<n.length;t++){let o=n[t],l=o[0];if(!(l<=i.K))if(i.K=l,o=o[1],2==i.I)if("c"==o[0]){i.M=o[1],i.ba=o[2];let t=o[3];null!=t&&(i.ka=t,i.j.info("VER="+i.ka));let n=o[4];null!=n&&(i.za=n,i.j.info("SVER="+i.za));let l=o[5];null!=l&&"number"==typeof l&&l>0&&(i.O=r=1.5*l,i.j.info("backChannelRequestTimeoutMs_="+r)),r=i;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(eQ(s,s.h),s.h=null))}if(r.G){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,e3(r.J,r.G,e))}}if(i.I=3,i.l&&i.l.ra(),i.aa&&(i.T=Date.now()-e.F,i.j.info("Handshake RTT: "+i.T+"ms")),(r=i).na=tG(r,r.L?r.ba:null,r.W),e.L){eY(r.h,e);var a=r.O;a&&(e.H=a),e.D&&(eU(e),eV(e)),r.g=e}else tF(r);i.i.length>0&&tM(i)}else"stop"!=o[0]&&"close"!=o[0]||tK(i,7);else 3==i.I&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?tK(i,7):tP(i):"noop"!=o[0]&&i.l&&i.l.qa(o),i.A=0)}}eb(4)}catch(e){}}eR.prototype.ba=function(e){e=e.target;let t=this.O;t&&3==tC(e)?t.j():this.Y(e)},eR.prototype.Y=function(e){try{if(e==this.g)e:{let f=tC(this.g),p=this.g.ya(),m=this.g.ca();if(!(f<3)&&(3!=f||this.g&&(this.h.h||this.g.la()||tk(this.g)))){this.K||4!=f||7==p||(8==p||m<=0?eb(3):eb(2)),eU(this);var t=this.g.ca();this.X=t;var i=function(e){if(!ej(e))return e.g.la();let t=tk(e.g);if(""===t)return"";let i="",r=t.length,n=4==tC(e.g);if(!e.h.i){if("u"<typeof TextDecoder)return ez(e),eB(e),"";e.h.i=new a.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,i+=e.h.i.decode(t[s],{stream:!(n&&s==r-1)});return t.length=0,e.h.g+=i,e.C=0,e.h.g}(this);if(this.o=200==t,r=this.i,n=this.v,s=this.B,o=this.l,l=this.S,r.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+n+"\n"+s+"\n"+f+" "+t}),this.o){if(this.U&&!this.L){t:{if(this.g){var r,n,s,o,l,u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(u)){var c=u;break t}}c=null}if(e=c)e_(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eq(this,e);else{this.o=!1,this.m=3,eE(12),ez(this),eB(this);break e}}if(this.R){let t;for(e=!0;!this.K&&this.C<i.length;)if((t=function(e,t){var i=e.C,r=t.indexOf("\n",i);return -1==r?eO:isNaN(i=Number(t.substring(i,r)))?eD:(r+=1)+i>t.length?eO:(t=t.slice(r,r+i),e.C=r+i,t)}(this,i))==eO){4==f&&(this.m=4,eE(14),e=!1),e_(this.i,this.l,null,"[Incomplete Response]");break}else if(t==eD){this.m=4,eE(15),e_(this.i,this.l,i,"[Invalid Chunk]"),e=!1;break}else e_(this.i,this.l,t,null),eq(this,t);if(ej(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=i.length||this.h.h||(this.m=1,eE(16),e=!1),this.o=this.o&&e,e){if(i.length>0&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.aa&&!d.P&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),tB(d),d.P=!0,eE(11))}}else e_(this.i,this.l,i,"[Invalid Chunked Response]"),ez(this),eB(this)}else e_(this.i,this.l,i,null),eq(this,i);4==f&&ez(this),this.o&&!this.K&&(4==f?t$(this.j,this):(this.o=!1,eV(this)))}else(function(e){let t={};e=(e.g&&tC(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(D(e[r]))continue;var i=function(e){var t=1;e=e.split(":");let i=[];for(;t>0&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}(e[r]);let n=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();let s=t[n]||[];t[n]=s,s.push(i)}var r=function(e){return e.join(", ")};for(let e in t)r.call(void 0,t[e],e,t)})(this.g),400==t&&i.indexOf("Unknown SID")>0?(this.m=3,eE(12)):(this.m=0,eE(13)),ez(this),eB(this)}}}catch(e){}finally{}},eR.prototype.cancel=function(){this.K=!0,ez(this)},eR.prototype.aa=function(){var e,t;this.D=null;let i=Date.now();i-this.T>=0?(e=this.i,t=this.B,e.info(function(){return"TIMEOUT: "+t}),2!=this.M&&(eb(),eE(17)),ez(this),this.m=2,eB(this)):eF(this,this.T-i)};var e$=class{constructor(e,t){this.g=e,this.map=t}};function eH(e){this.l=e||10,e=a.PerformanceNavigationTiming?(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eK(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eW(e){return e.h?1:e.g?e.g.size:0}function eG(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eQ(e,t){e.g?e.g.add(t):e.h=t}function eY(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eX(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let i of e.g.values())t=t.concat(i.G);return t}return f(e.i)}eH.prototype.cancel=function(){if(this.i=eX(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eJ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof eZ?(this.l=e.l,e1(this,e.j),this.o=e.o,this.g=e.g,e2(this,e.u),this.h=e.h,e6(this,th(e.i)),this.m=e.m):e&&(t=String(e).match(eJ))?(this.l=!1,e1(this,t[1]||"",!0),this.o=e5(t[2]||""),this.g=e5(t[3]||"",!0),e2(this,t[4]),this.h=e5(t[5]||"",!0),e6(this,t[6]||"",!0),this.m=e5(t[7]||"")):(this.l=!1,this.i=new tn(null,this.l))}function e0(e){return new eZ(e)}function e1(e,t,i){e.j=i?e5(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e2(e,t){if(t){if(isNaN(t=Number(t))||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function e6(e,t,i){var r,n;t instanceof tn?(e.i=t,r=e.i,(n=e.l)&&!r.j&&(ts(r),r.i=null,r.g.forEach(function(e,t){let i=t.toLowerCase();t!=i&&(ta(this,t),tu(this,i,e))},r)),r.j=n):(i||(t=e8(t,ti)),e.i=new tn(t,e.l))}function e3(e,t,i){e.i.set(t,i)}function e4(e){return e3(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function e5(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e8(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,e7),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function e7(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eZ.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(e8(t,e9,!0),":");var i=this.g;return(i||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(e8(t,e9,!0),"@"),e.push(eN(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.u)&&e.push(":",String(i))),(i=this.h)&&(this.g&&"/"!=i.charAt(0)&&e.push("/"),e.push(e8(i,"/"==i.charAt(0)?tt:te,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.m)&&e.push("#",e8(i,tr)),e.join("")},eZ.prototype.resolve=function(e){let t=e0(this),i=!!e.j;i?e1(t,e.j):i=!!e.o,i?t.o=e.o:i=!!e.g,i?t.g=e.g:i=null!=e.u;var r=e.h;if(i)e2(t,e.u);else if(i=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var n=t.h.lastIndexOf("/");-1!=n&&(r=t.h.slice(0,n+1)+r)}if(".."==(n=r)||"."==n)r="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){r=0==n.lastIndexOf("/",0),n=n.split("/");let e=[];for(let t=0;t<n.length;){let i=n[t++];"."==i?r&&t==n.length&&e.push(""):".."==i?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==n.length&&e.push("")):(e.push(i),r=!0)}r=e.join("/")}else r=n}return i?t.h=r:i=""!==e.i.toString(),i?e6(t,th(e.i)):i=!!e.m,i&&(t.m=e.m),t};var e9=/[#\/\?@]/g,te=/[#\?:]/g,tt=/[#\?]/g,ti=/[#\?@]/g,tr=/#/g;function tn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ts(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let i=0;i<e.length;i++){let r=e[i].indexOf("="),n,s=null;r>=0?(n=e[i].substring(0,r),s=e[i].substring(r+1)):n=e[i],t(n,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}function ta(e,t){ts(e),t=tc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function to(e,t){return ts(e),t=tc(e,t),e.g.has(t)}function tl(e,t){ts(e);let i=[];if("string"==typeof t)to(e,t)&&(i=i.concat(e.g.get(tc(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)i=i.concat(e[t]);return i}function tu(e,t,i){ta(e,t),i.length>0&&(e.i=null,e.g.set(tc(e,t),f(i)),e.h+=i.length)}function th(e){let t=new tn;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function tc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function td(e,t,i,r,n){try{n&&(n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null),r(i)}catch(e){}}function tf(){this.g=new eh}function tp(e){this.i=e.Sb||null,this.h=e.ab||!1}function tm(e,t){et.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function tg(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function ty(e){e.readyState=4,e.l=null,e.j=null,e.B=null,tv(e)}function tv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tw(e){let t="";return F(e,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function tb(e,t,i){e:{for(r in i){var r=!1;break e}r=!0}r||(i=tw(i),"string"==typeof e?null!=i&&eN(i):e3(e,t,i))}function tx(e){et.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=tn.prototype).add=function(e,t){ts(this),this.i=null,e=tc(this,e);let i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this},t.forEach=function(e,t){ts(this),this.g.forEach(function(i,r){i.forEach(function(i){e.call(t,i,r,this)},this)},this)},t.set=function(e,t){return ts(this),this.i=null,to(this,e=tc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=tl(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var i=t[r];let n=eN(i);i=tl(this,i);for(let t=0;t<i.length;t++){let r=n;""!==i[t]&&(r+="="+eN(i[t])),e.push(r)}}return this.i=e.join("&")},c(tp,ec),tp.prototype.g=function(){return new tm(this.i,this.h)},c(tm,et),(t=tm.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,tv(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,ty(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tv(this)),this.g&&(this.readyState=3,tv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tg(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ty(this):tv(this),3==this.readyState&&tg(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,ty(this))},t.Na=function(e){this.g&&(this.response=e,ty(this))},t.ga=function(){this.g&&ty(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var i=t.next();!i.done;)e.push((i=i.value)[0]+": "+i[1]),i=t.next();return e.join("\r\n")},Object.defineProperty(tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(tx,et);var tE=/^https?$/i,tA=["POST","PUT"];function tT(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,tI(e),tS(e)}function tI(e){e.A||(e.A=!0,ei(e,"complete"),ei(e,"error"))}function t_(e){if(e.h&&void 0!==s){if(e.v&&4==tC(e))setTimeout(e.Ca.bind(e),0);else if(ei(e,"readystatechange"),4==tC(e)){e.h=!1;try{let s=e.ca();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,i,r=!0;break;default:r=!1}if(!(t=r)){if(i=0===s){let t=String(e.D).match(eJ)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),i=!tE.test(t?t.toLowerCase():"")}t=i}if(t)ei(e,"complete"),ei(e,"success");else{e.o=6;try{var n=tC(e)>2?e.g.statusText:""}catch(e){n=""}e.l=n+" ["+e.ca()+"]",tI(e)}}finally{tS(e)}}}}function tS(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);let i=e.g;e.g=null,t||ei(e,"ready");try{i.onreadystatechange=null}catch(e){}}}function tC(e){return e.g?e.g.readyState:0}function tk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tN(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function tR(e){this.za=0,this.i=[],this.j=new eI,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tN("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tN("baseRetryDelayMs",5e3,e),this.Za=tN("retryDelaySeedMs",1e4,e),this.Ta=tN("forwardChannelMaxRetries",2,e),this.va=tN("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new eH(e&&e.concurrentRequestLimit),this.Ba=new tf,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function tP(e){if(tO(e),3==e.I){var t=e.V++,i=e0(e.J);if(e3(i,"SID",e.M),e3(i,"RID",t),e3(i,"TYPE","terminate"),tj(e,i),(t=new eR(e,e.j,t)).M=2,t.A=e4(e0(i)),i=!1,a.navigator&&a.navigator.sendBeacon)try{i=a.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!i&&a.Image&&((new Image).src=t.A,i=!0),i||(t.g=tQ(t.j,null),t.g.ea(t.A)),t.F=Date.now(),eV(t)}tW(e)}function tD(e){e.g&&(tB(e),e.g.cancel(),e.g=null)}function tO(e){tD(e),e.v&&(a.clearTimeout(e.v),e.v=null),tq(e),e.h.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function tM(e){if(!eK(e.h)&&!e.m){e.m=!0;var t=e.Ea;I||C(),_||(I(),_=!0),S.add(t,e),e.D=0}}function tL(e,t){var i;i=t?t.l:e.V++;let r=e0(e.J);e3(r,"SID",e.M),e3(r,"RID",i),e3(r,"AID",e.K),tj(e,r),e.u&&e.o&&tb(r,e.u,e.o),i=new eR(e,e.j,i,e.D+1),null===e.u&&(i.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tV(e,i,1e3),i.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),eQ(e.h,i),eM(i,r,t)}function tj(e,t){e.H&&F(e.H,function(e,i){e3(t,i,e)}),e.l&&F({},function(e,i){e3(t,i,e)})}function tV(e,t,i){i=Math.min(e.i.length,i);let r=e.l?u(e.l.Ka,e.l,e):null;e:{var n=e.i;let t=-1;for(;;){let e=["count="+i];-1==t?i>0?(t=n[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<i;u++){var s=n[u].g;let i=n[u].map;if((s-=t)<0)t=Math.max(0,n[u].g-100),l=!1;else try{s="req"+s+"_";try{var a=i instanceof Map?i:Object.entries(i);for(let[t,i]of a){let r=i;o(i)&&(r=el(i)),e.push(s+t+"="+encodeURIComponent(r))}}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}catch(e){r&&r(i)}}if(l){a=e.join("&");break e}}a=void 0}return t.G=e=e.i.splice(0,i),a}function tF(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;I||C(),_||(I(),_=!0),S.add(t,e),e.A=0}}function tU(e){return!e.g&&!e.v&&!(e.A>=3)&&(e.Y++,e.v=eT(u(e.Da,e),tH(e,e.A)),e.A++,!0)}function tB(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function tz(e){e.g=new eR(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=e0(e.na);e3(t,"RID","rpc"),e3(t,"SID",e.M),e3(t,"AID",e.K),e3(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&e3(t,"TO",e.ia),e3(t,"TYPE","xmlhttp"),tj(e,t),e.u&&e.o&&tb(t,e.u,e.o),e.O&&(e.g.H=e.O);var i=e.g;e=e.ba,i.M=1,i.A=e4(e0(t)),i.u=null,i.R=!0,eL(i,e)}function tq(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function t$(e,t){var i,r=null;if(e.g==t){tq(e),tB(e),e.g=null;var n=2}else{if(!eG(e.h,t))return;r=t.G,eY(e.h,t),n=1}if(0!=e.I){if(t.o)if(1==n){r=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;ei(n=ev(),new eA(n,r)),tM(e)}else tF(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==n&&(i=t,!(eW(e.h)>=e.h.j-!!e.m)&&(e.m?(e.i=i.G.concat(e.i),!0):1!=e.I&&2!=e.I&&!(e.D>=(e.Sa?0:e.Ta))&&(e.m=eT(u(e.Ea,e,i),tH(e,e.D)),e.D++,!0)))||2==n&&tU(e)))switch(r&&r.length>0&&((t=e.h).i=t.i.concat(r)),s){case 1:tK(e,5);break;case 4:tK(e,10);break;case 3:tK(e,6);break;default:tK(e,2)}}}function tH(e,t){let i=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(i*=2),i*t}function tK(e,t){if(e.j.info("Error code "+t),2==t){let t,s,o;var i,r=u(e.bb,e),n=e.Ua;let l=!n;n=new eZ(n||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e1(n,"https"),e4(n),l?function(e,t){let i=new eI;if(a.Image){let r=new Image;r.onload=h(td,i,"TestLoadImage: loaded",!0,t,r),r.onerror=h(td,i,"TestLoadImage: error",!1,t,r),r.onabort=h(td,i,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(td,i,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r):(i=n.toString(),t=new eI,s=new AbortController,o=setTimeout(()=>{s.abort(),td(t,"TestPingServer: timeout",!1,r)},1e4),fetch(i,{signal:s.signal}).then(e=>{clearTimeout(o),e.ok?td(t,"TestPingServer: ok",!0,r):td(t,"TestPingServer: server error",!1,r)}).catch(()=>{clearTimeout(o),td(t,"TestPingServer: error",!1,r)}))}else eE(2);e.I=0,e.l&&e.l.pa(t),tW(e),tO(e)}function tW(e){if(e.I=0,e.ja=[],e.l){let t=eX(e.h);(0!=t.length||0!=e.i.length)&&(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,f(e.i),e.i.length=0),e.l.oa()}}function tG(e,t,i){var r=i instanceof eZ?e0(i):new eZ(i);if(""!=r.g)t&&(r.g=t+"."+r.g),e2(r,r.u);else{var n=a.location;r=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;let e=new eZ(null);r&&e1(e,r),t&&(e.g=t),n&&e2(e,n),i&&(e.h=i),r=e}return i=e.G,t=e.wa,i&&t&&e3(r,i,t),e3(r,"VER",e.ka),tj(e,r),r}function tQ(e,t,i){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tx(e.Aa&&!e.ma?new tp({ab:i}):e.ma)).Fa(e.L),t}function tY(){}function tX(){}function tJ(e,t){et.call(this),this.g=new tR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!D(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!D(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t1(this)}function tZ(e){ep.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let i in t){e=i;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t0(){em.call(this),this.status=1}function t1(e){this.g=e}(t=tx.prototype).Fa=function(e){this.H=e},t.ea=function(t,i,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);i=i?i.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():e.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(i,String(t),!0),this.B=!1}catch(e){tT(this,e);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)r.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n));for(let[e,o]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&t instanceof a.FormData,!(Array.prototype.indexOf.call(tA,i,void 0)>=0)||n||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(e,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(e){tT(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ei(this,"complete"),ei(this,"abort"),tS(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tS(this,!0)),tx.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?t_(this):this.Xa())},t.Xa=function(){t_(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return tC(this)>2?this.g.status:-1}catch(e){return -1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eu(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=tR.prototype).ka=8,t.I=1,t.connect=function(e,t,i,r){eE(0),this.W=e,this.H=t||{},i&&void 0!==r&&(this.H.OSID=i,this.H.OAID=r),this.F=this.X,this.J=tG(this,null,this.W),tM(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;let n=new eR(this,this.j,e),s=this.o;if(this.U&&(s?z(s=U(s),this.U):s=this.U),null!==this.u||this.R||(n.J=s,s=null),this.S)e:{for(var t=0,i=0;i<this.i.length;i++){t:{var r=this.i[i];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if((t+=r)>4096){t=i;break e}if(4096===t||i===this.i.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=tV(this,n,t),e3(i=e0(this.J),"RID",e),e3(i,"CVER",22),this.G&&e3(i,"X-HTTP-Session-Id",this.G),tj(this,i),s&&(this.R?t="headers="+eN(tw(s))+"&"+t:this.u&&tb(i,this.u,s)),eQ(this.h,n),this.Ra&&e3(i,"TYPE","init"),this.S?(e3(i,"$req",t),e3(i,"SID","null"),n.U=!0,eM(n,i,null)):eM(n,i,t),this.I=2}}else 3==this.I&&(e?tL(this,e):0==this.i.length||eK(this.h)||tL(this))},t.Da=function(){if(this.v=null,tz(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=eT(u(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,eE(10),tD(this),tz(this))},t.Va=function(){null!=this.C&&(this.C=null,tD(this),tU(this),eE(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),eE(2)):(this.j.info("Failed to ping google.com"),eE(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=tY.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},tX.prototype.g=function(e,t){return new tJ(e,t)},c(tJ,et),tJ.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tJ.prototype.close=function(){tP(this.g)},tJ.prototype.o=function(e){var t=this.g;if("string"==typeof e){var i={};i.__data__=e,e=i}else this.v&&((i={}).__data__=el(e),e=i);t.i.push(new e$(t.Ya++,e)),3==t.I&&tM(t)},tJ.prototype.N=function(){this.g.l=null,delete this.j,tP(this.g),delete this.g,tJ.Z.N.call(this)},c(tZ,ep),c(t0,em),c(t1,tY),t1.prototype.ra=function(){ei(this.g,"a")},t1.prototype.qa=function(e){ei(this.g,new tZ(e))},t1.prototype.pa=function(e){ei(this.g,new t0)},t1.prototype.oa=function(){ei(this.g,"b")},tX.prototype.createWebChannel=tX.prototype.g,tJ.prototype.send=tJ.prototype.o,tJ.prototype.open=tJ.prototype.m,tJ.prototype.close=tJ.prototype.close,T=nl.createWebChannelTransport=function(){return new tX},A=nl.getStatEventTarget=function(){return ev()},E=nl.Event=eg,x=nl.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eS.NO_ERROR=0,eS.TIMEOUT=8,eS.HTTP_ERROR=6,b=nl.ErrorCode=eS,eC.COMPLETE="complete",w=nl.EventType=eC,ed.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",et.prototype.listen=et.prototype.J,v=nl.WebChannel=ed,nl.FetchXmlHttpFactory=tp,tx.prototype.listenOnce=tx.prototype.K,tx.prototype.getLastError=tx.prototype.Ha,tx.prototype.getLastErrorCode=tx.prototype.ya,tx.prototype.getStatus=tx.prototype.ca,tx.prototype.getResponseJson=tx.prototype.La,tx.prototype.getResponseText=tx.prototype.la,tx.prototype.send=tx.prototype.ea,tx.prototype.setWithCredentials=tx.prototype.Fa,y=nl.XhrIo=tx}).apply(void 0!==no?no:"u">typeof self?self:"u">typeof window?window:{});let nu="@firebase/firestore",nh="4.9.3";class nc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nc.UNAUTHENTICATED=new nc(null),nc.GOOGLE_CREDENTIALS=new nc("google-credentials-uid"),nc.FIRST_PARTY=new nc("first-party-uid"),nc.MOCK_USER=new nc("mock-user");let nd="12.7.0",nf=new ex("@firebase/firestore");function np(){return nf.logLevel}function nm(e,...t){if(nf.logLevel<=p.DEBUG){let i=t.map(nv);nf.debug(`Firestore (${nd}): ${e}`,...i)}}function ng(e,...t){if(nf.logLevel<=p.ERROR){let i=t.map(nv);nf.error(`Firestore (${nd}): ${e}`,...i)}}function ny(e,...t){if(nf.logLevel<=p.WARN){let i=t.map(nv);nf.warn(`Firestore (${nd}): ${e}`,...i)}}function nv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function nw(e,t,i){let r="Unexpected state";"string"==typeof t?r=t:i=t,nb(e,r,i)}function nb(e,t,i){let r=`FIRESTORE (${nd}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==i)try{r+=" CONTEXT: "+JSON.stringify(i)}catch(e){r+=" CONTEXT: "+i}throw ng(r),Error(r)}function nx(e,t,i,r){let n="Unexpected state";"string"==typeof i?n=i:r=i,e||nb(t,n,r)}let nE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nA extends ee{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nT{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nc.UNAUTHENTICATED))}shutdown(){}}class nS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=nc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nx(void 0===this.o,42304);let i=this.i,r=e=>this.i!==i?(i=this.i,t(e)):Promise.resolve(),n=new nT;this.o=()=>{this.i++,this.currentUser=this.u(),n.resolve(),n=new nT,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let t=n;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{nm("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?a(e):(nm("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new nT)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(nm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(nx("string"==typeof t.accessToken,31837,{l:t}),new nI(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return nx(null===e||"string"==typeof e,2055,{h:e}),new nc(e)}}class nk{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new nk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(nc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eX(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nx(void 0===this.o,3512);let i=e=>{null!=e.error&&nm("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let i=e.token!==this.m;return this.m=e.token,nm("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>i(t))};let r=e=>{nm("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):nm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nR(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(nx("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new nR(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class nD{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let i=function(e){let t="u">typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let e=0;e<40;e++)i[e]=Math.floor(256*Math.random());return i}(0);for(let r=0;r<i.length;++r)t.length<20&&i[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[r]%62))}return t}}function nO(e,t){return e<t?-1:+(e>t)}function nM(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=e.charAt(r),n=t.charAt(r);if(i!==n)return nL(i)===nL(n)?nO(i,n):nL(i)?1:-1}return nO(e.length,t.length)}function nL(e){let t=e.charCodeAt(0);return t>=55296&&t<=57343}function nj(e,t,i){return e.length===t.length&&e.every((e,r)=>i(e,t[r]))}let nV="__name__";class nF{constructor(e,t,i){void 0===t?t=0:t>e.length&&nw(637,{offset:t,range:e.length}),void 0===i?i=e.length-t:i>e.length-t&&nw(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===nF.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof nF?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=nF.compareSegments(e.get(r),t.get(r));if(0!==i)return i}return nO(e.length,t.length)}static compareSegments(e,t){let i=nF.isNumericId(e),r=nF.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?nF.extractNumericId(e).compare(nF.extractNumericId(t)):nM(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return m.fromString(e.substring(4,e.length-2))}}class nU extends nF{construct(e,t,i){return new nU(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new nA(nE.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(e=>e.length>0))}return new nU(t)}static emptyPath(){return new nU([])}}let nB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nz extends nF{construct(e,t,i){return new nz(e,t,i)}static isValidIdentifier(e){return nB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nz.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===nV}static keyField(){return new nz([nV])}static fromServerFormat(e){let t=[],i="",r=0,n=()=>{if(0===i.length)throw new nA(nE.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let t=e[r];if("\\"===t){if(r+1===e.length)throw new nA(nE.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nA(nE.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=t,r+=2}else"`"===t?s=!s:"."!==t||s?i+=t:n(),r++}if(n(),s)throw new nA(nE.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nz(t)}static emptyPath(){return new nz([])}}class nq{constructor(e){this.path=e}static fromPath(e){return new nq(nU.fromString(e))}static fromName(e){return new nq(nU.fromString(e).popFirst(5))}static empty(){return new nq(nU.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nU.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nU.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nq(new nU(e.slice()))}}function n$(e,t,i){if(!i)throw new nA(nE.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function nH(e){if(!nq.isDocumentKey(e))throw new nA(nE.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function nK(e){if(nq.isDocumentKey(e))throw new nA(nE.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function nW(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function nG(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let i=(t=e).constructor?t.constructor.name:null;return i?`a custom ${i} object`:"an object"}}return"function"==typeof e?"a function":nw(12329,{type:typeof e})}function nQ(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nA(nE.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=nG(e);throw new nA(nE.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}function nY(e,t){let i={typeString:e};return t&&(i.value=t),i}function nX(e,t){let i;if(!nW(e))throw new nA(nE.INVALID_ARGUMENT,"JSON must be an object");for(let r in t)if(t[r]){let n=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){i=`JSON missing required field: '${r}'`;break}let a=e[r];if(n&&typeof a!==n){i=`JSON field '${r}' must be a ${n}.`;break}if(void 0!==s&&a!==s.value){i=`Expected '${r}' field to equal '${s.value}'`;break}}if(i)throw new nA(nE.INVALID_ARGUMENT,i);return!0}class nJ{static now(){return nJ.fromMillis(Date.now())}static fromDate(e){return nJ.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*1e6);return new nJ(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new nA(nE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new nA(nE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nO(this.nanoseconds,e.nanoseconds):nO(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nJ._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nX(e,nJ._jsonSchema))return new nJ(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nJ._jsonSchemaVersion="firestore/timestamp/1.0",nJ._jsonSchema={type:nY("string",nJ._jsonSchemaVersion),seconds:nY("number"),nanoseconds:nY("number")};class nZ{static fromTimestamp(e){return new nZ(e)}static min(){return new nZ(new nJ(0,0))}static max(){return new nZ(new nJ(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class n0{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n0(nZ.min(),nq.empty(),-1)}static max(){return new n0(nZ.max(),nq.empty(),-1)}}class n1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function n2(e){if(e.code!==nE.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;nm("LocalStore","Unexpectedly lost primary lease")}class n6{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nw(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n6((i,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(i,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n6?t:n6.resolve(t)}catch(e){return n6.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n6.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n6.reject(t)}static resolve(e){return new n6((t,i)=>{t(e)})}static reject(e){return new n6((t,i)=>{i(e)})}static waitFor(e){return new n6((t,i)=>{let r=0,n=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++n,s&&n===r&&t()},e=>i(e))}),s=!0,n===r&&t()})}static or(e){let t=n6.resolve(!1);for(let i of e)t=t.next(e=>e?n6.resolve(e):i());return t}static forEach(e,t){let i=[];return e.forEach((e,r)=>{i.push(t.call(this,e,r))}),this.waitFor(i)}static mapArray(e,t){return new n6((i,r)=>{let n=e.length,s=Array(n),a=0;for(let o=0;o<n;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===n&&i(s)},e=>r(e))}})}static doWhile(e,t){return new n6((i,r)=>{let n=()=>{!0===e()?t().next(()=>{n()},r):i()};n()})}}function n3(e){return"IndexedDbTransactionError"===e.name}class n4{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}}n4.ce=-1;function n5(e){return 0===e&&1/e==-1/0}function n8(e){let t=0;for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function n7(e,t){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function n9(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class se{constructor(e,t){this.comparator=e,this.root=t||si.EMPTY}insert(e,t){return new se(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,si.BLACK,null,null))}remove(e){return new se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new st(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new st(this.root,e,this.comparator,!1)}getReverseIterator(){return new st(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new st(this.root,e,this.comparator,!0)}}class st{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?i(e.key,t):1,t&&r&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else{if(0===n){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class si{constructor(e,t,i,r,n){this.key=e,this.value=t,this.color=null!=i?i:si.RED,this.left=null!=r?r:si.EMPTY,this.right=null!=n?n:si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,n){return new si(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,n=i(e,r.key);return(r=n<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===n?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i))).fixUp()}removeMin(){if(this.left.isEmpty())return si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let i,r=this;if(0>t(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return si.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw nw(43730,{key:this.key,value:this.value});if(this.right.isRed())throw nw(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw nw(27949);return e+ +!this.isRed()}}si.EMPTY=null,si.RED=!0,si.BLACK=!1,si.EMPTY=new class{constructor(){this.size=0}get key(){throw nw(57766)}get value(){throw nw(16141)}get color(){throw nw(16727)}get left(){throw nw(29726)}get right(){throw nw(36894)}copy(e,t,i,r,n){return this}insert(e,t,i){return new si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sr{constructor(e){this.comparator=e,this.data=new se(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sn(this.data.getIterator())}getIteratorFrom(e){return new sn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof sr)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new sr(this.comparator);return t.data=e,t}}class sn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ss{constructor(e){this.fields=e,e.sort(nz.comparator)}static empty(){return new ss([])}unionWith(e){let t=new sr(nz.comparator);for(let e of this.fields)t=t.add(e);for(let i of e)t=t.add(i);return new ss(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nj(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class sa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class so{constructor(e){this.binaryString=e}static fromBase64String(e){return new so(function(e){try{return atob(e)}catch(e){throw"u">typeof DOMException&&e instanceof DOMException?new sa("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new so(function(e){let t="";for(let i=0;i<e.length;++i)t+=String.fromCharCode(e[i]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nO(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}so.EMPTY_BYTE_STRING=new so("");let sl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(e){if(nx(!!e,39018),"string"==typeof e){let t=0,i=sl.exec(e);if(nx(!!i,46558,{timestamp:e}),i[1]){let e=i[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:sh(e.seconds),nanos:sh(e.nanos)}}function sh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function sc(e){return"string"==typeof e?so.fromBase64String(e):so.fromUint8Array(e)}let sd="server_timestamp",sf="__type__",sp="__previous_value__",sm="__local_write_time__";function sg(e){return(e?.mapValue?.fields||{})[sf]?.stringValue===sd}function sy(e){let t=e.mapValue.fields[sp];return sg(t)?sy(t):t}function sv(e){let t=su(e.mapValue.fields[sm].timestampValue);return new nJ(t.seconds,t.nanos)}class sw{constructor(e,t,i,r,n,s,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=n,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}let sb="(default)";class sx{constructor(e,t){this.projectId=e,this.database=t||sb}static empty(){return new sx("","")}get isDefaultDatabase(){return this.database===sb}isEqual(e){return e instanceof sx&&e.projectId===this.projectId&&e.database===this.database}}let sE="__type__",sA="__max__",sT={},sI="__vector__",s_="value";function sS(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sg(e)?4:sz(e)?0x1fffffffffffff:sU(e)?10:11:nw(28295,{value:e})}function sC(e,t){if(e===t)return!0;let i=sS(e);if(i!==sS(t))return!1;switch(i){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return sv(e).isEqual(sv(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=su(e.timestampValue),n=su(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos;case 5:return e.stringValue===t.stringValue;case 6:return sc(e.bytesValue).isEqual(sc(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return sh(e.geoPointValue.latitude)===sh(t.geoPointValue.latitude)&&sh(e.geoPointValue.longitude)===sh(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return sh(e.integerValue)===sh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let i=sh(e.doubleValue),r=sh(t.doubleValue);return i===r?n5(i)===n5(r):isNaN(i)&&isNaN(r)}return!1;case 9:return nj(e.arrayValue.values||[],t.arrayValue.values||[],sC);case 10:case 11:let s=e.mapValue.fields||{},a=t.mapValue.fields||{};if(n8(s)!==n8(a))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===a[e]||!sC(s[e],a[e])))return!1;return!0;default:return nw(52216,{left:e})}}function sk(e,t){return void 0!==(e.values||[]).find(e=>sC(e,t))}function sN(e,t){var i,r,n,s,a,o;if(e===t)return 0;let l=sS(e),u=sS(t);if(l!==u)return nO(l,u);switch(l){case 0:case 0x1fffffffffffff:return 0;case 1:return nO(e.booleanValue,t.booleanValue);case 2:let h,c;return h=sh(e.integerValue||e.doubleValue),h<(c=sh(t.integerValue||t.doubleValue))?-1:h>c?1:h===c?0:isNaN(h)?isNaN(c)?0:-1:1;case 3:return sR(e.timestampValue,t.timestampValue);case 4:return sR(sv(e),sv(t));case 5:return nM(e.stringValue,t.stringValue);case 6:let d,f;return i=e.bytesValue,r=t.bytesValue,d=sc(i),f=sc(r),d.compareTo(f);case 7:return function(e,t){let i=e.split("/"),r=t.split("/");for(let e=0;e<i.length&&e<r.length;e++){let t=nO(i[e],r[e]);if(0!==t)return t}return nO(i.length,r.length)}(e.referenceValue,t.referenceValue);case 8:let p;return n=e.geoPointValue,s=t.geoPointValue,0!==(p=nO(sh(n.latitude),sh(s.latitude)))?p:nO(sh(n.longitude),sh(s.longitude));case 9:return sP(e.arrayValue,t.arrayValue);case 10:let m,g,y,v,w;return a=e.mapValue,o=t.mapValue,m=a.fields||{},g=o.fields||{},y=m[s_]?.arrayValue,v=g[s_]?.arrayValue,0!==(w=nO(y?.values?.length||0,v?.values?.length||0))?w:sP(y,v);case 11:return function(e,t){if(e===sT&&t===sT)return 0;if(e===sT)return 1;if(t===sT)return -1;let i=e.fields||{},r=Object.keys(i),n=t.fields||{},s=Object.keys(n);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){let t=nM(r[e],s[e]);if(0!==t)return t;let a=sN(i[r[e]],n[s[e]]);if(0!==a)return a}return nO(r.length,s.length)}(e.mapValue,t.mapValue);default:throw nw(23264,{he:l})}}function sR(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nO(e,t);let i=su(e),r=su(t),n=nO(i.seconds,r.seconds);return 0!==n?n:nO(i.nanos,r.nanos)}function sP(e,t){let i=e.values||[],r=t.values||[];for(let e=0;e<i.length&&e<r.length;++e){let t=sN(i[e],r[e]);if(t)return t}return nO(i.length,r.length)}function sD(e){var t,i;let r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=su(e.timestampValue),`time(${r.seconds},${r.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?sc(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,nq.fromName(t).toString()):"geoPointValue"in e?(i=e.geoPointValue,`geo(${i.latitude},${i.longitude})`):"arrayValue"in e?function(e){let t="[",i=!0;for(let r of e.values||[])i?i=!1:t+=",",t+=sD(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),i="{",r=!0;for(let n of t)r?r=!1:i+=",",i+=`${n}:${sD(e.fields[n])}`;return i+"}"}(e.mapValue):nw(61005,{value:e})}function sO(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sM(e){return!!e&&"integerValue"in e}function sL(e){return!!e&&"arrayValue"in e}function sj(e){return!!e&&"nullValue"in e}function sV(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sF(e){return!!e&&"mapValue"in e}function sU(e){return(e?.mapValue?.fields||{})[sE]?.stringValue===sI}function sB(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return n7(e.mapValue.fields,(e,i)=>t.mapValue.fields[e]=sB(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=sB(e.arrayValue.values[i]);return t}return{...e}}function sz(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===sA}class sq{constructor(e){this.value=e}static empty(){return new sq({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(!sF(t=(t.mapValue.fields||{})[e.get(i)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sB(t)}setAll(e){let t=nz.emptyPath(),i={},r=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){let e=this.getFieldsMap(t);this.applyChanges(e,i,r),i={},r=[],t=n.popLast()}e?i[n.lastSegment()]=sB(e):r.push(n.lastSegment())});let n=this.getFieldsMap(t);this.applyChanges(n,i,r)}delete(e){let t=this.field(e.popLast());sF(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sC(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];sF(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){for(let r of(n7(t,(t,i)=>e[t]=i),i))delete e[r]}clone(){return new sq(sB(this.value))}}class s${constructor(e,t,i,r,n,s,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=n,this.data=s,this.documentState=a}static newInvalidDocument(e){return new s$(e,0,nZ.min(),nZ.min(),nZ.min(),sq.empty(),0)}static newFoundDocument(e,t,i,r){return new s$(e,1,t,nZ.min(),i,r,0)}static newNoDocument(e,t){return new s$(e,2,t,nZ.min(),nZ.min(),sq.empty(),0)}static newUnknownDocument(e,t){return new s$(e,3,t,nZ.min(),nZ.min(),sq.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(nZ.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sq.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sq.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nZ.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof s$&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new s$(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sH{constructor(e,t){this.position=e,this.inclusive=t}}function sK(e,t,i){let r=0;for(let n=0;n<e.position.length;n++){let s=t[n],a=e.position[n];if(r=s.field.isKeyField()?nq.comparator(nq.fromName(a.referenceValue),i.key):sN(a,i.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function sW(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!sC(e.position[i],t.position[i]))return!1;return!0}class sG{constructor(e,t="asc"){this.field=e,this.dir=t}}class sQ{}class sY extends sQ{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new s0(e,t,i):"array-contains"===t?new s3(e,i):"in"===t?new s4(e,i):"not-in"===t?new s5(e,i):"array-contains-any"===t?new s8(e,i):new sY(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new s1(e,i):new s2(e,i)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(sN(t,this.value)):null!==t&&sS(this.value)===sS(t)&&this.matchesComparison(sN(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nw(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sX extends sQ{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sX(e,t)}matches(e){return sJ(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sJ(e){return"and"===e.op}function sZ(e){for(let t of e.filters)if(t instanceof sX)return!1;return!0}class s0 extends sY{constructor(e,t,i){super(e,t,i),this.key=nq.fromName(i.referenceValue)}matches(e){let t=nq.comparator(e.key,this.key);return this.matchesComparison(t)}}class s1 extends sY{constructor(e,t){super(e,"in",t),this.keys=s6("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class s2 extends sY{constructor(e,t){super(e,"not-in",t),this.keys=s6("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function s6(e,t){return(t.arrayValue?.values||[]).map(e=>nq.fromName(e.referenceValue))}class s3 extends sY{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sL(t)&&sk(t.arrayValue,this.value)}}class s4 extends sY{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&sk(this.value.arrayValue,t)}}class s5 extends sY{constructor(e,t){super(e,"not-in",t)}matches(e){if(sk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!sk(this.value.arrayValue,t)}}class s8 extends sY{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sL(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sk(this.value.arrayValue,e))}}class s7{constructor(e,t=null,i=[],r=[],n=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=n,this.startAt=s,this.endAt=a,this.Te=null}}function s9(e,t=null,i=[],r=[],n=null,s=null,a=null){return new s7(e,t,i,r,n,s,a)}function ae(e){if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof sY)return t.field.canonicalString()+t.op.toString()+sD(t.value);if(sZ(t)&&sJ(t))return t.filters.map(t=>e(t)).join(",");{let i=t.filters.map(t=>e(t)).join(",");return`${t.op}(${i})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>sD(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>sD(e)).join(",")),e.Te=t}return e.Te}function at(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++){var i,r;if(i=e.orderBy[n],r=t.orderBy[n],!(i.dir===r.dir&&i.field.isEqual(r.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!function e(t,i){return t instanceof sY?i instanceof sY&&t.op===i.op&&t.field.isEqual(i.field)&&sC(t.value,i.value):t instanceof sX?i instanceof sX&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((t,r,n)=>t&&e(r,i.filters[n]),!0):void nw(19439)}(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sW(e.startAt,t.startAt)&&sW(e.endAt,t.endAt)}function ai(e){return nq.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ar{constructor(e,t=null,i=[],r=[],n=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=n,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function an(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function as(e){return null!==e.collectionGroup}function aa(e){if(null===e.Ie){let t;e.Ie=[];let i=new Set;for(let t of e.explicitOrderBy)e.Ie.push(t),i.add(t.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new sr(nz.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{i.has(t.canonicalString())||t.isKeyField()||e.Ie.push(new sG(t,r))}),i.has(nz.keyField().canonicalString())||e.Ie.push(new sG(nz.keyField(),r))}return e.Ie}function ao(e){return e.Ee||(e.Ee=function(e,t){if("F"===e.limitType)return s9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new sG(e.field,t)});let i=e.endAt?new sH(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sH(e.startAt.position,e.startAt.inclusive):null;return s9(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}(e,aa(e))),e.Ee}function al(e,t){let i=e.filters.concat([t]);return new ar(e.path,e.collectionGroup,e.explicitOrderBy.slice(),i,e.limit,e.limitType,e.startAt,e.endAt)}function au(e,t,i){return new ar(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function ah(e,t){return at(ao(e),ao(t))&&e.limitType===t.limitType}function ac(e){return`${ae(ao(e))}|lt:${e.limitType}`}function ad(e){var t;let i;return`Query(target=${i=(t=ao(e)).path.canonicalString(),null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof sY?`${t.field.canonicalString()} ${t.op} ${sD(t.value)}`:t instanceof sX?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(e=>sD(e)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(e=>sD(e)).join(",")),`Target(${i})`}; limitType=${e.limitType})`}function af(e,t){var i,r,n,s;let a,o,l;return t.isFoundDocument()&&(a=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(a):nq.isDocumentKey(e.path)?e.path.isEqual(a):e.path.isImmediateParentOf(a))&&function(e,t){for(let i of aa(e))if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1;return!0}(e,t)&&function(e,t){for(let i of e.filters)if(!i.matches(t))return!1;return!0}(e,t)&&(i=e,r=t,(!i.startAt||(n=i.startAt,o=sK(n,aa(i),r),n.inclusive?!!(o<=0):!!(o<0)))&&(!i.endAt||(s=i.endAt,l=sK(s,aa(i),r),s.inclusive?!!(l>=0):!!(l>0))))}function ap(e){return(t,i)=>{let r=!1;for(let n of aa(e)){let e=function(e,t,i){var r;let n,s,a=e.field.isKeyField()?nq.comparator(t.key,i.key):(r=e.field,n=t.data.field(r),s=i.data.field(r),null!==n&&null!==s?sN(n,s):nw(42886));switch(e.dir){case"asc":return a;case"desc":return -1*a;default:return nw(19790,{direction:e.dir})}}(n,t,i);if(0!==e)return e;r=r||n.field.isKeyField()}return 0}}class am{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i){for(let[t,r]of i)if(this.equalsFn(t,e))return r}}has(e){return void 0!==this.get(e)}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){n7(this.inner,(t,i)=>{for(let[t,r]of i)e(t,r)})}isEmpty(){return n9(this.inner)}size(){return this.innerSize}}let ag=new se(nq.comparator),ay=new se(nq.comparator);function av(...e){let t=ay;for(let i of e)t=t.insert(i.key,i);return t}function aw(e){let t=ay;return e.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ab(){return new am(e=>e.toString(),(e,t)=>e.isEqual(t))}let ax=new se(nq.comparator),aE=new sr(nq.comparator);function aA(...e){let t=aE;for(let i of e)t=t.add(i);return t}let aT=new sr(nO);function aI(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n5(t)?"-0":t}}function a_(e){return{integerValue:""+e}}function aS(e,t){return"number"==typeof t&&Number.isInteger(t)&&!n5(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER?a_(t):aI(e,t)}class aC{constructor(){this._=void 0}}function ak(e,t){return e instanceof aM?sM(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class aN extends aC{}class aR extends aC{constructor(e){super(),this.elements=e}}function aP(e,t){let i=aj(t);for(let t of e.elements)i.some(e=>sC(e,t))||i.push(t);return{arrayValue:{values:i}}}class aD extends aC{constructor(e){super(),this.elements=e}}function aO(e,t){let i=aj(t);for(let t of e.elements)i=i.filter(e=>!sC(e,t));return{arrayValue:{values:i}}}class aM extends aC{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function aL(e){return sh(e.integerValue||e.doubleValue)}function aj(e){return sL(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class aV{constructor(e,t){this.field=e,this.transform=t}}class aF{constructor(e,t){this.version=e,this.transformResults=t}}class aU{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new aU}static exists(e){return new aU(void 0,e)}static updateTime(e){return new aU(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aB(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class az{}function aq(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new aX(e.key,aU.none()):new aK(e.key,e.data,aU.none());{let i=e.data,r=sq.empty(),n=new sr(nz.comparator);for(let e of t.fields)if(!n.has(e)){let t=i.field(e);null===t&&e.length>1&&(e=e.popLast(),t=i.field(e)),null===t?r.delete(e):r.set(e,t),n=n.add(e)}return new aW(e.key,r,new ss(n.toArray()),aU.none())}}function a$(e,t,i,r){return e instanceof aK?function(e,t,i,r){if(!aB(e.precondition,t))return i;let n=e.value.clone(),s=aY(e.fieldTransforms,r,t);return n.setAll(s),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}(e,t,i,r):e instanceof aW?function(e,t,i,r){if(!aB(e.precondition,t))return i;let n=aY(e.fieldTransforms,r,t),s=t.data;return(s.setAll(aG(e)),s.setAll(n),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===i)?null:i.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,i,r):aB(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):i}function aH(e,t){var i,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(i=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===i&&void 0===r||!(!i||!r)&&nj(i,r,(e,t)=>{var i,r;return e.field.isEqual(t.field)&&(i=e.transform,r=t.transform,i instanceof aR&&r instanceof aR||i instanceof aD&&r instanceof aD?nj(i.elements,r.elements,sC):i instanceof aM&&r instanceof aM?sC(i.Ae,r.Ae):i instanceof aN&&r instanceof aN)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class aK extends az{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class aW extends az{constructor(e,t,i,r,n=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function aG(e){let t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let r=e.data.field(i);t.set(i,r)}}),t}function aQ(e,t,i){let r=new Map;nx(e.length===i.length,32656,{Re:i.length,Ve:e.length});for(let s=0;s<i.length;s++){var n;let a=e[s],o=a.transform,l=t.data.field(a.field);r.set(a.field,(n=i[s],o instanceof aR?aP(o,l):o instanceof aD?aO(o,l):n))}return r}function aY(e,t,i){let r=new Map;for(let n of e){let e=n.transform,s=i.data.field(n.field);r.set(n.field,function(e,t,i){var r;let n,s,a;return e instanceof aN?(r=t,n={fields:{[sf]:{stringValue:sd},[sm]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}},r&&sg(r)&&(r=sy(r)),r&&(n.fields[sp]=r),{mapValue:n}):e instanceof aR?aP(e,t):e instanceof aD?aO(e,t):(a=aL(s=ak(e,t))+aL(e.Ae),sM(s)&&sM(e.Ae)?a_(a):aI(e.serializer,a))}(e,s,t))}return r}class aX extends az{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aJ extends az{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aZ{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&function(e,t,i){let r,n;e instanceof aK?(r=e.value.clone(),n=aQ(e.fieldTransforms,t,i.transformResults),r.setAll(n),t.convertToFoundDocument(i.version,r).setHasCommittedMutations()):e instanceof aW?function(e,t,i){if(!aB(e.precondition,t))return t.convertToUnknownDocument(i.version);let r=aQ(e.fieldTransforms,t,i.transformResults),n=t.data;n.setAll(aG(e)),n.setAll(r),t.convertToFoundDocument(i.version,n).setHasCommittedMutations()}(e,t,i):t.convertToNoDocument(i.version).setHasCommittedMutations()}(r,e,i[t])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=a$(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=a$(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=ab();return this.mutations.forEach(r=>{let n=e.get(r.key),s=n.overlayedDocument,a=this.applyToLocalView(s,n.mutatedFields),o=aq(s,a=t.has(r.key)?null:a);null!==o&&i.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(nZ.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),aA())}isEqual(e){return this.batchId===e.batchId&&nj(this.mutations,e.mutations,(e,t)=>aH(e,t))&&nj(this.baseMutations,e.baseMutations,(e,t)=>aH(e,t))}}class a0{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){nx(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=ax,n=e.mutations;for(let e=0;e<n.length;e++)r=r.insert(n[e].key,i[e].version);return new a0(e,t,i,r)}}class a1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class a2{constructor(e,t){this.count=e,this.unchangedNames=t}}function a6(e){if(void 0===e)return ng("GRPC error has no .code"),nE.UNKNOWN;switch(e){case I.OK:return nE.OK;case I.CANCELLED:return nE.CANCELLED;case I.UNKNOWN:return nE.UNKNOWN;case I.DEADLINE_EXCEEDED:return nE.DEADLINE_EXCEEDED;case I.RESOURCE_EXHAUSTED:return nE.RESOURCE_EXHAUSTED;case I.INTERNAL:return nE.INTERNAL;case I.UNAVAILABLE:return nE.UNAVAILABLE;case I.UNAUTHENTICATED:return nE.UNAUTHENTICATED;case I.INVALID_ARGUMENT:return nE.INVALID_ARGUMENT;case I.NOT_FOUND:return nE.NOT_FOUND;case I.ALREADY_EXISTS:return nE.ALREADY_EXISTS;case I.PERMISSION_DENIED:return nE.PERMISSION_DENIED;case I.FAILED_PRECONDITION:return nE.FAILED_PRECONDITION;case I.ABORTED:return nE.ABORTED;case I.OUT_OF_RANGE:return nE.OUT_OF_RANGE;case I.UNIMPLEMENTED:return nE.UNIMPLEMENTED;case I.DATA_LOSS:return nE.DATA_LOSS;default:return nw(39323,{code:e})}}(_=I||(I={}))[_.OK=0]="OK",_[_.CANCELLED=1]="CANCELLED",_[_.UNKNOWN=2]="UNKNOWN",_[_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_[_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_[_.NOT_FOUND=5]="NOT_FOUND",_[_.ALREADY_EXISTS=6]="ALREADY_EXISTS",_[_.PERMISSION_DENIED=7]="PERMISSION_DENIED",_[_.UNAUTHENTICATED=16]="UNAUTHENTICATED",_[_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_[_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_[_.ABORTED=10]="ABORTED",_[_.OUT_OF_RANGE=11]="OUT_OF_RANGE",_[_.UNIMPLEMENTED=12]="UNIMPLEMENTED",_[_.INTERNAL=13]="INTERNAL",_[_.UNAVAILABLE=14]="UNAVAILABLE",_[_.DATA_LOSS=15]="DATA_LOSS";let a3=new m([0xffffffff,0xffffffff],0);function a4(e){let t=(new TextEncoder).encode(e),i=new g;return i.update(t),new Uint8Array(i.digest())}function a5(e){let t=new DataView(e.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),n=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new m([i,r],0),new m([n,s],0)]}class a8{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new a7(`Invalid padding: ${t}`);if(i<0||e.length>0&&0===this.hashCount)throw new a7(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new a7(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=m.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(m.fromNumber(i)));return 1===r.compare(a3)&&(r=new m([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;let[t,i]=a5(a4(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,i,e);if(!this.we(r))return!1}return!0}static create(e,t,i){let r=new a8(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return i.forEach(e=>r.insert(e)),r}insert(e){if(0===this.ge)return;let[t,i]=a5(a4(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,i,e);this.Se(r)}}Se(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class a7 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class a9{constructor(e,t,i,r,n){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=n}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,oe.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new a9(nZ.min(),r,new se(nO),ag,aA())}}class oe{constructor(e,t,i,r,n){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=n}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new oe(i,t,aA(),aA(),aA())}}class ot{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class oi{constructor(e,t){this.targetId=e,this.Ce=t}}class or{constructor(e,t,i=so.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class on{constructor(){this.ve=0,this.Fe=oo(),this.Me=so.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=aA(),t=aA(),i=aA();return this.Fe.forEach((r,n)=>{switch(n){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:nw(38017,{changeType:n})}}),new oe(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=oo()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nx(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class os{constructor(e){this.Ge=e,this.ze=new Map,this.je=ag,this.Je=oa(),this.He=oa(),this.Ye=new se(nO)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:nw(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){let n=r.target;if(ai(n))if(0===i){let e=new nq(n.path);this.et(t,e,s$.newNoDocument(e,nZ.min()))}else nx(1===i,20013,{expectedCount:i});else{let r=this._t(t);if(r!==i){let i=this.ut(e),n=i?this.ct(i,e,r):1;0!==n&&(this.it(t),this.Ye=this.Ye.insert(t,2===n?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}ut(e){let t,i,r=e.Ce.unchangedNames;if(!r||!r.bits)return null;let{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;try{t=sc(n).toUint8Array()}catch(e){if(e instanceof sa)return ny("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new a8(t,s,a)}catch(e){return ny(e instanceof a7?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.ge?null:i}ct(e,t,i){return 2*(t.Ce.count!==i-this.Pt(e,t.targetId))}Pt(e,t){let i=this.Ge.getRemoteKeysForTarget(t),r=0;return i.forEach(i=>{let n=this.Ge.ht(),s=`projects/${n.projectId}/databases/${n.database}/documents/${i.path.canonicalString()}`;e.mightContain(s)||(this.et(t,i,null),r++)}),r}Tt(e){let t=new Map;this.ze.forEach((i,r)=>{let n=this.ot(r);if(n){if(i.current&&ai(n.target)){let t=new nq(n.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,s$.newNoDocument(t,e))}i.Be&&(t.set(r,i.ke()),i.qe())}});let i=aA();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{let t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(i=i.add(e))}),this.je.forEach((t,i)=>i.setReadTime(e));let r=new a9(e,t,this.Ye,this.je,i);return this.je=ag,this.Je=oa(),this.He=oa(),this.Ye=new se(nO),r}Xe(e,t){if(!this.rt(e))return;let i=2*!!this.Et(e,t.key);this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new on,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new sr(nO),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new sr(nO),this.Je=this.Je.insert(e,t)),t}rt(e){let t=null!==this.ot(e);return t||nm("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new on),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function oa(){return new se(nq.comparator)}function oo(){return new se(nq.comparator)}let ol={asc:"ASCENDING",desc:"DESCENDING"},ou={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oh={and:"AND",or:"OR"};class oc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function od(e,t){return e.useProto3Json||null==t?t:{value:t}}function of(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function op(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function om(e){let t;return nx(!!e,49232),nZ.fromTimestamp(new nJ((t=su(e)).seconds,t.nanos))}function og(e,t){return oy(e,t).canonicalString()}function oy(e,t){let i=new nU(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?i:i.child(t)}function ov(e){let t=nU.fromString(e);return nx(oS(t),10190,{key:t.toString()}),t}function ow(e,t){return og(e.databaseId,t.path)}function ob(e,t){let i=ov(t);if(i.get(1)!==e.databaseId.projectId)throw new nA(nE.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new nA(nE.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new nq(oA(i))}function ox(e,t){return og(e.databaseId,t)}function oE(e){return new nU(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function oA(e){return nx(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function oT(e,t,i){return{name:ow(e,t),fields:i.value.mapValue.fields}}function oI(e){return{fieldPath:e.canonicalString()}}function o_(e){return nz.fromServerFormat(e.fieldPath)}function oS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oC{constructor(e,t,i,r,n=nZ.min(),s=nZ.min(),a=so.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=n,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new oC(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oC(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ok{constructor(e){this.yt=e}}class oN{Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(+!!e.booleanValue);else if("integerValue"in e)this.Ft(t,15),t.Mt(sh(e.integerValue));else if("doubleValue"in e){let i=sh(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),n5(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),"string"==typeof i&&(i=su(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(sc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?sz(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):sU(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):nw(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};for(let e of(this.Ft(t,55),Object.keys(i)))this.Ot(e,t),this.Ct(i[e],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=i[s_].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(sh(r)),this.Ot(s_,t),this.Ct(i[s_],t)}Qt(e,t){let i=e.values||[];for(let e of(this.Ft(t,50),i))this.Ct(e,t)}Lt(e,t){this.Ft(t,37),nq.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}oN.Kt=new oN;class oR{constructor(){this.Cn=new oP}addToCollectionParentIndex(e,t){return this.Cn.add(t),n6.resolve()}getCollectionParents(e,t){return n6.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return n6.resolve()}deleteFieldIndex(e,t){return n6.resolve()}deleteAllFieldIndexes(e){return n6.resolve()}createTargetIndexes(e,t){return n6.resolve()}getDocumentsMatchingTarget(e,t){return n6.resolve(null)}getIndexType(e,t){return n6.resolve(0)}getFieldIndexes(e,t){return n6.resolve([])}getNextCollectionGroupToUpdate(e){return n6.resolve(null)}getMinOffset(e,t){return n6.resolve(n0.min())}getMinOffsetFromCollectionGroup(e,t){return n6.resolve(n0.min())}updateCollectionGroup(e,t,i){return n6.resolve()}updateIndexEntries(e,t){return n6.resolve()}}class oP{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new sr(nU.comparator),n=!r.has(i);return this.index[t]=r.add(i),n}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new sr(nU.comparator)).toArray()}}new Uint8Array(0);let oD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oO{static withCacheSize(e){return new oO(e,oO.DEFAULT_COLLECTION_PERCENTILE,oO.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}oO.DEFAULT_COLLECTION_PERCENTILE=10,oO.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oO.DEFAULT=new oO(0x2800000,oO.DEFAULT_COLLECTION_PERCENTILE,oO.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oO.DISABLED=new oO(-1,0,0);class oM{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oM(0)}static cr(){return new oM(-1)}}let oL="LruGarbageCollector";function oj([e,t],[i,r]){let n=nO(e,i);return 0===n?nO(t,r):n}class oV{constructor(e){this.Ir=e,this.buffer=new sr(oj),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>oj(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oF{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){nm(oL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){n3(e)?nm(oL,"Ignoring IndexedDB error during garbage collection: ",e):await n2(e)}await this.Vr(3e5)})}}class oU{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return n6.resolve(n4.ce);let i=new oV(t);return this.mr.forEachTarget(e,e=>i.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>i.Ar(e))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(nm("LruGarbageCollector","Garbage collection skipped; disabled"),n6.resolve(oD)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(nm("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oD):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,n,s,a,o,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(nm("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(i=r,a=Date.now(),this.removeTargets(e,i,t))).next(t=>(n=t,o=Date.now(),this.removeOrphanedDocuments(e,i))).next(e=>(l=Date.now(),np()<=p.DEBUG&&nm("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+"ms\n"+`	Removed ${n} targets in `+(o-a)+"ms\n"+`	Removed ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-u}ms`),n6.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:n,documentsRemoved:e})))}}class oB{constructor(){this.changes=new am(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,s$.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return void 0!==i?n6.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oq{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==i&&a$(i.mutation,e,ss.empty(),nJ.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,aA()).next(()=>t))}getLocalViewOfDocuments(e,t,i=aA()){let r=ab();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(e=>{let t=av();return e.forEach((e,i)=>{t=t.insert(e,i.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let i=ab();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,aA()))}populateOverlays(e,t,i){let r=[];return i.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,i)=>{t.set(e,i)})})}computeViews(e,t,i,r){let n=ag,s=ab(),a=ab();return t.forEach((e,t)=>{let a=i.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof aW)?n=n.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),a$(a.mutation,t,a.mutation.getFieldMask(),nJ.now())):s.set(t.key,ss.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>a.set(e,new oz(t,s.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){let i=ab(),r=new se((e,t)=>e-t),n=aA();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let n of e)n.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=i.get(e)||ss.empty();a=n.applyToLocalView(s,a),i.set(e,a);let o=(r.get(n.batchId)||aA()).add(e);r=r.insert(n.batchId,o)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let r=a.getNext(),o=r.key,l=r.value,u=ab();l.forEach(e=>{if(!n.has(e)){let r=aq(t.get(e),i.get(e));null!==r&&u.set(e,r),n=n.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return n6.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,i,r){return nq.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):as(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(n=>{let s=r-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-n.size):n6.resolve(ab()),a=-1,o=n;return s.next(t=>n6.forEach(t,(t,i)=>(a<i.largestBatchId&&(a=i.largestBatchId),n.get(t)?n6.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,o,t,aA())).next(e=>({batchId:a,changes:aw(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nq(t)).next(e=>{let t=av();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let n=t.collectionGroup,s=av();return this.indexManager.getCollectionParents(e,n).next(a=>n6.forEach(a,a=>{let o=new ar(a.child(n),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,o,i,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(n=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,n,r))).next(e=>{n.forEach((t,i)=>{let r=i.getKey();null===e.get(r)&&(e=e.insert(r,s$.newInvalidDocument(r)))});let i=av();return e.forEach((e,r)=>{let s=n.get(e);void 0!==s&&a$(s.mutation,r,ss.empty(),nJ.now()),af(t,r)&&(i=i.insert(e,r))}),i})}}class o${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return n6.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:t.id,version:t.version,createTime:om(t.createTime)}),n6.resolve()}getNamedQuery(e,t){return n6.resolve(this.kr.get(t))}saveNamedQuery(e,t){var i;let r;return this.kr.set(t.name,{name:t.name,query:(r=function(e){var t,i,r,n;let s,a,o,l,u,h=4===(s=ov(e.parent)).length?nU.emptyPath():oA(s),c=e.structuredQuery,d=c.from?c.from.length:0,f=null;if(d>0){nx(1===d,65062);let e=c.from[0];e.allDescendants?f=e.collectionId:h=h.child(e.collectionId)}let p=[];c.where&&(p=(a=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=o_(e.unaryFilter.field);return sY.create(t,"==",{doubleValue:NaN});case"IS_NULL":let i=o_(e.unaryFilter.field);return sY.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=o_(e.unaryFilter.field);return sY.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=o_(e.unaryFilter.field);return sY.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return nw(61313);default:return nw(60726)}}(t):void 0!==t.fieldFilter?sY.create(o_(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return nw(58110);default:return nw(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?sX.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nw(1026)}}(t.compositeFilter.op)):nw(30097,{filter:t})}(c.where))instanceof sX&&sZ(t=a)&&sJ(t)?a.getFilters():[a]);let m=[];c.orderBy&&(m=c.orderBy.map(e=>new sG(o_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let g=null;c.limit&&(g=null==(o="object"==typeof(i=c.limit)?i.value:i)?null:o);let y=null;c.startAt&&(l=!!(r=c.startAt).before,y=new sH(r.values||[],l));let v=null;return c.endAt&&(u=!(n=c.endAt).before,v=new sH(n.values||[],u)),new ar(h,f,m,p,g,"F",y,v)}({parent:(i=t.bundledQuery).parent,structuredQuery:i.structuredQuery}),"LAST"===i.limitType?au(r,r.limit,"L"):r),readTime:om(t.readTime)}),n6.resolve()}}class oH{constructor(){this.overlays=new se(nq.comparator),this.qr=new Map}getOverlay(e,t){return n6.resolve(this.overlays.get(t))}getOverlays(e,t){let i=ab();return n6.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&i.set(t,e)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((i,r)=>{this.St(e,t,r)}),n6.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(i)),n6.resolve()}getOverlaysForCollection(e,t,i){let r=ab(),n=t.length+1,s=new nq(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===n&&e.largestBatchId>i&&r.set(e.getKey(),e)}return n6.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let n=new se((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>i){let t=n.get(e.largestBatchId);null===t&&(t=ab(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=ab(),o=n.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return n6.resolve(a)}St(e,t,i){let r=this.overlays.get(i.key);if(null!==r){let e=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(i.key,new a1(t,i));let n=this.qr.get(t);void 0===n&&(n=aA(),this.qr.set(t,n)),this.qr.set(t,n.add(i.key))}}class oK{constructor(){this.sessionToken=so.EMPTY_BYTE_STRING}getSessionToken(e){return n6.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,n6.resolve()}}class oW{constructor(){this.Qr=new sr(oG.$r),this.Ur=new sr(oG.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new oG(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new oG(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){let t=new nq(new nU([])),i=new oG(t,e),r=new oG(t,e+1),n=[];return this.Ur.forEachInRange([i,r],e=>{this.Gr(e),n.push(e.key)}),n}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new nq(new nU([])),i=new oG(t,e),r=new oG(t,e+1),n=aA();return this.Ur.forEachInRange([i,r],e=>{n=n.add(e.key)}),n}containsKey(e){let t=new oG(e,0),i=this.Qr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class oG{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return nq.comparator(e.key,t.key)||nO(e.Yr,t.Yr)}static Kr(e,t){return nO(e.Yr,t.Yr)||nq.comparator(e.key,t.key)}}class oQ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new sr(oG.$r)}checkEmpty(e){return n6.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){let n=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new aZ(n,t,i,r);for(let t of(this.mutationQueue.push(s),r))this.Zr=this.Zr.add(new oG(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return n6.resolve(s)}lookupMutationBatch(e,t){return n6.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=this.ei(t+1),r=i<0?0:i;return n6.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return n6.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return n6.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new oG(t,0),r=new oG(t,1/0),n=[];return this.Zr.forEachInRange([i,r],e=>{let t=this.Xr(e.Yr);n.push(t)}),n6.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sr(nO);return t.forEach(e=>{let t=new oG(e,0),r=new oG(e,1/0);this.Zr.forEachInRange([t,r],e=>{i=i.add(e.Yr)})}),n6.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,n=i;nq.isDocumentKey(n)||(n=n.child(""));let s=new oG(new nq(n),0),a=new sr(nO);return this.Zr.forEachWhile(e=>{let t=e.key.path;return!!i.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),n6.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(e=>{let i=this.Xr(e);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nx(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let i=this.Zr;return n6.forEach(t.mutations,r=>{let n=new oG(r.key,t.batchId);return i=i.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new oG(t,0),r=this.Zr.firstAfterOrEqual(i);return n6.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,n6.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oY{constructor(e){this.ri=e,this.docs=new se(nq.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),n=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-n,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return n6.resolve(i?i.document.mutableCopy():s$.newInvalidDocument(t))}getEntries(e,t){let i=ag;return t.forEach(e=>{let t=this.docs.get(e);i=i.insert(e,t?t.document.mutableCopy():s$.newInvalidDocument(e))}),n6.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let n=ag,s=t.path,a=new nq(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let i=e.readTime.compareTo(t.readTime);return 0!==i||0!==(i=nq.comparator(e.documentKey,t.documentKey))?i:nO(e.largestBatchId,t.largestBatchId)}(new n0(a.readTime,a.key,-1),i)||(r.has(a.key)||af(t,a))&&(n=n.insert(a.key,a.mutableCopy()))}return n6.resolve(n)}getAllFromCollectionGroup(e,t,i,r){nw(9500)}ii(e,t){return n6.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new oX(this)}getSize(e){return n6.resolve(this.size)}}class oX extends oB{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),n6.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class oJ{constructor(e){this.persistence=e,this.si=new am(e=>ae(e),at),this.lastRemoteSnapshotVersion=nZ.min(),this.highestTargetId=0,this.oi=0,this._i=new oW,this.targetCount=0,this.ai=oM.ur()}forEachTarget(e,t){return this.si.forEach((e,i)=>t(i)),n6.resolve()}getLastRemoteSnapshotVersion(e){return n6.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return n6.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),n6.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),n6.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new oM(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,n6.resolve()}updateTargetData(e,t){return this.Pr(t),n6.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,n6.resolve()}removeTargets(e,t,i){let r=0,n=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.si.delete(s),n.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),n6.waitFor(n).next(()=>r)}getTargetCount(e){return n6.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return n6.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),n6.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,n=[];return r&&t.forEach(t=>{n.push(r.markPotentiallyOrphaned(e,t))}),n6.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),n6.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return n6.resolve(i)}containsKey(e,t){return n6.resolve(this._i.containsKey(t))}}class oZ{constructor(e,t){this.ui={},this.overlays={},this.ci=new n4(0),this.li=!1,this.li=!0,this.hi=new oK,this.referenceDelegate=e(this),this.Pi=new oJ(this),this.indexManager=new oR,this.remoteDocumentCache=new oY(e=>this.referenceDelegate.Ti(e)),this.serializer=new ok(t),this.Ii=new o$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new oQ(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){nm("MemoryPersistence","Starting transaction:",e);let r=new o0(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return n6.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class o0 extends n1{constructor(e){super(),this.currentSequenceNumber=e}}class o1{constructor(e){this.persistence=e,this.Ri=new oW,this.Vi=null}static mi(e){return new o1(e)}get fi(){if(this.Vi)return this.Vi;throw nw(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),n6.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),n6.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),n6.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return n6.forEach(this.fi,i=>{let r=nq.fromPath(i);return this.gi(e,r).next(e=>{e||t.removeEntry(r,nZ.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return n6.or([()=>n6.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class o2{constructor(e,t){this.persistence=e,this.pi=new am(e=>(function(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let i=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=r}}return i}(e.get(i),t);return t+"\x01\x01"})(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=new oU(this,t)}static mi(e,t){return new o2(e,t)}Ei(){}di(e){return n6.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return n6.forEach(this.pi,(i,r)=>this.br(e,i,r).next(e=>e?n6.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0,r=this.persistence.getRemoteDocumentCache(),n=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(i++,n.removeEntry(r,nZ.min()))})).next(()=>n.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),n6.resolve()}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),n6.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),n6.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),n6.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(sS(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let i=sy(t);return i?16+e(i):16;case 5:return 2*t.stringValue.length;case 6:return sc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,i)=>t+e(i),0);case 10:case 11:var r;let n;return r=t.mapValue,n=0,n7(r.fields,(t,i)=>{n+=t.length+e(i)}),n;default:throw nw(13486,{value:t})}}(e.data.value)),t}br(e,t,i){return n6.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return n6.resolve(void 0!==e&&e>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class o6{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=aA(),r=aA();for(let e of t.docChanges)switch(e.type){case 0:i=i.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new o6(e,t.fromCache,i,r)}}class o3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class o4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){let t;return!function(){let t=F()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Number((t=Q().match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1")>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let n={result:null};return this.ys(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.ws(e,t,r,i).next(e=>{n.result=e})}).next(()=>{if(n.result)return;let i=new o3;return this.Ss(e,t,i).next(r=>{if(n.result=r,this.Vs)return this.bs(e,t,i,r.size)})}).next(()=>n.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(np()<=p.DEBUG&&nm("QueryEngine","SDK will not create cache indexes for query:",ad(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),n6.resolve()):(np()<=p.DEBUG&&nm("QueryEngine","Query:",ad(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(np()<=p.DEBUG&&nm("QueryEngine","The SDK decides to create cache indexes for query:",ad(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ao(t))):n6.resolve())}ys(e,t){if(an(t))return n6.resolve(null);let i=ao(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(i=ao(t=au(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{let n=aA(...r);return this.ps.getDocuments(e,n).next(r=>this.indexManager.getMinOffset(e,i).next(i=>{let s=this.Ds(t,r);return this.Cs(t,s,n,i.readTime)?this.ys(e,au(t,null,"F")):this.vs(e,s,t,i)}))})))}ws(e,t,i,r){return an(t)||r.isEqual(nZ.min())?n6.resolve(null):this.ps.getDocuments(e,i).next(n=>{let s,a,o=this.Ds(t,n);return this.Cs(t,o,i,r)?n6.resolve(null):(np()<=p.DEBUG&&nm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ad(t)),this.vs(e,o,t,(s=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,new n0(nZ.fromTimestamp(1e9===a?new nJ(s+1,0):new nJ(s,a)),nq.empty(),-1))).next(e=>e))})}Ds(e,t){let i=new sr(ap(e));return t.forEach((t,r)=>{af(e,r)&&(i=i.add(r))}),i}Cs(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;let n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(r)>0)}Ss(e,t,i){return np()<=p.DEBUG&&nm("QueryEngine","Using full collection scan to execute query:",ad(t)),this.ps.getDocumentsMatchingQuery(e,t,n0.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let o5="LocalStore";class o8{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new se(nO),this.xs=new am(e=>ae(e),at),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function o7(e,t){return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(n=>(r=n,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(t=>{let n=[],s=[],a=aA();for(let e of r)for(let t of(n.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return e.localDocuments.getDocuments(i,a).next(e=>({Ls:e,removedBatchIds:n,addedBatchIds:s}))})})}function o9(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}async function le(e,t,i){let r=e.Ms.get(t);try{i||await e.persistence.runTransaction("Release target",i?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,r))}catch(e){if(!n3(e))throw e;nm(o5,`Failed to update sequence numbers for target ${t}: ${e}`)}e.Ms=e.Ms.remove(t),e.xs.delete(r.target)}function lt(e,t,i){let r=nZ.min(),n=aA();return e.persistence.runTransaction("Execute query","readwrite",s=>{var a;let o;return(a=ao(t),void 0!==(o=e.xs.get(a))?n6.resolve(e.Ms.get(o)):e.Pi.getTargetData(s,a)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,e.Pi.getMatchingKeysForTargetId(s,t.targetId).next(e=>{n=e})}).next(()=>e.Fs.getDocumentsMatchingQuery(s,t,i?r:nZ.min(),i?n:aA())).next(i=>{var r,s,a;let o;return r=e,s=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),a=i,o=r.Os.get(s)||nZ.min(),a.forEach((e,t)=>{t.readTime.compareTo(o)>0&&(o=t.readTime)}),r.Os.set(s,o),{documents:i,Qs:n}})})}class li{constructor(){this.activeTargetIds=aT}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class lr{constructor(){this.Mo=new li,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new li,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ln{Oo(e){}shutdown(){}}let ls="ConnectivityMonitor";class la{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){for(let e of(nm(ls,"Network connectivity changed: AVAILABLE"),this.qo))e(0)}ko(){for(let e of(nm(ls,"Network connectivity changed: UNAVAILABLE"),this.qo))e(1)}static v(){return"u">typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lo=null;function ll(){return null===lo?lo=0x10000000+Math.round(0x80000000*Math.random()):lo++,"0x"+lo.toString(16)}let lu="RestConnection",lh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lc{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===sb?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,n){let s=ll(),a=this.zo(e,t.toUriEncodedString());nm(lu,`Sending RPC '${e}' ${s}:`,a,i);let o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,n);let{host:l}=new URL(a),u=$(l);return this.Jo(e,a,o,i,u).then(t=>(nm(lu,`Received RPC '${e}' ${s}: `,t),t),t=>{throw ny(lu,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",i),t})}Ho(e,t,i,r,n,s){return this.Go(e,t,i,r,n)}jo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+nd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,i)=>e[i]=t),i&&i.headers.forEach((t,i)=>e[i]=t)}zo(e,t){let i=lh[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class ld{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}let lf="WebChannelConnection";class lp extends lc{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,n){let s=ll();return new Promise((n,a)=>{let o=new y;o.setWithCredentials(!0),o.listenOnce(w.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case b.NO_ERROR:let t=o.getResponseJson();nm(lf,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),n(t);break;case b.TIMEOUT:nm(lf,`RPC '${e}' ${s} timed out`),a(new nA(nE.DEADLINE_EXCEEDED,"Request time out"));break;case b.HTTP_ERROR:let i=o.getStatus();if(nm(lf,`RPC '${e}' ${s} failed with status:`,i,"response text:",o.getResponseText()),i>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e,i=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(nE).indexOf(e)>=0?e:nE.UNKNOWN);a(new nA(i,t.message))}else a(new nA(nE.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new nA(nE.UNAVAILABLE,"Connection failed."));break;default:nw(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{nm(lf,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);nm(lf,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,i,15)})}T_(e,t,i){let r=ll(),n=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=T(),a=A(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,i),o.encodeInitMessageHeaders=!0;let u=n.join("");nm(lf,`Creating RPC '${e}' stream ${r}: ${u}`,o);let h=s.createWebChannel(u,o);this.I_(h);let c=!1,d=!1,f=new ld({Yo:t=>{d?nm(lf,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(c||(nm(lf,`Opening RPC '${e}' stream ${r} transport.`),h.open(),c=!0),nm(lf,`RPC '${e}' stream ${r} sending:`,t),h.send(t))},Zo:()=>h.close()}),p=(e,t,i)=>{e.listen(t,e=>{try{i(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(h,v.EventType.OPEN,()=>{d||(nm(lf,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(h,v.EventType.CLOSE,()=>{d||(d=!0,nm(lf,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(h))}),p(h,v.EventType.ERROR,t=>{d||(d=!0,ny(lf,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new nA(nE.UNAVAILABLE,"The operation could not be completed")))}),p(h,v.EventType.MESSAGE,t=>{if(!d){let i=t.data[0];nx(!!i,16349);let n=i?.error||i[0]?.error;if(n){nm(lf,`RPC '${e}' stream ${r} received error:`,n);let t=n.status,i=function(e){let t=I[e];if(void 0!==t)return a6(t)}(t),s=n.message;void 0===i&&(i=nE.INTERNAL,s="Unknown error status: "+t+" with message "+n.message),d=!0,f.a_(new nA(i,s)),h.close()}else nm(lf,`RPC '${e}' stream ${r} received:`,i),f.u_(i)}}),p(a,E.STAT_EVENT,t=>{t.stat===x.PROXY?nm(lf,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===x.NOPROXY&&nm(lf,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function lm(){return"u">typeof document?document:null}function lg(e){return new oc(e,!0)}class ly{constructor(e,t,i=1e3,r=1.5,n=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=n,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&nm("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}let lv="PersistentStream";class lw{constructor(e,t,i,r,n,s,a,o){this.Mi=e,this.S_=i,this.b_=r,this.connection=n,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ly(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===nE.RESOURCE_EXHAUSTED?(ng(t.toString()),ng("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===nE.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,i])=>{this.D_===t&&this.G_(e,i)},t=>{e(()=>{let e=new nA(nE.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){let i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{i(()=>this.z_(e))}),this.stream.onMessage(e=>{i(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return nm(lv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(nm(lv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lb extends lw{constructor(e,t,i,r,n,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,s),this.serializer=n}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=function(e,t){let i;if("targetChange"in t){var r,n;t.targetChange;let s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:nw(39313,{state:r}),a=t.targetChange.targetIds||[],o=(n=t.targetChange.resumeToken,e.useProto3Json?(nx(void 0===n||"string"==typeof n,58123),so.fromBase64String(n||"")):(nx(void 0===n||n instanceof nn.Buffer||n instanceof Uint8Array,16193),so.fromUint8Array(n||new Uint8Array))),l=t.targetChange.cause;i=new or(s,a,o,l&&new nA(void 0===l.code?nE.UNKNOWN:a6(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let n=ob(e,r.document.name),s=om(r.document.updateTime),a=r.document.createTime?om(r.document.createTime):nZ.min(),o=new sq({mapValue:{fields:r.document.fields}}),l=s$.newFoundDocument(n,s,a,o);i=new ot(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let n=ob(e,r.document),s=r.readTime?om(r.readTime):nZ.min(),a=s$.newNoDocument(n,s);i=new ot([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let n=ob(e,r.document);i=new ot([],r.removedTargetIds||[],n,null)}else{if(!("filter"in t))return nw(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:n}=e,s=new a2(r,n);i=new oi(e.targetId,s)}}return i}(this.serializer,e),i=function(e){if(!("targetChange"in e))return nZ.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?nZ.min():t.readTime?om(t.readTime):nZ.min()}(e);return this.listener.H_(t,i)}Y_(e){let t,i={};i.database=oE(this.serializer),i.addTarget=function(e,t){var i,r;let n,s,a,o,l,u,h,c=t.target;if((n=ai(c)?{documents:{documents:[ox(e,c.path)]}}:{query:(a={structuredQuery:{}},o=c.path,null!==c.collectionGroup?(s=o,a.structuredQuery.from=[{collectionId:c.collectionGroup,allDescendants:!0}]):(s=o.popLast(),a.structuredQuery.from=[{collectionId:o.lastSegment()}]),a.parent=ox(e,s),(l=function(e){if(0!==e.length)return function e(t){var i;let r;return t instanceof sY?function(e){if("=="===e.op){if(sV(e.value))return{unaryFilter:{field:oI(e.field),op:"IS_NAN"}};if(sj(e.value))return{unaryFilter:{field:oI(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sV(e.value))return{unaryFilter:{field:oI(e.field),op:"IS_NOT_NAN"}};if(sj(e.value))return{unaryFilter:{field:oI(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oI(e.field),op:ou[e.op],value:e.value}}}(t):t instanceof sX?1===(r=(i=t).getFilters().map(t=>e(t))).length?r[0]:{compositeFilter:{op:oh[i.op],filters:r}}:nw(54877,{filter:t})}(sX.create(e,"and"))}(c.filters))&&(a.structuredQuery.where=l),(u=function(e){if(0!==e.length)return e.map(e=>({field:oI(e.field),direction:ol[e.dir]}))}(c.orderBy))&&(a.structuredQuery.orderBy=u),null!==(h=od(e,c.limit))&&(a.structuredQuery.limit=h),c.startAt&&(a.structuredQuery.startAt={before:(i=c.startAt).inclusive,values:i.position}),c.endAt&&(a.structuredQuery.endAt={before:!(r=c.endAt).inclusive,values:r.position}),{ft:a,parent:s}).ft}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=op(e,t.resumeToken);let i=od(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(nZ.min())>0){n.readTime=of(e,t.snapshotVersion.toTimestamp());let i=od(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);let r=(this.serializer,null==(t=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nw(28987,{purpose:e})}}(e.purpose))?null:{"goog-listen-tags":t});r&&(i.labels=r),this.q_(i)}Z_(e){let t={};t.database=oE(this.serializer),t.removeTarget=e,this.q_(t)}}class lx extends lw{constructor(e,t,i,r,n,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,s),this.serializer=n}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nx(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nx(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){var t,i;nx(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let r=(t=e.writeResults,i=e.commitTime,t&&t.length>0?(nx(void 0!==i,14353),t.map(e=>{let t;return(t=e.updateTime?om(e.updateTime):om(i)).isEqual(nZ.min())&&(t=om(i)),new aF(t,e.transformResults||[])})):[]),n=om(e.commitTime);return this.listener.na(n,r)}ra(){let e={};e.database=oE(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var i,r;let n;if(t instanceof aK)n={update:oT(e,t.key,t.value)};else if(t instanceof aX)n={delete:ow(e,t.key)};else if(t instanceof aW){let i;n={update:oT(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach(e=>i.push(e.canonicalString())),{fieldPaths:i})}}else{if(!(t instanceof aJ))return nw(16599,{Vt:t.type});n={verify:ow(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let i=t.transform;if(i instanceof aN)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(i instanceof aR)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:i.elements}};if(i instanceof aD)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:i.elements}};if(i instanceof aM)return{fieldPath:t.field.canonicalString(),increment:i.Ae};throw nw(20930,{transform:t.transform})})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:of(e,i.updateTime.toTimestamp())}:void 0!==i.exists?{exists:i.exists}:nw(27497)),n})(this.serializer,e))};this.q_(t)}}class lE{}class lA extends lE{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new nA(nE.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.Go(e,oy(t,i),r,n,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nA(nE.UNKNOWN,e.toString())})}Ho(e,t,i,r,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,oy(t,i),r,s,a,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nE.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nA(nE.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ng(t),this.aa=!1):nm("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}let lI="RemoteStore";class l_{constructor(e,t,i,r,n){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=n,this.Aa.Oo(e=>{i.enqueueAndForget(async()=>{lM(this)&&(nm(lI,"Restarting streams for network reachability change."),await async function(e){e.Ea.add(4),await lC(e),e.Ra.set("Unknown"),e.Ea.delete(4),await lS(e)}(this))})}),this.Ra=new lT(i,r)}}async function lS(e){if(lM(e))for(let t of e.da)await t(!0)}async function lC(e){for(let t of e.da)await t(!1)}function lk(e,t){e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),lO(e)?lD(e):lX(e).O_()&&lR(e,t))}function lN(e,t){let i=lX(e);e.Ia.delete(t),i.O_()&&lP(e,t),0===e.Ia.size&&(i.O_()?i.L_():lM(e)&&e.Ra.set("Unknown"))}function lR(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nZ.min())>0){let i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}lX(e).Y_(t)}function lP(e,t){e.Va.Ue(t),lX(e).Z_(t)}function lD(e){e.Va=new os({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),lX(e).start(),e.Ra.ua()}function lO(e){return lM(e)&&!lX(e).x_()&&e.Ia.size>0}function lM(e){return 0===e.Ea.size}async function lL(e){e.Ra.set("Online")}async function lj(e){e.Ia.forEach((t,i)=>{lR(e,t)})}async function lV(e,t){e.Va=void 0,lO(e)?(e.Ra.ha(t),lD(e)):e.Ra.set("Unknown")}async function lF(e,t,i){if(e.Ra.set("Online"),t instanceof or&&2===t.state&&t.cause)try{await async function(e,t){let i=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,i),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(i){nm(lI,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await lU(e,i)}else if(t instanceof ot?e.Va.Ze(t):t instanceof oi?e.Va.st(t):e.Va.tt(t),!i.isEqual(nZ.min()))try{let t,r=await o9(e.localStore);i.compareTo(r)>=0&&await ((t=e.Va.Tt(i)).targetChanges.forEach((t,r)=>{if(t.resumeToken.approximateByteSize()>0){let n=e.Ia.get(r);n&&e.Ia.set(r,n.withResumeToken(t.resumeToken,i))}}),t.targetMismatches.forEach((t,i)=>{let r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(so.EMPTY_BYTE_STRING,r.snapshotVersion)),lP(e,t);let n=new oC(r.target,t,i,r.sequenceNumber);lR(e,n)}),e.remoteSyncer.applyRemoteEvent(t))}catch(t){nm(lI,"Failed to raise snapshot:",t),await lU(e,t)}}async function lU(e,t,i){if(!n3(t))throw t;e.Ea.add(1),await lC(e),e.Ra.set("Offline"),i||(i=()=>o9(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nm(lI,"Retrying IndexedDB access"),await i(),e.Ea.delete(1),await lS(e)})}function lB(e,t){return t().catch(i=>lU(e,i,t))}async function lz(e){var t;let i=lJ(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:-1;for(;lM(t=e)&&t.Ta.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}(e.localStore,r);if(null===t){0===e.Ta.length&&i.L_();break}r=t.batchId,function(e,t){e.Ta.push(t);let i=lJ(e);i.O_()&&i.X_&&i.ea(t.mutations)}(e,t)}catch(t){await lU(e,t)}lq(e)&&l$(e)}function lq(e){return lM(e)&&!lJ(e).x_()&&e.Ta.length>0}function l$(e){lJ(e).start()}async function lH(e){lJ(e).ra()}async function lK(e){let t=lJ(e);for(let i of e.Ta)t.ea(i.mutations)}async function lW(e,t,i){let r=e.Ta.shift(),n=a0.from(r,t,i);await lB(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await lz(e)}async function lG(e,t){t&&lJ(e).X_&&await async function(e,t){var i;if(function(e){switch(e){case nE.OK:return nw(64938);case nE.CANCELLED:case nE.UNKNOWN:case nE.DEADLINE_EXCEEDED:case nE.RESOURCE_EXHAUSTED:case nE.INTERNAL:case nE.UNAVAILABLE:case nE.UNAUTHENTICATED:return!1;case nE.INVALID_ARGUMENT:case nE.NOT_FOUND:case nE.ALREADY_EXISTS:case nE.PERMISSION_DENIED:case nE.FAILED_PRECONDITION:case nE.ABORTED:case nE.OUT_OF_RANGE:case nE.UNIMPLEMENTED:case nE.DATA_LOSS:return!0;default:return nw(15467,{code:e})}}(i=t.code)&&i!==nE.ABORTED){let i=e.Ta.shift();lJ(e).B_(),await lB(e,()=>e.remoteSyncer.rejectFailedWrite(i.batchId,t)),await lz(e)}}(e,t),lq(e)&&l$(e)}async function lQ(e,t){e.asyncQueue.verifyOperationInProgress(),nm(lI,"RemoteStore received new credentials");let i=lM(e);e.Ea.add(3),await lC(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await lS(e)}async function lY(e,t){t?(e.Ea.delete(2),await lS(e)):t||(e.Ea.add(2),await lC(e),e.Ra.set("Unknown"))}function lX(e){var t,i,r;return e.ma||(t=e.datastore,i=e.asyncQueue,r={Xo:lL.bind(null,e),t_:lj.bind(null,e),r_:lV.bind(null,e),H_:lF.bind(null,e)},t.sa(),e.ma=new lb(i,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r),e.da.push(async t=>{t?(e.ma.B_(),lO(e)?lD(e):e.Ra.set("Unknown")):(await e.ma.stop(),e.Va=void 0)})),e.ma}function lJ(e){var t,i,r;return e.fa||(t=e.datastore,i=e.asyncQueue,r={Xo:()=>Promise.resolve(),t_:lH.bind(null,e),r_:lG.bind(null,e),ta:lK.bind(null,e),na:lW.bind(null,e)},t.sa(),e.fa=new lx(i,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r),e.da.push(async t=>{t?(e.fa.B_(),await lz(e)):(await e.fa.stop(),e.Ta.length>0&&(nm(lI,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class lZ{constructor(e,t,i,r,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=n,this.deferred=new nT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,n){let s=new lZ(e,t,Date.now()+i,r,n);return s.start(i),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nA(nE.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l0(e,t){if(ng("AsyncQueue",`${t}: ${e}`),n3(e))return new nA(nE.UNAVAILABLE,`${t}: ${e}`);throw e}class l1{static emptySet(e){return new l1(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||nq.comparator(t.key,i.key):(e,t)=>nq.comparator(e.key,t.key),this.keyedMap=av(),this.sortedSet=new se(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof l1)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=i.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let i=new l1;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class l2{constructor(){this.ga=new se(nq.comparator)}track(e){let t=e.doc.key,i=this.ga.get(t);i?0!==e.type&&3===i.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==i.type?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.ga=this.ga.remove(t):1===e.type&&2===i.type?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):nw(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,i)=>{e.push(i)}),e}}class l6{constructor(e,t,i,r,n,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=n,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,n){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new l6(e,t,l1.emptySet(t),s,i,r,!0,!1,n)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==i[e].type||!t[e].doc.isEqual(i[e].doc))return!1;return!0}}class l3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class l4{constructor(){this.queries=l5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){var e;let t;e=new nA(nE.ABORTED,"Firestore shutting down"),t=this.queries,this.queries=l5(),t.forEach((t,i)=>{for(let t of i.Sa)t.onError(e)})}}function l5(){return new am(e=>ac(e),ah)}async function l8(e,t){let i=3,r=t.query,n=e.queries.get(r);n?!n.ba()&&t.Da()&&(i=2):(n=new l3,i=+!t.Da());try{switch(i){case 0:n.wa=await e.onListen(r,!0);break;case 1:n.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(i){let e=l0(i,`Initialization of query '${ad(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,n),n.Sa.push(t),t.va(e.onlineState),n.wa&&t.Fa(n.wa)&&ut(e)}async function l7(e,t){let i=t.query,r=3,n=e.queries.get(i);if(n){let e=n.Sa.indexOf(t);e>=0&&(n.Sa.splice(e,1),0===n.Sa.length?r=+!t.Da():!n.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function l9(e,t){let i=!1;for(let r of t){let t=r.query,n=e.queries.get(t);if(n){for(let e of n.Sa)e.Fa(r)&&(i=!0);n.wa=r}}i&&ut(e)}function ue(e,t,i){let r=e.queries.get(t);if(r)for(let e of r.Sa)e.onError(i);e.queries.delete(t)}function ut(e){e.Ca.forEach(e=>{e.next()})}(C=S||(S={})).Ma="default",C.Cache="cache";class ui{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let i of e.docChanges)3!==i.type&&t.push(i);e=new l6(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){return!(e.fromCache&&this.Da())||(!this.options.qa||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=l6.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==S.Cache}}class ur{constructor(e){this.key=e}}class un{constructor(e){this.key=e}}class us{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=aA(),this.mutatedKeys=aA(),this.eu=ap(e),this.tu=new l1(this.eu)}get nu(){return this.Ya}ru(e,t){let i=t?t.iu:new l2,r=t?t.tu:this.tu,n=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1,o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{let u=r.get(e),h=af(this.query,t)?t:null,c=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations),f=!1;u&&h?u.data.isEqual(h.data)?c!==d&&(i.track({type:3,doc:h}),f=!0):this.su(u,h)||(i.track({type:2,doc:h}),f=!0,(o&&this.eu(h,o)>0||l&&0>this.eu(h,l))&&(a=!0)):!u&&h?(i.track({type:0,doc:h}),f=!0):u&&!h&&(i.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(h?(s=s.add(h),n=d?n.add(e):n.delete(e)):(s=s.delete(e),n=n.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),n=n.delete(e.key),i.track({type:1,doc:e})}return{tu:s,iu:i,Cs:a,mutatedKeys:n}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let n=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((e,t)=>{var i,r;let n;return i=e.type,r=t.type,(n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nw(20277,{Rt:e})}})(i)-n(r)||this.eu(e.doc,t.doc)}),this.ou(i),r=r??!1;let a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return(this.Za=o,0!==s.length||l)?{snapshot:new l6(this.query,e.tu,n,s,e.mutatedKeys,0===o,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new l2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=aA(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});let t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new un(e))}),this.Xa.forEach(i=>{e.has(i)||t.push(new ur(i))}),t}cu(e){this.Ya=e.Qs,this.Xa=aA();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return l6.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}let ua="SyncEngine";class uo{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ul{constructor(e){this.key=e,this.hu=!1}}class uu{constructor(e,t,i,r,n,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=n,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new am(e=>ac(e),ah),this.Iu=new Map,this.Eu=new Set,this.du=new se(nq.comparator),this.Au=new Map,this.Ru=new oW,this.Vu={},this.mu=new Map,this.fu=oM.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function uh(e,t,i=!0){let r,n=uR(e),s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await ud(n,t,i,!0),r}async function uc(e,t){let i=uR(e);await ud(i,t,!0,!1)}async function ud(e,t,i,r){var n,s;let a,o=await (n=e.localStore,s=ao(t),n.persistence.runTransaction("Allocate target","readwrite",e=>{let t;return n.Pi.getTargetData(e,s).next(i=>i?(t=i,n6.resolve(t)):n.Pi.allocateTargetId(e).next(i=>(t=new oC(s,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,t).next(()=>t))))}).then(e=>{let t=n.Ms.get(e.targetId);return(null===t||e.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(s,e.targetId)),e})),l=o.targetId,u=e.sharedClientState.addLocalQueryTarget(l,i);return r&&(a=await uf(e,t,l,"current"===u,o.resumeToken)),e.isPrimaryClient&&i&&lk(e.remoteStore,o),a}async function uf(e,t,i,r,n){e.pu=(t,i,r)=>(async function(e,t,i,r){let n=t.view.ru(i);n.Cs&&(n=await lt(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,n)));let s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(n,e.isPrimaryClient,s,a);return u_(e,t.targetId,o.au),o.snapshot})(e,t,i,r);let s=await lt(e.localStore,t,!0),a=new us(t,s.Qs),o=a.ru(s.documents),l=oe.createSynthesizedTargetChangeForCurrentChange(i,r&&"Offline"!==e.onlineState,n),u=a.applyChanges(o,e.isPrimaryClient,l);u_(e,i,u.au);let h=new uo(t,i,a);return e.Tu.set(t,h),e.Iu.has(i)?e.Iu.get(i).push(t):e.Iu.set(i,[t]),u.snapshot}async function up(e,t,i){let r=e.Tu.get(t),n=e.Iu.get(r.targetId);n.length>1?(e.Iu.set(r.targetId,n.filter(e=>!ah(e,t))),e.Tu.delete(t)):e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await le(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),i&&lN(e.remoteStore,r.targetId),uT(e,r.targetId)}).catch(n2)):(uT(e,r.targetId),await le(e.localStore,r.targetId,!0))}async function um(e,t){let i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),lN(e.remoteStore,i.targetId))}async function ug(e,t,i){var r,n,s;let a=((r=e).remoteStore.remoteSyncer.applySuccessfulWrite=ub.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=ux.bind(null,r),r);try{let e,r,o,l,u,h=await (n=a.localStore,o=nJ.now(),l=t.reduce((e,t)=>e.add(t.key),aA()),n.persistence.runTransaction("Locally write mutations","readwrite",i=>{let s=ag,a=aA();return n.Ns.getEntries(i,l).next(e=>{(s=e).forEach((e,t)=>{t.isValidDocument()||(a=a.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(i,s)).next(r=>{e=r;let s=[];for(let i of t){let t=function(e,t){let i=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),n=ak(r.transform,e||null);null!=n&&(null===i&&(i=sq.empty()),i.set(r.field,n))}return i||null}(i,e.get(i.key).overlayedDocument);null!=t&&s.push(new aW(i.key,t,function e(t){let i=[];return n7(t.fields,(t,r)=>{let n=new nz([t]);if(sF(r)){let t=e(r.mapValue).fields;if(0===t.length)i.push(n);else for(let e of t)i.push(n.child(e))}else i.push(n)}),new ss(i)}(t.value.mapValue),aU.exists(!0)))}return n.mutationQueue.addMutationBatch(i,o,s,t)}).next(t=>{r=t;let s=t.applyToLocalDocumentSet(e,a);return n.documentOverlayCache.saveOverlays(i,t.batchId,s)})}).then(()=>({batchId:r.batchId,changes:aw(e)})));a.sharedClientState.addPendingMutation(h.batchId),s=h.batchId,(u=a.Vu[a.currentUser.toKey()])||(u=new se(nO)),u=u.insert(s,i),a.Vu[a.currentUser.toKey()]=u,await uC(a,h.changes),await lz(a.remoteStore)}catch(t){let e=l0(t,"Failed to persist write");i.reject(e)}}async function uy(e,t){var i;try{let r,n,s=await (i=e.localStore,r=t.snapshotVersion,n=i.Ms,i.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{var s,a,o;let l,u,h=i.Ns.newChangeBuffer({trackRemovals:!0});n=i.Ms;let c=[];t.targetChanges.forEach((s,a)=>{var o;let l=n.get(a);if(!l)return;c.push(i.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>i.Pi.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(so.EMPTY_BYTE_STRING,nZ.min()).withLastLimboFreeSnapshotVersion(nZ.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),n=n.insert(a,u),o=u,(0===l.resumeToken.approximateByteSize()||o.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&c.push(i.Pi.updateTargetData(e,u))});let d=ag,f=aA();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&c.push(i.persistence.referenceDelegate.updateLimboDocument(e,r))}),c.push((s=e,a=h,o=t.documentUpdates,l=aA(),u=aA(),o.forEach(e=>l=l.add(e)),a.getEntries(s,l).next(e=>{let t=ag;return o.forEach((i,r)=>{let n=e.get(i);r.isFoundDocument()!==n.isFoundDocument()&&(u=u.add(i)),r.isNoDocument()&&r.version.isEqual(nZ.min())?(a.removeEntry(i,r.readTime),t=t.insert(i,r)):!n.isValidDocument()||r.version.compareTo(n.version)>0||0===r.version.compareTo(n.version)&&n.hasPendingWrites?(a.addEntry(r),t=t.insert(i,r)):nm(o5,"Ignoring outdated watch update for ",i,". Current version:",n.version," Watch version:",r.version)}),{ks:t,qs:u}})).next(e=>{d=e.ks,f=e.qs})),!r.isEqual(nZ.min())){let t=i.Pi.getLastRemoteSnapshotVersion(e).next(t=>i.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));c.push(t)}return n6.waitFor(c).next(()=>h.apply(e)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,d,f)).next(()=>d)}).then(e=>(i.Ms=n,e)));t.targetChanges.forEach((t,i)=>{let r=e.Au.get(i);r&&(nx(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?r.hu=!0:t.modifiedDocuments.size>0?nx(r.hu,14607):t.removedDocuments.size>0&&(nx(r.hu,42227),r.hu=!1))}),await uC(e,s,t)}catch(e){await n2(e)}}function uv(e,t,i){var r;if(e.isPrimaryClient&&0===i||!e.isPrimaryClient&&1===i){let i,n=[];e.Tu.forEach((e,i)=>{let r=i.view.va(t);r.snapshot&&n.push(r.snapshot)}),(r=e.eventManager).onlineState=t,i=!1,r.queries.forEach((e,r)=>{for(let e of r.Sa)e.va(t)&&(i=!0)}),i&&ut(r),n.length&&e.Pu.H_(n),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function uw(e,t,i){e.sharedClientState.updateQueryState(t,"rejected",i);let r=e.Au.get(t),n=r&&r.key;if(n){let i=new se(nq.comparator);i=i.insert(n,s$.newNoDocument(n,nZ.min()));let r=aA().add(n),s=new a9(nZ.min(),new Map,new se(nO),i,r);await uy(e,s),e.du=e.du.remove(n),e.Au.delete(t),uS(e)}else await le(e.localStore,t,!1).then(()=>uT(e,t,i)).catch(n2)}async function ub(e,t){var i;let r=t.batch.batchId;try{let n=await (i=e.localStore,i.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let r,n,s,a=t.batch.keys(),o=i.Ns.newChangeBuffer({trackRemovals:!0});return(n=(r=t.batch).keys(),s=n6.resolve(),n.forEach(i=>{s=s.next(()=>o.getEntry(e,i)).next(e=>{let n=t.docVersions.get(i);nx(null!==n,48541),0>e.version.compareTo(n)&&(r.applyToRemoteDocument(e,t),e.isValidDocument()&&(e.setReadTime(t.commitVersion),o.addEntry(e)))})}),s.next(()=>i.mutationQueue.removeMutationBatch(e,r))).next(()=>o.apply(e)).next(()=>i.mutationQueue.performConsistencyCheck(e)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(e,a,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=aA();for(let i=0;i<e.mutationResults.length;++i)e.mutationResults[i].transformResults.length>0&&(t=t.add(e.batch.mutations[i].key));return t}(t))).next(()=>i.localDocuments.getDocuments(e,a))}));uA(e,r,null),uE(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await uC(e,n)}catch(e){await n2(e)}}async function ux(e,t,i){var r;try{let n=await (r=e.localStore,r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(nx(null!==t,37113),i=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>r.localDocuments.getDocuments(e,i))}));uA(e,t,i),uE(e,t),e.sharedClientState.updateMutationState(t,"rejected",i),await uC(e,n)}catch(e){await n2(e)}}function uE(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function uA(e,t,i){let r=e.Vu[e.currentUser.toKey()];if(r){let n=r.get(t);n&&(i?n.reject(i):n.resolve(),r=r.remove(t)),e.Vu[e.currentUser.toKey()]=r}}function uT(e,t,i=null){for(let r of(e.sharedClientState.removeLocalQueryTarget(t),e.Iu.get(t)))e.Tu.delete(r),i&&e.Pu.yu(r,i);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||uI(e,t)})}function uI(e,t){e.Eu.delete(t.path.canonicalString());let i=e.du.get(t);null!==i&&(lN(e.remoteStore,i),e.du=e.du.remove(t),e.Au.delete(i),uS(e))}function u_(e,t,i){for(let r of i)r instanceof ur?(e.Ru.addReference(r.key,t),function(e,t){let i=t.key,r=i.path.canonicalString();e.du.get(i)||e.Eu.has(r)||(nm(ua,"New document in limbo: "+i),e.Eu.add(r),uS(e))}(e,r)):r instanceof un?(nm(ua,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||uI(e,r.key)):nw(19791,{wu:r})}function uS(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let i=new nq(nU.fromString(t)),r=e.fu.next();e.Au.set(r,new ul(i)),e.du=e.du.insert(i,r),lk(e.remoteStore,new oC(ao(new ar(i.path)),r,"TargetPurposeLimboResolution",n4.ce))}}async function uC(e,t,i){let r=[],n=[],s=[];e.Tu.isEmpty()||(e.Tu.forEach((a,o)=>{s.push(e.pu(o,t,i).then(t=>{if((t||i)&&e.isPrimaryClient){let r=t?!t.fromCache:i?.targetChanges.get(o.targetId)?.current;e.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(t){r.push(t);let e=o6.As(o.targetId,t);n.push(e)}}))}),await Promise.all(s),e.Pu.H_(r),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",i=>n6.forEach(t,t=>n6.forEach(t.Es,r=>e.persistence.referenceDelegate.addReference(i,t.targetId,r)).next(()=>n6.forEach(t.ds,r=>e.persistence.referenceDelegate.removeReference(i,t.targetId,r)))))}catch(e){if(!n3(e))throw e;nm(o5,"Failed to update sequence numbers: "+e)}for(let i of t){let t=i.targetId;if(!i.fromCache){let i=e.Ms.get(t),r=i.snapshotVersion,n=i.withLastLimboFreeSnapshotVersion(r);e.Ms=e.Ms.insert(t,n)}}}(e.localStore,n))}async function uk(e,t){if(!e.currentUser.isEqual(t)){nm(ua,"User change. New user:",t.toKey());let i=await o7(e.localStore,t);e.currentUser=t,e.mu.forEach(e=>{e.forEach(e=>{e.reject(new nA(nE.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await uC(e,i.Ls)}}function uN(e,t){let i=e.Au.get(t);if(i&&i.hu)return aA().add(i.key);{let i=aA(),r=e.Iu.get(t);if(!r)return i;for(let t of r){let r=e.Tu.get(t);i=i.unionWith(r.view.nu)}return i}}function uR(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=uy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uw.bind(null,e),e.Pu.H_=l9.bind(null,e.eventManager),e.Pu.yu=ue.bind(null,e.eventManager),e}class uP{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){var t,i;return t=this.persistence,i=new o4,new o8(t,i,e.initialUser,this.serializer)}Cu(e){return new oZ(o1.mi,this.serializer)}Du(e){return new lr}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uP.provider={build:()=>new uP};class uD extends uP{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){return nx(this.persistence.referenceDelegate instanceof o2,46915),new oF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Cu(e){let t=void 0!==this.cacheSizeBytes?oO.withCacheSize(this.cacheSizeBytes):oO.DEFAULT;return new oZ(e=>o2.mi(e,t),this.serializer)}}class uO{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=uk.bind(null,this.syncEngine),await lY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new l4}createDatastore(e){var t;let i=lg(e.databaseInfo.databaseId),r=new lp(e.databaseInfo);return t=e.authCredentials,new lA(t,e.appCheckCredentials,r,i)}createRemoteStore(e){var t,i;return t=this.localStore,i=this.datastore,new l_(t,i,e.asyncQueue,e=>uv(this.syncEngine,e,0),la.v()?new la:new ln)}createSyncEngine(e,t){var i,r,n,s,a,o;let l;return i=this.localStore,r=this.remoteStore,n=this.eventManager,s=this.sharedClientState,a=e.initialUser,o=e.maxConcurrentLimboResolutions,l=new uu(i,r,n,s,a,o),t&&(l.gu=!0),l}async terminate(){await async function(e){nm(lI,"RemoteStore shutting down."),e.Ea.add(5),await lC(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uO.provider={build:()=>new uO};class uM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ng("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}let uL="FirestoreClient";class uj{constructor(e,t,i,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=nc.UNAUTHENTICATED,this.clientId=nD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=n,this.authCredentials.start(i,async e=>{nm(uL,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(i,e=>(nm(uL,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){let t=l0(i,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function uV(e,t){e.asyncQueue.verifyOperationInProgress(),nm(uL,"Initializing OfflineComponentProvider");let i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await o7(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uF(e,t){e.asyncQueue.verifyOperationInProgress();let i=await uU(e);nm(uL,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(e=>lQ(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,i)=>lQ(t.remoteStore,i)),e._onlineComponents=t}async function uU(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nm(uL,"Using user provided OfflineComponentProvider");try{await uV(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===nE.FAILED_PRECONDITION||t.code===nE.UNIMPLEMENTED:!("u">typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;ny("Error using user provided cache. Falling back to memory cache: "+t),await uV(e,new uP)}}else nm(uL,"Using default OfflineComponentProvider"),await uV(e,new uD(void 0));return e._offlineComponents}async function uB(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nm(uL,"Using user provided OnlineComponentProvider"),await uF(e,e._uninitializedComponentsProvider._online)):(nm(uL,"Using default OnlineComponentProvider"),await uF(e,new uO))),e._onlineComponents}async function uz(e){let t=await uB(e),i=t.eventManager;return i.onListen=uh.bind(null,t.syncEngine),i.onUnlisten=up.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=uc.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=um.bind(null,t.syncEngine),i}function uq(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let u$=new Map,uH="firestore.googleapis.com";class uK{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new nA(nE.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uH,this.ssl=!0}else this.host=e.host,this.ssl=e.ssl??!0;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nA(nE.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,i,r){if(!0===t&&!0===r)throw new nA(nE.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uq(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nA(nE.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new nA(nE.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new nA(nE.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,i;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,t.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uW{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uK({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nA(nE.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nA(nE.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uK(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new n_;switch(e.type){case"firstParty":return new nN(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nA(nE.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=u$.get(this))&&(nm("ComponentProvider","Removing Datastore"),u$.delete(this),e.terminate()),Promise.resolve()}}class uG{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new uG(this.firestore,e,this._query)}}class uQ{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uY(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uQ(this.firestore,e,this._key)}toJSON(){return{type:uQ._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(nX(t,uQ._jsonSchema))return new uQ(e,i||null,new nq(nU.fromString(t.referencePath)))}}uQ._jsonSchemaVersion="firestore/documentReference/1.0",uQ._jsonSchema={type:nY("string",uQ._jsonSchemaVersion),referencePath:nY("string")};class uY extends uG{constructor(e,t,i){super(e,t,new ar(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new uQ(this.firestore,null,new nq(e))}withConverter(e){return new uY(this.firestore,e,this._path)}}function uX(e,t,...i){if(e=ec(e),n$("collection","path",t),e instanceof uW){let r=nU.fromString(t,...i);return nK(r),new uY(e,null,r)}{if(!(e instanceof uQ||e instanceof uY))throw new nA(nE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(nU.fromString(t,...i));return nK(r),new uY(e.firestore,null,r)}}function uJ(e,t,...i){if(e=ec(e),1==arguments.length&&(t=nD.newId()),n$("doc","path",t),e instanceof uW){let r=nU.fromString(t,...i);return nH(r),new uQ(e,null,new nq(r))}{if(!(e instanceof uQ||e instanceof uY))throw new nA(nE.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(nU.fromString(t,...i));return nH(r),new uQ(e.firestore,e instanceof uY?e.converter:null,new nq(r))}}let uZ="AsyncQueue";class u0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ly(this,"async_queue_retry"),this._c=()=>{let e=lm();e&&nm(uZ,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=lm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=lm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new nT;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!n3(e))throw e;nm(uZ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ng("INTERNAL UNHANDLED ERROR: ",u1(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=lZ.createAndSchedule(this,e,t,i,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&nw(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{for(let t of(this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.tc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u1(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function u2(e){if("object"!=typeof e||null===e)return!1;for(let t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}class u6 extends uW{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new u0,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new u0(e),this._firestoreClient=void 0,await e}}}function u3(e){if(e._terminated)throw new nA(nE.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,i,r;let n,s=e._freezeSettings(),a=(t=e._databaseId,i=e._app?.options.appId||"",new sw(t,i,e._persistenceKey,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,uq(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator));e._componentsProvider||s.localCache?._offlineComponentProvider&&s.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new uj(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&(r=e._componentsProvider,n=r?._online.build(),{_offline:r?._offline.build(n),_online:n}))}(e),e._firestoreClient}class u4{constructor(e){this._byteString=e}static fromBase64String(e){try{return new u4(so.fromBase64String(e))}catch(e){throw new nA(nE.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new u4(so.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:u4._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nX(e,u4._jsonSchema))return u4.fromBase64String(e.bytes)}}u4._jsonSchemaVersion="firestore/bytes/1.0",u4._jsonSchema={type:nY("string",u4._jsonSchemaVersion),bytes:nY("string")};class u5{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nA(nE.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nz(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class u8{constructor(e){this._methodName=e}}class u7{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nA(nE.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nA(nE.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nO(this._lat,e._lat)||nO(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:u7._jsonSchemaVersion}}static fromJSON(e){if(nX(e,u7._jsonSchema))return new u7(e.latitude,e.longitude)}}u7._jsonSchemaVersion="firestore/geoPoint/1.0",u7._jsonSchema={type:nY("string",u7._jsonSchemaVersion),latitude:nY("number"),longitude:nY("number")};class u9{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:u9._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nX(e,u9._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new u9(e.vectorValues);throw new nA(nE.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}u9._jsonSchemaVersion="firestore/vectorValue/1.0",u9._jsonSchema={type:nY("string",u9._jsonSchemaVersion),vectorValues:nY("object")};let he=/^__.*__$/;class ht{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new aW(e,this.data,this.fieldMask,t,this.fieldTransforms):new aK(e,this.data,t,this.fieldTransforms)}}class hi{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new aW(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hr(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nw(40011,{Ac:e})}}class hn{constructor(e,t,i,r,n,s){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===n&&this.Rc(),this.fieldTransforms=n||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hn({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){let t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(hr(this.Ac)&&he.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hs{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||lg(e)}Cc(e,t,i,r=!1){return new hn({Ac:e,methodName:t,Dc:i,path:nz.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ha(e){let t=e._freezeSettings(),i=lg(e._databaseId);return new hs(e._databaseId,!!t.ignoreUndefinedProperties,i)}function ho(e,t,i,r,n,s={}){let a,o,l=e.Cc(s.merge||s.mergeFields?2:0,t,i,n);hp("Data must be an object, but it was:",l,r);let u=hd(r,l);if(s.merge)a=new ss(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let r of s.mergeFields){let n=hm(t,r,i);if(!l.contains(n))throw new nA(nE.INVALID_ARGUMENT,`Field '${n}' is specified in your field mask but missing from your input data.`);hw(e,n)||e.push(n)}a=new ss(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new ht(new sq(u),a,o)}class hl extends u8{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hl}}class hu extends u8{_toFieldTransform(e){return new aV(e.path,new aN)}isEqual(e){return e instanceof hu}}class hh extends u8{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){let t=new aM(e.serializer,aS(e.serializer,this.Fc));return new aV(e.path,t)}isEqual(e){return e instanceof hh&&this.Fc===e.Fc}}function hc(e,t){if(hf(e=ec(e)))return hp("Unsupported field value:",t,e),hd(e,t);if(e instanceof u8)return function(e,t){if(!hr(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let i=e._toFieldTransform(t);i&&t.fieldTransforms.push(i)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");let i=[],r=0;for(let n of e){let e=hc(n,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),i.push(e),r++}return{arrayValue:{values:i}}}return function(e,t){if(null===(e=ec(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return aS(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let i=nJ.fromDate(e);return{timestampValue:of(t.serializer,i)}}if(e instanceof nJ){let i=new nJ(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:of(t.serializer,i)}}if(e instanceof u7)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof u4)return{bytesValue:op(t.serializer,e._byteString)};if(e instanceof uQ){let i=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(i))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:og(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof u9)return{mapValue:{fields:{[sE]:{stringValue:sI},[s_]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return aI(t.serializer,e)})}}}}};throw t.Sc(`Unsupported field value: ${nG(e)}`)}(e,t)}function hd(e,t){let i={};return n9(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):n7(e,(e,r)=>{let n=hc(r,t.mc(e));null!=n&&(i[e]=n)}),{mapValue:{fields:i}}}function hf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nJ||e instanceof u7||e instanceof u4||e instanceof uQ||e instanceof u8||e instanceof u9)}function hp(e,t,i){if(!hf(i)||!nW(i)){let r=nG(i);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function hm(e,t,i){if((t=ec(t))instanceof u5)return t._internalPath;if("string"==typeof t)return hy(e,t);throw hv("Field path arguments must be of type string or ",e,!1,void 0,i)}let hg=RegExp("[~\\*/\\[\\]]");function hy(e,t,i){if(t.search(hg)>=0)throw hv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new u5(...t.split("."))._internalPath}catch(r){throw hv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function hv(e,t,i,r,n){let s=r&&!r.isEmpty(),a=void 0!==n,o=`Function ${t}() called with invalid data`;i&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${n}`),l+=")"),new nA(nE.INVALID_ARGUMENT,o+e+l)}function hw(e,t){return e.some(e=>e.isEqual(t))}class hb{constructor(e,t,i,r,n){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new uQ(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new hx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(hE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hx extends hb{data(){return super.data()}}function hE(e,t){return"string"==typeof t?hy(e,t):t instanceof u5?t._internalPath:t._delegate._internalPath}function hA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nA(nE.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hT{}class hI extends hT{}function h_(e,t,...i){let r=[];for(let n of(t instanceof hT&&r.push(t),function(e){let t=e.filter(e=>e instanceof hk).length,i=e.filter(e=>e instanceof hS).length;if(t>1||t>0&&i>0)throw new nA(nE.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r=r.concat(i)),r))e=n._apply(e);return e}class hS extends hI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new hS(e,t,i)}_apply(e){let t=this._parse(e);return hP(e._query,t),new uG(e.firestore,e.converter,al(e._query,t))}_parse(e){let t=ha(e.firestore);return function(e,t,i,r,n,s,a){let o;if(n.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nA(nE.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){hR(a,s);let t=[];for(let i of a)t.push(hN(r,e,i));o={arrayValue:{values:t}}}else o=hN(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||hR(a,s),o=function(e,t,i,r=!1){return hc(i,e.Cc(r?4:3,t))}(i,t,a,"in"===s||"not-in"===s);return sY.create(n,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hC(e,t,i){let r=hE("where",e);return hS._create(r,t,i)}class hk extends hT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hk(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:sX.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let i=e;for(let e of t.getFlattenedFilters())hP(i,e),i=al(i,e)}(e._query,t),new uG(e.firestore,e.converter,al(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function hN(e,t,i){if("string"==typeof(i=ec(i))){if(""===i)throw new nA(nE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!as(t)&&-1!==i.indexOf("/"))throw new nA(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);let r=t.path.child(nU.fromString(i));if(!nq.isDocumentKey(r))throw new nA(nE.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sO(e,new nq(r))}if(i instanceof uQ)return sO(e,i._key);throw new nA(nE.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nG(i)}.`)}function hR(e,t){if(!Array.isArray(e)||0===e.length)throw new nA(nE.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hP(e,t){let i=function(e,t){for(let i of e)for(let e of i.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new nA(nE.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nA(nE.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class hD{convertValue(e,t="none"){switch(sS(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw nw(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return n7(e,(e,r)=>{i[e]=this.convertValue(r,t)}),i}convertVectorValue(e){return new u9(e.fields?.[s_].arrayValue?.values?.map(e=>sh(e.doubleValue)))}convertGeoPoint(e){return new u7(sh(e.latitude),sh(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=sy(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sv(e));default:return null}}convertTimestamp(e){let t=su(e);return new nJ(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=nU.fromString(e);nx(oS(i),9688,{name:e});let r=new sx(i.get(1),i.get(3)),n=new nq(i.popFirst(5));return r.isEqual(t)||ng(`Document ${n} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),n}}function hO(e,t,i){return e?i&&(i.merge||i.mergeFields)?e.toFirestore(t,i):e.toFirestore(t):t}class hM{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hL extends hb{constructor(e,t,i,r,n,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(hE("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nA(nE.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=hL._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}hL._jsonSchemaVersion="firestore/documentSnapshot/1.0",hL._jsonSchema={type:nY("string",hL._jsonSchemaVersion),bundleSource:nY("string","DocumentSnapshot"),bundleName:nY("string"),bundle:nY("string")};class hj extends hL{data(e={}){return super.data(e)}}class hV{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hM(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new hj(this._firestore,this._userDataWriter,i.key,i,new hM(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nA(nE.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(i=>{let r=new hj(e._firestore,e._userDataWriter,i.doc.key,i.doc,new hM(e._snapshot.mutatedKeys.has(i.doc.key),e._snapshot.fromCache),e.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let i=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let r=new hj(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hM(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),n=-1,s=-1;return 0!==t.type&&(n=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(s=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nw(61501,{type:e})}}(t.type),doc:r,oldIndex:n,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nA(nE.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=hV._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),i.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}hV._jsonSchemaVersion="firestore/querySnapshot/1.0",hV._jsonSchema={type:nY("string",hV._jsonSchemaVersion),bundleSource:nY("string","QuerySnapshot"),bundleName:nY("string"),bundle:nY("string")};class hF extends hD{constructor(e){super(),this.firestore=e}convertBytes(e){return new u4(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new uQ(this.firestore,null,t)}}function hU(e){e=nQ(e,uG);let t=nQ(e.firestore,u6),i=u3(t),r=new hF(t);return hA(e._query),(function(e,t,i={}){let r=new nT;return e.asyncQueue.enqueueAndForget(async()=>{var n,s;let a,o;return n=await uz(e),s=e.asyncQueue,o=new ui(t,a=new uM({next:e=>{a.Nu(),s.enqueueAndForget(()=>l7(n,o)),e.fromCache&&"server"===i.source?r.reject(new nA(nE.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(e)},error:e=>r.reject(e)}),{includeMetadataChanges:!0,qa:!0}),l8(n,o)}),r.promise})(i,e._query).then(i=>new hV(t,r,e,i))}function hB(e,t,i){e=nQ(e,uQ);let r=nQ(e.firestore,u6),n=hO(e.converter,t,i);return hK(r,[ho(ha(r),"setDoc",e._key,n,null!==e.converter,i).toMutation(e._key,aU.none())])}function hz(e,t,i,...r){var n,s,a;let o,l,u;e=nQ(e,uQ);let h=nQ(e.firestore,u6),c=ha(h);return hK(h,[("string"==typeof(t=ec(t))||t instanceof u5?function(e,t,i,r,n,s){let a=e.Cc(1,t,i),o=[hm(t,r,i)],l=[n];if(s.length%2!=0)throw new nA(nE.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(hm(t,s[e])),l.push(s[e+1]);let u=[],h=sq.empty();for(let e=o.length-1;e>=0;--e)if(!hw(u,o[e])){let t=o[e],i=l[e];i=ec(i);let r=a.yc(t);if(i instanceof hl)u.push(t);else{let e=hc(i,r);null!=e&&(u.push(t),h.set(t,e))}}return new hi(h,new ss(u),a.fieldTransforms)}(c,"updateDoc",e._key,t,i,r):(n="updateDoc",s=e._key,a=t,hp("Data must be an object, but it was:",o=c.Cc(1,n,s),a),l=[],u=sq.empty(),n7(a,(e,t)=>{let i=hy(n,e,s);t=ec(t);let r=o.yc(i);if(t instanceof hl)l.push(i);else{let e=hc(t,r);null!=e&&(l.push(i),u.set(i,e))}}),new hi(u,new ss(l),o.fieldTransforms))).toMutation(e._key,aU.exists(!0))])}function hq(e){return hK(nQ(e.firestore,u6),[new aX(e._key,aU.none())])}function h$(e,t){let i=nQ(e.firestore,u6),r=uJ(e),n=hO(e.converter,t);return hK(i,[ho(ha(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,aU.exists(!1))]).then(()=>r)}function hH(e,...t){var i;let r,n,s,a,o;e=ec(e);let l={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof t[0]||u2(t[u])||(l=t[u++]);let h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(u2(t[u])){let e=t[u];t[u]=e.next?.bind(e),t[u+1]=e.error?.bind(e),t[u+2]=e.complete?.bind(e)}if(e instanceof uQ)n=nQ(e.firestore,u6),s=new ar(e._key.path),r={next:i=>{var r,s,a;let o,l;t[u]&&t[u]((r=n,s=e,o=(a=i).docs.get(s._key),l=new hF(r),new hL(r,l,s._key,o,new hM(a.hasPendingWrites,a.fromCache),s.converter)))},error:t[u+1],complete:t[u+2]};else{let i=nQ(e,uG);n=nQ(i.firestore,u6),s=i._query;let a=new hF(n);r={next:e=>{t[u]&&t[u](new hV(n,a,i,e))},error:t[u+1],complete:t[u+2]},hA(e._query)}return i=u3(n),o=new ui(s,a=new uM(r),h),i.asyncQueue.enqueueAndForget(async()=>l8(await uz(i),o)),()=>{a.Nu(),i.asyncQueue.enqueueAndForget(async()=>l7(await uz(i),o))}}function hK(e,t){var i;let r;return i=u3(e),r=new nT,i.asyncQueue.enqueueAndForget(async()=>ug(await uB(i).then(e=>e.syncEngine),t,r)),r.promise}function hW(){return new hu("serverTimestamp")}function hG(e){return new hh("increment",e)}new WeakMap,function(e=!0){nd=e6,eK(new ed("firestore",(t,{instanceIdentifier:i,options:r})=>{let n=t.getProvider("app").getImmediate(),s=new u6(new nC(t.getProvider("auth-internal")),new nP(n,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nA(nE.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sx(e.options.projectId,t)}(n,i),n);return r={useFetchStreams:e,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),e9(nu,nh,void 0),e9(nu,nh,"esm2020")}();let hQ="@firebase/installations",hY="0.6.19",hX=`w:${hY}`,hJ="FIS_v2",hZ=new et("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function h0(e){return e instanceof ee&&e.code.includes("request-failed")}function h1({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function h2(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function h6(e,t){let i=(await t.json()).error;return hZ.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function h3({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function h4(e){let t=await e();return t.status>=500&&t.status<600?e():t}async function h5({appConfig:e,heartbeatServiceProvider:t},{fid:i}){let r=h1(e),n=h3(e),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let a={method:"POST",headers:n,body:JSON.stringify({fid:i,authVersion:hJ,appId:e.appId,sdkVersion:hX})},o=await h4(()=>fetch(r,a));if(o.ok){let e=await o.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:h2(e.authToken)}}throw await h6("Create Installation",o)}function h8(e){return new Promise(t=>{setTimeout(t,e)})}let h7=/^[cdef][\w-]{21}$/;function h9(e){return`${e.appName}!${e.appId}`}let ce=new Map;function ct(e,t){var i,r;let n,s=h9(e);ci(s,t),i=s,r=t,(n=(!cr&&"BroadcastChannel"in self&&((cr=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{ci(e.data.key,e.data.fid)}),cr))&&n.postMessage({key:i,fid:r}),0===ce.size&&cr&&(cr.close(),cr=null)}function ci(e,t){let i=ce.get(e);if(i)for(let e of i)e(t)}let cr=null,cn="firebase-installations-store",cs=null;function ca(){return cs||(cs=eN("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(cn)}})),cs}async function co(e,t){let i=h9(e),r=(await ca()).transaction(cn,"readwrite"),n=r.objectStore(cn),s=await n.get(i);return await n.put(t,i),await r.done,s&&s.fid===t.fid||ct(e,t.fid),t}async function cl(e){let t=h9(e),i=(await ca()).transaction(cn,"readwrite");await i.objectStore(cn).delete(t),await i.done}async function cu(e,t){let i=h9(e),r=(await ca()).transaction(cn,"readwrite"),n=r.objectStore(cn),s=await n.get(i),a=t(s);return void 0===a?await n.delete(i):await n.put(a,i),await r.done,a&&(!s||s.fid!==a.fid)&&ct(e,a.fid),a}async function ch(e){let t,i=await cu(e.appConfig,i=>{let r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(hZ.create("app-offline"))};let i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=cc(e,i);return{installationEntry:i,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:cd(e)}:{installationEntry:t}}(e,cp(i||{fid:function(){try{var e;let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let i=(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return h7.test(i)?i:""}catch{return""}}(),registrationStatus:0}));return t=r.registrationPromise,r.installationEntry});return""===i.fid?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}async function cc(e,t){try{let i=await h5(e,t);return co(e.appConfig,i)}catch(i){throw h0(i)&&409===i.customData.serverCode?await cl(e.appConfig):await co(e.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function cd(e){let t=await cf(e.appConfig);for(;1===t.registrationStatus;)await h8(100),t=await cf(e.appConfig);if(0===t.registrationStatus){let{installationEntry:t,registrationPromise:i}=await ch(e);return i||t}return t}function cf(e){return cu(e,e=>{if(!e)throw hZ.create("installation-not-found");return cp(e)})}function cp(e){var t;return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function cm({appConfig:e,heartbeatServiceProvider:t},i){let r=function(e,{fid:t}){return`${h1(e)}/${t}/authTokens:generate`}(e,i),n=function(e,{refreshToken:t}){var i;let r=h3(e);return r.append("Authorization",(i=t,`${hJ} ${i}`)),r}(e,i),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let a={method:"POST",headers:n,body:JSON.stringify({installation:{sdkVersion:hX,appId:e.appId}})},o=await h4(()=>fetch(r,a));if(o.ok)return h2(await o.json());throw await h6("Generate Auth Token",o)}async function cg(e,t=!1){let i,r=await cu(e.appConfig,r=>{var n,s,a;let o;if(!cb(r))throw hZ.create("not-registered");let l=r.authToken;if(!t&&2===(n=l).requestStatus&&(s=n,!((o=Date.now())<s.creationTime)&&!(s.creationTime+s.expiresIn<o+36e5)))return r;if(1===l.requestStatus)return i=cy(e,t),r;{let t;if(!navigator.onLine)throw hZ.create("app-offline");let n=(a=r,t={requestStatus:1,requestTime:Date.now()},{...a,authToken:t});return i=cw(e,n),n}});return i?await i:r.authToken}async function cy(e,t){let i=await cv(e.appConfig);for(;1===i.authToken.requestStatus;)await h8(100),i=await cv(e.appConfig);let r=i.authToken;return 0===r.requestStatus?cg(e,t):r}function cv(e){return cu(e,e=>{var t;if(!cb(e))throw hZ.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?{...e,authToken:{requestStatus:0}}:e})}async function cw(e,t){try{let i=await cm(e,t),r={...t,authToken:i};return await co(e.appConfig,r),i}catch(i){if(h0(i)&&(401===i.customData.serverCode||404===i.customData.serverCode))await cl(e.appConfig);else{let i={...t,authToken:{requestStatus:0}};await co(e.appConfig,i)}throw i}}function cb(e){return void 0!==e&&2===e.registrationStatus}async function cx(e){let{installationEntry:t,registrationPromise:i}=await ch(e);return i?i.catch(console.error):cg(e).catch(console.error),t.fid}async function cE(e,t=!1){return await cA(e),(await cg(e,t)).token}async function cA(e){let{registrationPromise:t}=await ch(e);t&&await t}function cT(e){return hZ.create("missing-app-config-values",{valueName:e})}let cI="installations";eK(new ed(cI,e=>{let t=e.getProvider("app").getImmediate(),i=function(e){if(!e||!e.options)throw cT("App Configuration");if(!e.name)throw cT("App Name");for(let t of["projectId","apiKey","appId"])if(!e.options[t])throw cT(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r=eW(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},"PUBLIC")),eK(new ed("installations-internal",e=>{let t=eW(e.getProvider("app").getImmediate(),cI).getImmediate();return{getId:()=>cx(t),getToken:e=>cE(t,e)}},"PRIVATE")),e9(hQ,hY),e9(hQ,hY,"esm2020");let c_="analytics",cS="https://www.googletagmanager.com/gtag/js",cC=new ex("@firebase/analytics"),ck=new et("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function cN(e){if(!e.startsWith(cS)){let t=ck.create("invalid-gtag-resource",{gtagURL:e});return cC.warn(t.message),""}return e}function cR(e){return Promise.all(e.map(e=>e.catch(e=>e)))}async function cP(e,t,i,r,n,s){let a=r[n];try{if(a)await t[a];else{let e=(await cR(i)).find(e=>e.measurementId===n);e&&await t[e.appId]}}catch(e){cC.error(e)}e("config",n,s)}async function cD(e,t,i,r,n){try{let s=[];if(n&&n.send_to){let e=n.send_to;Array.isArray(e)||(e=[e]);let r=await cR(i);for(let i of e){let e=r.find(e=>e.measurementId===i),n=e&&t[e.appId];if(n)s.push(n);else{s=[];break}}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,n||{})}catch(e){cC.error(e)}}let cO=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};async function cM(e){let{appId:t,apiKey:i}=e,r={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(n,r);if(200!==s.status&&304!==s.status){let e="";try{let t=await s.json();t.error?.message&&(e=t.error.message)}catch(e){}throw ck.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}async function cL(e,t=cO,i){let{appId:r,apiKey:n,measurementId:s}=e.options;if(!r)throw ck.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw ck.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new cV;return setTimeout(async()=>{o.abort()},void 0!==i?i:6e4),cj({appId:r,apiKey:n,measurementId:s},a,o,t)}async function cj(e,{throttleEndTimeMillis:t,backoffCount:i},r,n=cO){let{appId:s,measurementId:a}=e;try{var o,l;await (o=r,l=t,new Promise((e,t)=>{let i=setTimeout(e,Math.max(l-Date.now(),0));o.addEventListener(()=>{clearTimeout(i),t(ck.create("fetch-throttle",{throttleEndTimeMillis:l}))})}))}catch(e){if(a)return cC.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:s,measurementId:a};throw e}try{let t=await cM(e);return n.deleteThrottleMetadata(s),t}catch(l){if(!function(e){if(!(e instanceof ee)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(n.deleteThrottleMetadata(s),a)return cC.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:s,measurementId:a};throw l}let t=503===Number(l?.customData?.httpStatus)?eh(i,n.intervalMillis,30):eh(i,n.intervalMillis),o={throttleEndTimeMillis:Date.now()+t,backoffCount:i+1};return n.setThrottleMetadata(s,o),cC.debug(`Calling attemptFetch again in ${t} millis`),cj(e,o,r,n)}}class cV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function cF(e,t,i,r,n){if(n&&n.global)return void e("event",i,r);{let n=await t;e("event",i,{...r,send_to:n})}}async function cU(e,t,i,r){if(r&&r.global){let t={};for(let e of Object.keys(i))t[`user_properties.${e}`]=i[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:i})}async function cB(){if(!J())return cC.warn(ck.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Z()}catch(e){return cC.warn(ck.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}async function cz(e,t,i,s,a,o,l){var u,h;let c,d,f,p,m=cL(e);m.then(t=>{i[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&cC.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>cC.error(e)),t.push(m);let g=cB().then(e=>e?s.getId():void 0),[y,v]=await Promise.all([m,g]);!function(e){for(let t of Object.values(window.document.getElementsByTagName("script")))if(t.src&&t.src.includes(cS)&&t.src.includes(e))return t;return null}(o)&&(u=y.measurementId,h={createScriptURL:cN},window.trustedTypes&&(c=window.trustedTypes.createPolicy("firebase-js-sdk-policy",h)),d=c,f=document.createElement("script"),p=`${cS}?l=${o}&id=${u}`,f.src=d?d?.createScriptURL(p):p,f.async=!0,document.head.appendChild(f)),n&&(a("consent","default",n),n=void 0),a("js",new Date);let w=l?.config??{};return w.origin="firebase",w.update=!0,null!=v&&(w.firebase_id=v),a("config",y.measurementId,w),r&&(a("set",r),r=void 0),y.measurementId}class cq{constructor(e){this.app=e}_delete(){return delete c$[this.app.options.appId],Promise.resolve()}}let c$={},cH=[],cK={},cW="dataLayer",cG=!1,cQ="@firebase/analytics",cY="0.10.19";eK(new ed(c_,(e,{options:t})=>(function(e,t,i){let r=[];if(X()&&r.push("This is a browser extension environment."),!("u"<typeof navigator)&&navigator.cookieEnabled&&1||r.push("Cookies are not available."),r.length>0){let e=r.map((e,t)=>`(${t+1}) ${e}`).join(" "),t=ck.create("invalid-analytics-context",{errorInfo:e});cC.warn(t.message)}let n=e.options.appId;if(!n)throw ck.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)cC.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ck.create("no-api-key");if(null!=c$[n])throw ck.create("already-exists",{id:n});if(!cG){var o,l;let e,t;e=[],Array.isArray(window[cW])?e=window[cW]:window[cW]=e;let{wrappedGtag:i,gtagCore:r}=(o="gtag",t=function(){window[cW].push(arguments)},window[o]&&"function"==typeof window[o]&&(t=window[o]),window[o]=(l=t,async function(e,...t){try{if("event"===e){let[e,i]=t;await cD(l,c$,cH,e,i)}else if("config"===e){let[e,i]=t;await cP(l,c$,cH,cK,e,i)}else if("consent"===e){let[e,i]=t;l("consent",e,i)}else if("get"===e){let[e,i,r]=t;l("get",e,i,r)}else if("set"===e){let[e]=t;l("set",e)}else l(e,...t)}catch(e){cC.error(e)}}),{gtagCore:t,wrappedGtag:window[o]});a=i,s=r,cG=!0}return c$[n]=cz(e,cH,cK,t,s,cW,i),new cq(e)})(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),eK(new ed("analytics-internal",function(e){try{let t=e.getProvider(c_).getImmediate();return{logEvent:(e,i,r)=>{var n;return n=t,void(n=ec(n),cF(a,c$[n.app.options.appId],e,i,r).catch(e=>cC.error(e)))},setUserProperties:(e,i)=>{var r;return r=t,void(r=ec(r),cU(a,c$[r.app.options.appId],e,i).catch(e=>cC.error(e)))}}}catch(e){throw ck.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),e9(cQ,cY),e9(cQ,cY,"esm2020");let cX=e3({apiKey:"AIzaSyCH55GbqW6y87TNoblFx4T47LlvfbhdwhQ",authDomain:"listpantry-app-88888.firebaseapp.com",projectId:"listpantry-app-88888",storageBucket:"listpantry-app-88888.firebasestorage.app",messagingSenderId:"485783598276",appId:"1:485783598276:web:3d884109927b416ca28591",measurementId:"G-8E1EBS98HE"}),cJ=function(e=e5()){let t=eW(e,"auth");if(t.isInitialized())return t.getImmediate();let i=function(e,t){let i=eW(e,"auth");if(i.isInitialized()){let e=i.getImmediate();if(er(i.getOptions(),t??{}))return e;tg(e,"already-initialized")}return i.initialize({options:t})}(e,{popupRedirectResolver:r3,persistence:[rw,ri,rr]}),r=z("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t,r=(t=e.toString(),async e=>{let i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>r7)return;let n=i?.token;r9!==n&&(r9=n,await fetch(t,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});ec(i).beforeAuthStateChanged(r,()=>r(i.currentUser)),ec(i).onIdTokenChanged(e=>r(e),void 0,void 0)}}let n=U("auth");return n&&function(e,t,i){let r=ec(e);tx(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let n=iS(t),{host:s,port:a}=function(e){let t=iS(e),i=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!i)return{host:"",port:null};let r=i[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){let e=n[1];return{host:e,port:iC(r.substr(e.length+1))}}{let[e,t]=r.split(":");return{host:e,port:iC(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${n}//${s}${o}/`},u=Object.freeze({host:s,port:a,protocol:n.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator){tx(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tx(er(l,r.config.emulator)&&er(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,$(s)?(H(`${n}//${s}${o}`),G("Auth",!0)):function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"u">typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"u">typeof window&&"u">typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(i,`http://${n}`),i}(cX),cZ=function(e,t){let i=eW("object"==typeof e?e:e5(),"firestore").getImmediate({identifier:"string"==typeof e?e:sb});if(!i._initialized){let e=(e=>{let t=U(e);if(!t)return;let i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),r]:[t.substring(0,i),r]})("firestore");e&&function(e,t,i,r={}){e=nQ(e,uW);let n=$(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${i}`;n&&(H(`https://${o}`),G("Firestore",!0)),s.host!==uH&&s.host!==o&&ny("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l={...s,host:o,ssl:n,emulatorOptions:r};if(!er(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,i;if("string"==typeof r.mockUserToken)t=r.mockUserToken,i=nc.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let i=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}},...e};return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);let n=r.mockUserToken.sub||r.mockUserToken.user_id;if(!n)throw new nA(nE.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new nc(n)}e._authCredentials=new nS(new nI(t,i))}}(i,...e)}return i}(cX);!function(e=e5()){let t=eW(e=ec(e),c_);t.isInitialized()?t.getImmediate():function(e,t={}){let i=eW(e,c_);if(i.isInitialized()){if(i.getImmediate(),er(t,i.getOptions()))return;throw ck.create("already-initialized")}i.initialize({options:t})}(e)}(cX);let c0=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},c1=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim();var c2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c6=(0,N.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:n="",children:s,iconNode:a,...o},l)=>(0,N.createElement)("svg",{ref:l,...c2,width:t,height:t,stroke:e,strokeWidth:r?24*Number(i)/Number(t):i,className:c1("lucide",n),...!s&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>(0,N.createElement)(e,t)),...Array.isArray(s)?s:[s]])),c3=(e,t)=>{let i=(0,N.forwardRef)(({className:i,...r},n)=>(0,N.createElement)(c6,{ref:n,iconNode:t,className:c1(`lucide-${c0(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...r}));return i.displayName=c0(e),i},c4=c3("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),c5=c3("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),c8=c3("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),c7=c3("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),c9=c3("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),de=c3("grip",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"19",cy:"5",r:"1",key:"w8mnmm"}],["circle",{cx:"5",cy:"5",r:"1",key:"lttvr7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}],["circle",{cx:"19",cy:"19",r:"1",key:"shf9b7"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);function dt(){for(var e,t,i=0,r="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=function e(t){var i,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(i=0;i<s;i++)t[i]&&(r=e(t[i]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}(e))&&(r&&(r+=" "),r+=t);return r}let di=({title:e,count:t,icon:i,variant:r})=>(0,k.jsxs)("div",{className:dt("rounded-[var(--radius-lg)] p-4 flex flex-col justify-between aspect-square material-shadow-1 transition-transform active:scale-95 cursor-pointer",{blue:"bg-card-blue text-on-card-blue",yellow:"bg-card-yellow text-on-card-yellow",green:"bg-card-green text-on-card-green",pink:"bg-card-pink text-on-card-pink"}[r]),children:[(0,k.jsx)("div",{className:"flex justify-between items-start",children:(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center backdrop-blur-sm",children:(0,k.jsx)(i,{size:20,strokeWidth:2.5})})}),(0,k.jsxs)("div",{className:"mt-2",children:[(0,k.jsx)("p",{className:"text-sm font-medium opacity-90 mb-1",children:e}),(0,k.jsx)("h3",{className:"text-3xl font-bold",children:t})]})]}),dr=c3("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),dn=c3("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ds=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],da=new Set(ds),dl=(e,t,i)=>i>t?t:i<e?e:i,du={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},dh={...du,transform:e=>dl(0,1,e)},dc={...du,default:1},dd=e=>Math.round(1e5*e)/1e5,df=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,dp=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dm=(e,t)=>i=>!!("string"==typeof i&&dp.test(i)&&i.startsWith(e)||t&&null!=i&&Object.prototype.hasOwnProperty.call(i,t)),dg=(e,t,i)=>r=>{if("string"!=typeof r)return r;let[n,s,a,o]=r.match(df);return{[e]:parseFloat(n),[t]:parseFloat(s),[i]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},dy={...du,transform:e=>Math.round(dl(0,255,e))},dv={test:dm("rgb","red"),parse:dg("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:r=1})=>"rgba("+dy.transform(e)+", "+dy.transform(t)+", "+dy.transform(i)+", "+dd(dh.transform(r))+")"},dw={test:dm("#"),parse:function(e){let t="",i="",r="",n="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),r=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),r=e.substring(3,4),n=e.substring(4,5),t+=t,i+=i,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}},transform:dv.transform},db=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),dx=db("deg"),dE=db("%"),dA=db("px"),dT=db("vh"),dI=db("vw"),d_={...dE,parse:e=>dE.parse(e)/100,transform:e=>dE.transform(100*e)},dS={test:dm("hsl","hue"),parse:dg("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:r=1})=>"hsla("+Math.round(e)+", "+dE.transform(dd(t))+", "+dE.transform(dd(i))+", "+dd(dh.transform(r))+")"},dC={test:e=>dv.test(e)||dw.test(e)||dS.test(e),parse:e=>dv.test(e)?dv.parse(e):dS.test(e)?dS.parse(e):dw.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?dv.transform(e):dS.transform(e),getAnimatableNone:e=>{let t=dC.parse(e);return t.alpha=0,dC.transform(t)}},dk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,dN="number",dR="color",dP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dD(e){let t=e.toString(),i=[],r={color:[],number:[],var:[]},n=[],s=0,a=t.replace(dP,e=>(dC.test(e)?(r.color.push(s),n.push(dR),i.push(dC.parse(e))):e.startsWith("var(")?(r.var.push(s),n.push("var"),i.push(e)):(r.number.push(s),n.push(dN),i.push(parseFloat(e))),++s,"${}")).split("${}");return{values:i,split:a,indexes:r,types:n}}function dO(e){return dD(e).values}function dM(e){let{split:t,types:i}=dD(e),r=t.length;return e=>{let n="";for(let s=0;s<r;s++)if(n+=t[s],void 0!==e[s]){let t=i[s];t===dN?n+=dd(e[s]):t===dR?n+=dC.transform(e[s]):n+=e[s]}return n}}let dL=e=>"number"==typeof e?0:dC.test(e)?dC.getAnimatableNone(e):e,dj={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(df)?.length||0)+(e.match(dk)?.length||0)>0},parse:dO,createTransformer:dM,getAnimatableNone:function(e){let t=dO(e);return dM(e)(t.map(dL))}},dV=new Set(["brightness","contrast","saturate","opacity"]);function dF(e){let[t,i]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[r]=i.match(df)||[];if(!r)return e;let n=i.replace(r,""),s=+!!dV.has(t);return r!==i&&(s*=100),t+"("+s+n+")"}let dU=/\b([a-z-]*)\(.*?\)/gu,dB={...dj,getAnimatableNone:e=>{let t=e.match(dU);return t?t.map(dF).join(" "):e}},dz={...du,transform:Math.round},dq={borderWidth:dA,borderTopWidth:dA,borderRightWidth:dA,borderBottomWidth:dA,borderLeftWidth:dA,borderRadius:dA,radius:dA,borderTopLeftRadius:dA,borderTopRightRadius:dA,borderBottomRightRadius:dA,borderBottomLeftRadius:dA,width:dA,maxWidth:dA,height:dA,maxHeight:dA,top:dA,right:dA,bottom:dA,left:dA,inset:dA,insetBlock:dA,insetBlockStart:dA,insetBlockEnd:dA,insetInline:dA,insetInlineStart:dA,insetInlineEnd:dA,padding:dA,paddingTop:dA,paddingRight:dA,paddingBottom:dA,paddingLeft:dA,paddingBlock:dA,paddingBlockStart:dA,paddingBlockEnd:dA,paddingInline:dA,paddingInlineStart:dA,paddingInlineEnd:dA,margin:dA,marginTop:dA,marginRight:dA,marginBottom:dA,marginLeft:dA,marginBlock:dA,marginBlockStart:dA,marginBlockEnd:dA,marginInline:dA,marginInlineStart:dA,marginInlineEnd:dA,backgroundPositionX:dA,backgroundPositionY:dA,rotate:dx,rotateX:dx,rotateY:dx,rotateZ:dx,scale:dc,scaleX:dc,scaleY:dc,scaleZ:dc,skew:dx,skewX:dx,skewY:dx,distance:dA,translateX:dA,translateY:dA,translateZ:dA,x:dA,y:dA,z:dA,perspective:dA,transformPerspective:dA,opacity:dh,originX:d_,originY:d_,originZ:dA,zIndex:dz,fillOpacity:dh,strokeOpacity:dh,numOctaves:dz},d$={...dq,color:dC,backgroundColor:dC,outlineColor:dC,fill:dC,stroke:dC,borderColor:dC,borderTopColor:dC,borderRightColor:dC,borderBottomColor:dC,borderLeftColor:dC,filter:dB,WebkitFilter:dB},dH=e=>d$[e],dK=()=>({translate:0,scale:1,origin:0,originPoint:0}),dW=()=>({x:dK(),y:dK()}),dG=()=>({min:0,max:0}),dQ=()=>({x:dG(),y:dG()}),dY=e=>!!(e&&e.getVelocity),dX=new Set(["width","height","top","left","right","bottom",...ds]),dJ=e=>t=>t.test(e),dZ=[du,dA,dE,dx,dI,dT,{test:e=>"auto"===e,parse:e=>e}],d0=e=>dZ.find(dJ(e)),d1=()=>{},d2=()=>{};R.default;let d6=e=>t=>"string"==typeof t&&t.startsWith(e),d3=d6("--"),d4=d6("var(--"),d5=e=>!!d4(e)&&d8.test(e.split("/*")[0].trim()),d8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function d7(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let d9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,fe=e=>180*e/Math.PI,ft=e=>fr(fe(Math.atan2(e[1],e[0]))),fi={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ft,rotateZ:ft,skewX:e=>fe(Math.atan(e[1])),skewY:e=>fe(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},fr=e=>((e%=360)<0&&(e+=360),e),fn=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),fs=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),fa={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fn,scaleY:fs,scale:e=>(fn(e)+fs(e))/2,rotateX:e=>fr(fe(Math.atan2(e[6],e[5]))),rotateY:e=>fr(fe(Math.atan2(-e[2],e[0]))),rotateZ:ft,rotate:ft,skewX:e=>fe(Math.atan(e[4])),skewY:e=>fe(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function fo(e){return+!!e.includes("scale")}function fl(e,t){let i,r;if(!e||"none"===e)return fo(t);let n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(n)i=fa,r=n;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=fi,r=t}if(!r)return fo(t);let s=i[t],a=r[1].split(",").map(fu);return"function"==typeof s?s(a):a[s]}function fu(e){return parseFloat(e.trim())}let fh=e=>e===du||e===dA,fc=new Set(["x","y","z"]),fd=ds.filter(e=>!fc.has(e)),ff={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>fl(t,"x"),y:(e,{transform:t})=>fl(t,"y")};ff.translateX=ff.x,ff.translateY=ff.y;let fp=e=>e,fm={},fg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function fy(e,t){let i=!1,r=!0,n={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=fg.reduce((e,i)=>(e[i]=function(e,t){let i=new Set,r=new Set,n=!1,s=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(h.schedule(t),e()),l++,t(o)}let h={schedule:(e,t=!1,s=!1)=>{let o=s&&n?i:r;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),a.delete(e)},process:e=>{if(o=e,n){s=!0;return}n=!0,[i,r]=[r,i],i.forEach(u),t,l=0,i.clear(),n=!1,s&&(s=!1,h.process(e))}};return h}(s,t?i:void 0),e),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:h,update:c,preRender:d,render:f,postRender:p}=a,m=()=>{let s=fm.useManualTiming?n.timestamp:performance.now();i=!1,fm.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(s-n.timestamp,40),1)),n.timestamp=s,n.isProcessing=!0,o.process(n),l.process(n),u.process(n),h.process(n),c.process(n),d.process(n),f.process(n),p.process(n),n.isProcessing=!1,i&&t&&(r=!1,e(m))};return{schedule:fg.reduce((t,s)=>{let o=a[s];return t[s]=(t,s=!1,a=!1)=>(!i&&(i=!0,r=!0,n.isProcessing||e(m)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<fg.length;t++)a[fg[t]].cancel(e)},state:n,steps:a}}let{schedule:fv,cancel:fw,state:fb,steps:fx}=fy("u">typeof requestAnimationFrame?requestAnimationFrame:fp,!0),fE=new Set,fA=!1,fT=!1,fI=!1;function f_(){if(fT){let e=Array.from(fE).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),i=new Map;t.forEach(e=>{let t,r=(t=[],fd.forEach(i=>{let r=e.getValue(i);void 0!==r&&(t.push([i,r.get()]),r.set(+!!i.startsWith("scale")))}),t);r.length&&(i.set(e,r),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=i.get(e);t&&t.forEach(([t,i])=>{e.getValue(t)?.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}fT=!1,fA=!1,fE.forEach(e=>e.complete(fI)),fE.clear()}function fS(){fE.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(fT=!0)})}class fC{constructor(e,t,i,r,n,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=n,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(fE.add(this),fA||(fA=!0,fv.read(fS),fv.resolveKeyframes(f_))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(null===e[0]){let n=r?.get(),s=e[e.length-1];if(void 0!==n)e[0]=n;else if(i&&t){let r=i.readValue(t,s);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===n&&r.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fE.delete(this)}cancel(){"scheduled"===this.state&&(fE.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function fk(e,t){let i=dH(e);return i!==dB&&(i=dj),i.getAnimatableNone?i.getAnimatableNone(t):void 0}let fN=new Set(["auto","none","0"]);class fR extends fC{constructor(e,t,i,r,n){super(e,t,i,r,n,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let r=e[i];if("string"==typeof r&&d5(r=r.trim())){let n=function e(t,i,r=1){d2(r<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[n,s]=function(e){let t=d9.exec(e);if(!t)return[,];let[,i,r,n]=t;return[`--${i??r}`,n]}(t);if(!n)return;let a=window.getComputedStyle(i).getPropertyValue(n);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return d5(s)?e(s,i,r+1):s}(r,t.current);void 0!==n&&(e[i]=n),i===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!dX.has(i)||2!==e.length)return;let[r,n]=e,s=d0(r),a=d0(n);if(d7(r)!==d7(n)&&ff[i]){this.needsMeasurement=!0;return}if(s!==a)if(fh(s)&&fh(a))for(let t=0;t<e.length;t++){let i=e[t];"string"==typeof i&&(e[t]=parseFloat(i))}else ff[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,i=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&i.push(t);i.length&&function(e,t,i){let r,n=0;for(;n<e.length&&!r;){let t=e[n];"string"==typeof t&&!fN.has(t)&&dD(t).values.length&&(r=e[n]),n++}if(r&&i)for(let n of t)e[n]=fk(i,r)}(e,i,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;"height"===i&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ff[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];void 0!==r&&e.getValue(i,r).jump(r,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;let r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);let n=i.length-1,s=i[n];i[n]=ff[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,i])=>{e.getValue(t).set(i)}),this.resolveNoneKeyframes()}}function fP(e,t){-1===e.indexOf(t)&&e.push(t)}function fD(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}class fO{constructor(){this.subscriptions=[]}add(e){return fP(this.subscriptions,e),()=>fD(this.subscriptions,e)}notify(e,t,i){let r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,i);else for(let n=0;n<r;n++){let r=this.subscriptions[n];r&&r(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:fM}=fy(queueMicrotask,!1);function fL(){o=void 0}let fj={now:()=>(void 0===o&&fj.set(fb.isProcessing||fm.useManualTiming?fb.timestamp:performance.now()),o),set:e=>{o=e,queueMicrotask(fL)}};class fV{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=fj.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=fj.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new fO);let i=this.events[e].add(t);return"change"===e?()=>{i(),fv.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return h&&h.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=fj.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let i=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),i?1e3/i*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fF(e,t){return new fV(e,t)}let fU=[...dZ,dC,dj],fB={current:null},fz={current:!1},fq="u">typeof window,f$=new WeakMap;function fH(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function fK(e){return"string"==typeof e||Array.isArray(e)}let fW=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fG=["initial",...fW];function fQ(e){return fH(e.animate)||fG.some(t=>fK(e[t]))}function fY(e){return!!(fQ(e)||e.variants)}function fX(e){let t=[{},{}];return e?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function fJ(e,t,i,r){if("function"==typeof t){let[n,s]=fX(r);t=t(void 0!==i?i:e.custom,n,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[n,s]=fX(r);t=t(void 0!==i?i:e.custom,n,s)}return t}let fZ=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],f0={};class f1{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:n,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=fj.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,fv.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!n,this.isControllingVariants=fQ(t),this.isVariantNode=fY(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in h){const t=h[e];void 0!==o[e]&&dY(t)&&t.set(o[e])}}mount(e){this.current=e,f$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(fz.current||function(){if(fz.current=!0,fq)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>fB.current=e.matches;e.addEventListener("change",t),t()}else fB.current=!1}(),this.shouldReduceMotion=fB.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),fw(this.notifyUpdate),fw(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let i;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let r=da.has(e);r&&this.onBindTransform&&this.onBindTransform();let n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&fv.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in f0){let t=f0[e];if(!t)continue;let{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dQ()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<fZ.length;t++){let i=fZ[t];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);let r=e["on"+i];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=function(e,t,i){for(let r in t){let n=t[r],s=i[r];if(dY(n))e.addValue(r,n);else if(dY(s))e.addValue(r,fF(n,{owner:e}));else if(s!==n)if(e.hasValue(r)){let t=e.getValue(r);!0===t.liveStyle?t.jump(n):t.hasAnimated||t.set(n)}else{let t=e.getStaticValue(r);e.addValue(r,fF(void 0!==t?t:n,{owner:e}))}}for(let r in i)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return void 0===i&&void 0!==t&&(i=fF(null===t?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=i){let r,n;if("string"==typeof i&&(r=i,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r)||(n=i,/^0[^.\s]+$/u.test(n))))i=parseFloat(i);else{let r;r=i,!fU.find(dJ(r))&&dj.test(t)&&(i=fk(e,t))}this.setBaseTarget(e,dY(i)?i.get():i)}return dY(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let r=fJ(this.props,i,this.presenceContext?.custom);r&&(t=r[e])}if(i&&void 0!==t)return t;let r=this.getBaseTargetFromProps(this.props,e);return void 0===r||dY(r)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new fO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){fM.render(this.render)}}class f2 extends f1{constructor(){super(...arguments),this.KeyframeResolver=fR}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;dY(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function f6(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let f3=(e,t)=>t&&"number"==typeof e?t.transform(e):e,f4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},f5=ds.length;function f8(e,t,i){let{style:r,vars:n,transformOrigin:s}=e,a=!1,o=!1;for(let e in t){let i=t[e];if(da.has(e)){a=!0;continue}if(d3(e)){n[e]=i;continue}{let t=f3(i,dq[e]);e.startsWith("origin")?(o=!0,s[e]=t):r[e]=t}}if(!t.transform&&(a||i?r.transform=function(e,t,i){let r="",n=!0;for(let s=0;s<f5;s++){let a=ds[s],o=e[a];if(void 0===o)continue;let l=!0;if(!(l="number"==typeof o?o===+!!a.startsWith("scale"):0===parseFloat(o))||i){let e=f3(o,dq[a]);if(!l){n=!1;let t=f4[a]||a;r+=`${t}(${e}) `}i&&(t[a]=e)}}return r=r.trim(),i?r=i(t,n?"":r):n&&(r="none"),r}(t,e.transform,i):r.transform&&(r.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:i=0}=s;r.transformOrigin=`${e} ${t} ${i}`}}let f7={offset:"stroke-dashoffset",array:"stroke-dasharray"},f9={offset:"strokeDashoffset",array:"strokeDasharray"},pe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function pt(e,{attrX:t,attrY:i,attrScale:r,pathLength:n,pathSpacing:s=1,pathOffset:a=0,...o},l,u,h){if(f8(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:d}=e;for(let e of(c.transform&&(d.transform=c.transform,delete c.transform),(d.transform||c.transformOrigin)&&(d.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),d.transform&&(d.transformBox=h?.transformBox??"fill-box",delete c.transformBox),pe))void 0!==c[e]&&(d[e]=c[e],delete c[e]);void 0!==t&&(c.x=t),void 0!==i&&(c.y=i),void 0!==r&&(c.scale=r),void 0!==n&&function(e,t,i=1,r=0,n=!0){e.pathLength=1;let s=n?f7:f9;e[s.offset]=dA.transform(-r);let a=dA.transform(t),o=dA.transform(i);e[s.array]=`${a} ${o}`}(c,n,s,a,!1)}let pi=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),pr=e=>"string"==typeof e&&"svg"===e.toLowerCase();function pn(e,{style:t,vars:i},r,n){let s,a=e.style;for(s in t)a[s]=t[s];for(s in n?.applyProjectionStyles(a,r),i)a.setProperty(s,i[s])}function ps(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let pa={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!dA.test(e))return e;else e=parseFloat(e);let i=ps(e,t.target.x),r=ps(e,t.target.y);return`${i}% ${r}%`}},po=(e,t,i)=>e+(t-e)*i,pl={borderRadius:{...pa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pa,borderTopRightRadius:pa,borderBottomLeftRadius:pa,borderBottomRightRadius:pa,boxShadow:{correct:(e,{treeScale:t,projectionDelta:i})=>{let r=dj.parse(e);if(r.length>5)return e;let n=dj.createTransformer(e),s=+("number"!=typeof r[0]),a=i.x.scale*t.x,o=i.y.scale*t.y;r[0+s]/=a,r[1+s]/=o;let l=po(a,o,.5);return"number"==typeof r[2+s]&&(r[2+s]/=l),"number"==typeof r[3+s]&&(r[3+s]/=l),n(r)}}};function pu(e,{layout:t,layoutId:i}){return da.has(e)||e.startsWith("origin")||(t||void 0!==i)&&(!!pl[e]||"opacity"===e)}function ph(e,t,i){let r=e.style,n=t?.style,s={};if(!r)return s;for(let t in r)(dY(r[t])||n&&dY(n[t])||pu(t,e)||i?.getValue(t)?.liveStyle!==void 0)&&(s[t]=r[t]);return s}function pc(e,t,i){let r=ph(e,t,i);for(let i in e)(dY(e[i])||dY(t[i]))&&(r[-1!==ds.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]);return r}class pd extends f2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dQ}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(da.has(t)){let e=dH(t);return e&&e.default||0}return t=pi.has(t)?t:f6(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return pc(e,t,i)}build(e,t,i){pt(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){for(let i in pn(e,t,void 0,r),t.attrs)e.setAttribute(pi.has(i)?i:f6(i),t.attrs[i])}mount(e){this.isSVGTag=pr(e.tagName),super.mount(e)}}function pf({top:e,left:t,right:i,bottom:r}){return{x:{min:t,max:i},y:{min:e,max:r}}}function pp(e){return void 0===e||1===e}function pm({scale:e,scaleX:t,scaleY:i}){return!pp(e)||!pp(t)||!pp(i)}function pg(e){return pm(e)||py(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function py(e){var t,i;return(t=e.x)&&"0%"!==t||(i=e.y)&&"0%"!==i}function pv(e,t,i,r,n){return void 0!==n&&(e=r+n*(e-r)),r+i*(e-r)+t}function pw(e,t=0,i=1,r,n){e.min=pv(e.min,t,i,r,n),e.max=pv(e.max,t,i,r,n)}function pb(e,{x:t,y:i}){pw(e.x,t.translate,t.scale,t.originPoint),pw(e.y,i.translate,i.scale,i.originPoint)}function px(e,t){e.min=e.min+t,e.max=e.max+t}function pE(e,t,i,r,n=.5){let s=po(e.min,e.max,n);pw(e,t,i,s,r)}function pA(e,t){pE(e.x,t.x,t.scaleX,t.scale,t.originX),pE(e.y,t.y,t.scaleY,t.scale,t.originY)}function pT(e,t){return pf(function(e,t){if(!t)return e;let i=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}class pI extends f2{constructor(){super(...arguments),this.type="html",this.renderInstance=pn}readValueFromInstance(e,t){if(da.has(t))return this.projection?.isProjecting?fo(t):((e,t)=>{let{transform:i="none"}=getComputedStyle(e);return fl(i,t)})(e,t);{let i=window.getComputedStyle(e),r=(d3(t)?i.getPropertyValue(t):i[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return pT(e,t)}build(e,t,i){f8(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return ph(e,t,i)}}let p_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pS(e){if("string"!=typeof e||e.includes("-"));else if(p_.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let pC=(0,N.createContext)({}),pk=(0,N.createContext)({strict:!1}),pN=(0,N.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),pR=(0,N.createContext)({});function pP(e){return Array.isArray(e)?e.join(" "):e}let pD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pO(e,t,i){for(let r in t)dY(t[r])||pu(r,i)||(e[r]=t[r])}let pM=()=>({...pD(),attrs:{}}),pL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pj(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pL.has(e)}let pV=e=>!pj(e);try{f=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof f&&(pV=e=>e.startsWith("on")?!pj(e):f(e))}catch{}function pF(e){return dY(e)?e.get():e}let pU=(0,N.createContext)(null),pB=e=>(t,i)=>{let r,n=(0,N.useContext)(pR),s=(0,N.useContext)(pU),a=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},i,r,n){return{latestValues:function(e,t,i,r){let n={},s=r(e,{});for(let e in s)n[e]=pF(s[e]);let{initial:a,animate:o}=e,l=fQ(e),u=fY(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let h=!!i&&!1===i.initial,c=(h=h||!1===a)?o:a;if(c&&"boolean"!=typeof c&&!fH(c)){let t=Array.isArray(c)?c:[c];for(let i=0;i<t.length;i++){let r=fJ(e,t[i]);if(r){let{transitionEnd:e,transition:t,...i}=r;for(let e in i){let t=i[e];if(Array.isArray(t)){let e=h?t.length-1:0;t=t[e]}null!==t&&(n[e]=t)}for(let t in e)n[t]=e[t]}}}return n}(i,r,n,e),renderState:t()}})(e,t,n,s);return i?a():(null===(r=(0,N.useRef)(null)).current&&(r.current=a()),r.current)},pz=pB({scrapeMotionValuesFromProps:ph,createRenderState:pD}),pq=pB({scrapeMotionValuesFromProps:pc,createRenderState:pM}),p$="u">typeof window,pH={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pK=!1;function pW(){return!function(){if(pK)return;let e={};for(let t in pH)e[t]={isEnabled:e=>pH[t].some(t=>!!e[t])};f0=e,pK=!0}(),f0}let pG=Symbol.for("motionComponentSymbol"),pQ="data-"+f6("framerAppearId"),pY=(0,N.createContext)({});function pX(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let pJ=p$?N.useLayoutEffect:N.useEffect;function pZ(e,{forwardMotionProps:t=!1,type:i}={},r,n){r&&function(e){let t=pW();for(let i in e)t[i]={...t[i],...e[i]};f0=t}(r);let s=i?"svg"===i:pS(e),a=s?pq:pz;function o(i,r){var o;let l,u,h,c={...(0,N.useContext)(pN),...i,layoutId:function({layoutId:e}){let t=(0,N.useContext)(pC).id;return t&&void 0!==e?t+"-"+e:e}(i)},{isStatic:d}=c,f=function(e){let{initial:t,animate:i}=function(e,t){if(fQ(e)){let{initial:t,animate:i}=e;return{initial:!1===t||fK(t)?t:void 0,animate:fK(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,N.useContext)(pR));return(0,N.useMemo)(()=>({initial:t,animate:i}),[pP(t),pP(i)])}(i),p=a(i,d);if(!d&&p$){(0,N.useContext)(pk).strict;let t=function(e){let{drag:t,layout:i}=pW();if(!t&&!i)return{};let r={...t,...i};return{MeasureLayout:t?.isEnabled(e)||i?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(c);l=t.MeasureLayout,f.visualElement=function(e,t,i,r,n,s){let{visualElement:a}=(0,N.useContext)(pR),o=(0,N.useContext)(pk),l=(0,N.useContext)(pU),u=(0,N.useContext)(pN).reducedMotion,h=(0,N.useRef)(null);r=r||o.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:a,props:i,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u,isSVG:s}));let c=h.current,d=(0,N.useContext)(pY);c&&!c.projection&&n&&("html"===c.type||"svg"===c.type)&&function(e,t,i,r){let{layoutId:n,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:n,layout:s,alwaysMeasureLayout:!!a||o&&pX(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:u})}(h.current,i,n,d);let f=(0,N.useRef)(!1);(0,N.useInsertionEffect)(()=>{c&&f.current&&c.update(i,l)});let p=i[pQ],m=(0,N.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return pJ(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),m.current&&c.animationState&&c.animationState.animateChanges())}),(0,N.useEffect)(()=>{c&&(!m.current&&c.animationState&&c.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1),c.enteringChildren=void 0)}),c}(e,p,c,n,t.ProjectionNode,s)}return(0,k.jsxs)(pR.Provider,{value:f,children:[l&&f.visualElement?(0,k.jsx)(l,{visualElement:f.visualElement,...c}):null,function(e,t,i,{latestValues:r},n,s=!1,a){let o=(a??pS(e)?function(e,t,i,r){let n=(0,N.useMemo)(()=>{let i=pM();return pt(i,t,pr(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){let t={};pO(t,e.style,e),n.style={...t,...n.style}}return n}:function(e,t){let i,r,n={},s=(i=e.style||{},pO(r={},i,e),Object.assign(r,function({transformTemplate:e},t){return(0,N.useMemo)(()=>{let i=pD();return f8(i,t,e),Object.assign({},i.vars,i.style)},[t])}(e,t)),r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n})(t,r,n,e),l=function(e,t,i){let r={};for(let n in e)("values"!==n||"object"!=typeof e.values)&&(pV(n)||!0===i&&pj(n)||!t&&!pj(n)||e.draggable&&n.startsWith("onDrag"))&&(r[n]=e[n]);return r}(t,"string"==typeof e,s),u=e!==N.Fragment?{...l,...o,ref:i}:{},{children:h}=t,c=(0,N.useMemo)(()=>dY(h)?h.get():h,[h]);return(0,N.createElement)(e,{...u,children:c})}(e,i,(o=f.visualElement,u=(0,N.useRef)(r),(0,N.useInsertionEffect)(()=>{u.current=r}),h=(0,N.useRef)(null),(0,N.useCallback)(e=>{e&&p.onMount?.(e),o&&(e?o.mount(e):o.unmount());let t=u.current;if("function"==typeof t)if(e){let i=t(e);"function"==typeof i&&(h.current=i)}else h.current?(h.current(),h.current=null):t(e);else t&&(t.current=e)},[o])),p,d,t,s)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,N.forwardRef)(o);return l[pG]=e,l}class p0{constructor(e){this.isMounted=!1,this.node=e}update(){}}function p1(e,t,i){let r=e.getProps();return fJ(r,t,void 0!==i?i:r.custom,e)}function p2(e,t){return e?.[t]??e?.default??e}let p6=e=>Array.isArray(e);function p3(e,t){let i=e.getValue("willChange");if(dY(i)&&i.add)return i.add(t);if(!i&&fm.WillChange){let i=new fm.WillChange("auto");e.addValue("willChange",i),i.add(t)}}let p4=e=>1e3*e,p5=(e,t)=>i=>t(e(i)),p8=(...e)=>e.reduce(p5),p7={layout:0,mainThread:0,waapi:0};function p9(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function me(e,t){return i=>i>0?t:e}let mt=(e,t,i)=>{let r=e*e,n=i*(t*t-r)+r;return n<0?0:Math.sqrt(n)},mi=[dw,dv,dS];function mr(e){let t=mi.find(t=>t.test(e));if(d1(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let i=t.parse(e);return t===dS&&(i=function({hue:e,saturation:t,lightness:i,alpha:r}){e/=360,i/=100;let n=0,s=0,a=0;if(t/=100){let r=i<.5?i*(1+t):i+t-i*t,o=2*i-r;n=p9(o,r,e+1/3),s=p9(o,r,e),a=p9(o,r,e-1/3)}else n=s=a=i;return{red:Math.round(255*n),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(i)),i}let mn=(e,t)=>{let i=mr(e),r=mr(t);if(!i||!r)return me(e,t);let n={...i};return e=>(n.red=mt(i.red,r.red,e),n.green=mt(i.green,r.green,e),n.blue=mt(i.blue,r.blue,e),n.alpha=po(i.alpha,r.alpha,e),dv.transform(n))},ms=new Set(["none","hidden"]);function ma(e,t){return i=>po(e,t,i)}function mo(e){return"number"==typeof e?ma:"string"==typeof e?d5(e)?me:dC.test(e)?mn:mh:Array.isArray(e)?ml:"object"==typeof e?dC.test(e)?mn:mu:me}function ml(e,t){let i=[...e],r=i.length,n=e.map((e,i)=>mo(e)(e,t[i]));return e=>{for(let t=0;t<r;t++)i[t]=n[t](e);return i}}function mu(e,t){let i={...e,...t},r={};for(let n in i)void 0!==e[n]&&void 0!==t[n]&&(r[n]=mo(e[n])(e[n],t[n]));return e=>{for(let t in r)i[t]=r[t](e);return i}}let mh=(e,t)=>{let i=dj.createTransformer(t),r=dD(e),n=dD(t);if(!(r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length))return d1(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),me(e,t);if(ms.has(e)&&!n.values.length||ms.has(t)&&!r.values.length)return ms.has(e)?i=>i<=0?e:t:i=>i>=1?t:e;return p8(ml(function(e,t){let i=[],r={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){let s=t.types[n],a=e.indexes[s][r[s]],o=e.values[a]??0;i[n]=o,r[s]++}return i}(r,n),n.values),i)};function mc(e,t,i){return"number"==typeof e&&"number"==typeof t&&"number"==typeof i?po(e,t,i):mo(e)(e,t)}let md=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>fv.update(t,e),stop:()=>fw(t),now:()=>fb.isProcessing?fb.timestamp:fj.now()}},mf=(e,t,i=10)=>{let r="",n=Math.max(Math.round(t/i),2);for(let t=0;t<n;t++)r+=Math.round(1e4*e(t/(n-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`};function mp(e){let t=0,i=e.next(t);for(;!i.done&&t<2e4;)t+=50,i=e.next(t);return t>=2e4?1/0:t}function mm(e,t,i){var r,n;let s=Math.max(t-5,0);return r=i-e(s),(n=t-s)?1e3/n*r:0}let mg=.01,my=2,mv=.005,mw=.5;function mb(e,t){return e*Math.sqrt(1-t*t)}let mx=["duration","bounce"],mE=["stiffness","damping","mass"];function mA(e,t){return t.some(t=>void 0!==e[t])}function mT(e=.3,t=.3){let i,r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:n,restDelta:s}=r,a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:h,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!mA(e,mE)&&mA(e,mx))if(e.visualDuration){let i=2*Math.PI/(1.2*e.visualDuration),r=i*i,n=2*dl(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:1,stiffness:r,damping:n}}else{let i=function({duration:e=800,bounce:t=.3,velocity:i=0,mass:r=1}){let n,s;d1(e<=p4(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=dl(.05,1,a),e=dl(.01,10,e/1e3),a<1?(n=t=>{let r=t*a,n=r*e;return .001-(r-i)/mb(t,a)*Math.exp(-n)},s=t=>{let r=t*a*e,s=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-r),l=mb(Math.pow(t,2),a);return(r*i+i-s)*o*(-n(t)+.001>0?-1:1)/l}):(n=t=>-.001+Math.exp(-t*e)*((t-i)*e+1),s=t=>e*e*(i-t)*Math.exp(-t*e));let o=function(e,t,i){let r=i;for(let i=1;i<12;i++)r-=e(r)/t(r);return r}(n,s,5/e);if(e=p4(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}(e);(t={...t,...i,mass:1}).isResolvedFromDuration=!0}return t}({...r,velocity:-((r.velocity||0)/1e3)}),m=f||0,g=h/(2*Math.sqrt(u*c)),y=o-a,v=Math.sqrt(u/c)/1e3,w=5>Math.abs(y);if(n||(n=w?mg:my),s||(s=w?mv:mw),g<1){let e=mb(v,g);i=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)i=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);i=t=>{let i=Math.exp(-g*v*t),r=Math.min(e*t,300);return o-i*((m+g*v*y)*Math.sinh(r)+e*y*Math.cosh(r))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=i(e);if(p)l.done=e>=d;else{let r=0===e?m:0;g<1&&(r=0===e?p4(m):mm(i,e,t));let a=Math.abs(o-t)<=s;l.done=Math.abs(r)<=n&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(mp(b),2e4),t=mf(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function mI({keyframes:e,velocity:t=0,power:i=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){let c,d,f=e[0],p={done:!1,value:f},m=i*t,g=f+m,y=void 0===a?g:a(g);y!==g&&(m=y-f);let v=e=>-m*Math.exp(-e/r),w=e=>y+v(e),b=e=>{let t=v(e),i=w(e);p.done=Math.abs(t)<=u,p.value=p.done?y:i},x=e=>{let t;if(t=p.value,void 0!==o&&t<o||void 0!==l&&t>l){var i;c=e,d=mT({keyframes:[p.value,(i=p.value,void 0===o?l:void 0===l||Math.abs(o-i)<Math.abs(l-i)?o:l)],velocity:mm(w,e,p.value),damping:n,stiffness:s,restDelta:u,restSpeed:h})}};return x(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==c||(t=!0,b(e),x(e)),void 0!==c&&e>=c)?d.next(e-c):(t||b(e),p)}}}mT.applyToOptions=e=>{let t=function(e,t=100,i){let r=i({...e,keyframes:[0,t]}),n=Math.min(mp(r),2e4);return{type:"keyframes",ease:e=>r.next(n*e).value/t,duration:n/1e3}}(e,100,mT);return e.ease=t.ease,e.duration=p4(t.duration),e.type="keyframes",e};let m_=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e;function mS(e,t,i,r){return e===t&&i===r?fp:n=>0===n||1===n?n:m_(function(e,t,i,r,n){let s,a,o=0;do(s=m_(a=t+(i-t)/2,r,n)-e)>0?i=a:t=a;while(Math.abs(s)>1e-7&&++o<12)return a}(n,0,1,e,i),t,r)}let mC=mS(.42,0,1,1),mk=mS(0,0,.58,1),mN=mS(.42,0,.58,1),mR=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mP=e=>t=>1-e(1-t),mD=mS(.33,1.53,.69,.99),mO=mP(mD),mM=mR(mO),mL=e=>(e*=2)<1?.5*mO(e):.5*(2-Math.pow(2,-10*(e-1))),mj=e=>1-Math.sin(Math.acos(e)),mV=mP(mj),mF=mR(mj),mU=e=>Array.isArray(e)&&"number"==typeof e[0],mB={linear:fp,easeIn:mC,easeInOut:mN,easeOut:mk,circIn:mj,circInOut:mF,circOut:mV,backIn:mO,backInOut:mM,backOut:mD,anticipate:mL},mz=e=>{if(mU(e)){d2(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,i,r,n]=e;return mS(t,i,r,n)}return"string"==typeof e?(d2(void 0!==mB[e],`Invalid easing type '${e}'`,"invalid-easing-type"),mB[e]):e},mq=(e,t,i)=>{let r=t-e;return 0===r?1:(i-e)/r};function m$({duration:e=300,keyframes:t,times:i,ease:r="easeInOut"}){var n;let s,a=Array.isArray(r)&&"number"!=typeof r[0]?r.map(mz):mz(r),o={done:!1,value:t[0]},l=function(e,t,{clamp:i=!0,ease:r,mixer:n}={}){let s=e.length;if(d2(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,i){let r=[],n=i||fm.mix||mc,s=e.length-1;for(let i=0;i<s;i++){let s=n(e[i],e[i+1]);t&&(s=p8(Array.isArray(t)?t[i]||fp:t,s)),r.push(s)}return r}(t,r,n),l=o.length,u=i=>{if(a&&i<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(i<e[r+1]);r++);let n=mq(e[r],e[r+1],i);return o[r](n)};return i?t=>u(dl(e[0],e[s-1],t)):u}((n=i&&i.length===t.length?i:(!function(e,t){let i=e[e.length-1];for(let r=1;r<=t;r++){let n=mq(0,t,r);e.push(po(i,1,n))}}(s=[0],t.length-1),s),n.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||mN).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let mH=e=>null!==e;function mK(e,{repeat:t,repeatType:i="loop"},r,n=1){let s=e.filter(mH),a=n<0||t&&"loop"!==i&&t%2==1?0:s.length-1;return a&&void 0!==r?r:s[a]}let mW={decay:mI,inertia:mI,tween:m$,keyframes:m$,spring:mT};function mG(e){"string"==typeof e.type&&(e.type=mW[e.type])}class mQ{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let mY=e=>e/100;class mX extends mQ{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==fj.now()&&this.tick(fj.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},p7.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;mG(e);let{type:t=m$,repeat:i=0,repeatDelay:r=0,repeatType:n,velocity:s=0}=e,{keyframes:a}=e,o=t||m$;o!==m$&&"number"!=typeof a[0]&&(this.mixKeyframes=p8(mY,mc(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===n&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=mp(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:i,totalDuration:r,mixKeyframes:n,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return i.next(0);let{delay:l=0,keyframes:u,repeat:h,repeatType:c,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,w=i;if(h){let e=Math.min(this.currentTime,r)/a,t=Math.floor(e),i=e%1;!i&&e>=1&&(i=1),1===i&&t--,(t=Math.min(t,h+1))%2&&("reverse"===c?(i=1-i,d&&(i-=d/a)):"mirror"===c&&(w=s)),v=dl(0,1,i)*a}let b=y?{done:!1,value:u[0]}:w.next(v);n&&(b.value=n(b.value));let{done:x}=b;y||null===o||(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return E&&f!==mI&&(b.value=mK(u,this.options,m,this.speed)),p&&p(b.value),E&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=p4(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fj.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=md,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fj.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,p7.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function mJ(e){let t;return()=>(void 0===t&&(t=e()),t)}let mZ=mJ(()=>void 0!==window.ScrollTimeline),m0={},m1=(l=mJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>m0.linearEasing??l()),m2=([e,t,i,r])=>`cubic-bezier(${e}, ${t}, ${i}, ${r})`,m6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:m2([0,.65,.55,1]),circOut:m2([.55,0,1,.45]),backIn:m2([.31,.01,.66,-.59]),backOut:m2([.33,1.53,.69,.99])};function m3(e){return"function"==typeof e&&"applyToOptions"in e}class m4 extends mQ{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:n,allowFlatten:s=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!n,this.allowFlatten=s,this.options=e,d2("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return m3(e)&&m1()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,i,{delay:r=0,duration:n=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u){let h={[t]:i};l&&(h.offset=l);let c=function e(t,i){if(t)return"function"==typeof t?m1()?mf(t,i):"ease-out":mU(t)?m2(t):Array.isArray(t)?t.map(t=>e(t,i)||m6.easeOut):m6[t]}(o,n);Array.isArray(c)&&(h.easing=c);let d={delay:r,duration:n,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};u&&(d.pseudoElement=u);let f=e.animate(h,d);return f}(t,i,r,l,n),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){let e=mK(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):i.startsWith("--")?t.style.setProperty(i,e):t.style[i]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=p4(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&mZ())?(this.animation.timeline=e,fp):t(this)}}let m5={anticipate:mL,backInOut:mM,circInOut:mF};class m8 extends m4{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in m5&&(e.ease=m5[e.ease])}(e),mG(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:i,onComplete:r,element:n,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new mX({...s,autoplay:!1}),o=Math.max(10,fj.now()-this.startTime),l=dl(0,10,o-10);t.setWithVelocity(a.sample(Math.max(0,o-l)).value,a.sample(o).value,l),a.stop()}}let m7=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(dj.test(e)||"0"===e)&&!e.startsWith("url("));function m9(e){e.duration=0,e.type="keyframes"}let ge=new Set(["opacity","clipPath","filter","transform"]),gt=mJ(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class gi extends mQ{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:s="loop",keyframes:a,name:o,motionValue:l,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=fj.now();const c={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:n,repeatType:s,name:o,motionValue:l,element:u,...h},d=u?.KeyframeResolver||fC;this.keyframeResolver=new d(a,(e,t,i)=>this.onKeyframesResolved(e,t,c,!i),o,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;let{name:n,type:s,velocity:a,delay:o,isHandoff:l,onUpdate:u}=i;this.resolvedAt=fj.now(),!function(e,t,i,r){let n=e[0];if(null===n)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],a=m7(n,t),o=m7(s,t);return d1(a===o,`You are trying to animate ${t} from "${n}" to "${s}". "${a?s:n}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}(e)||("spring"===i||m3(i))&&r)}(e,n,s,a)&&((fm.instantAnimations||!o)&&u?.(mK(e,i,t)),e[0]=e[e.length-1],m9(i),i.repeat=0);let h={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},c=!l&&function(e){let{motionValue:t,name:i,repeatDelay:r,repeatType:n,damping:s,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return gt()&&i&&ge.has(i)&&("transform"!==i||!l)&&!o&&!r&&"mirror"!==n&&0!==s&&"inertia"!==a}(h)?new m8({...h,element:h.motionValue.owner.current}):new mX(h);c.finished.then(()=>this.notifyFinished()).catch(fp),this.pendingTimeline&&(this.stopTimeline=c.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=c}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),fI=!0,fS(),f_(),fI=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let gr={type:"spring",stiffness:500,damping:25,restSpeed:10},gn={type:"keyframes",duration:.8},gs={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ga=e=>null!==e,go=(e,t,i,r={},n,s)=>a=>{let o=p2(r,e)||{},l=o.delay||r.delay||0,{elapsed:u=0}=r;u-=p4(l);let h={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:n};!function({when:e,delay:t,delayChildren:i,staggerChildren:r,staggerDirection:n,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}(o)&&Object.assign(h,((e,{keyframes:t})=>t.length>2?gn:da.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:gr:gs)(e,h)),h.duration&&(h.duration=p4(h.duration)),h.repeatDelay&&(h.repeatDelay=p4(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let c=!1;if(!1!==h.type&&(0!==h.duration||h.repeatDelay)||(m9(h),0===h.delay&&(c=!0)),(fm.instantAnimations||fm.skipAnimations)&&(c=!0,m9(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,c&&!s&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:i="loop"},r){let n=e.filter(ga),s=t&&"loop"!==i&&t%2==1?0:n.length-1;return n[s]}(h.keyframes,o);if(void 0!==e)return void fv.update(()=>{h.onUpdate(e),h.onComplete()})}return o.isSync?new mX(h):new gi(h)};function gl(e,t,{delay:i=0,transitionOverride:r,type:n}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(s=r);let l=[],u=n&&e.animationState&&e.animationState.getState()[n];for(let t in o){let r=e.getValue(t,e.latestValues[t]??null),n=o[t];if(void 0===n||u&&function({protectedKeys:e,needsAnimating:t},i){let r=e.hasOwnProperty(i)&&!0!==t[i];return t[i]=!1,r}(u,t))continue;let a={delay:i,...p2(s||{},t)},h=r.get();if(void 0!==h&&!r.isAnimating&&!Array.isArray(n)&&n===h&&!a.velocity)continue;let c=!1;if(window.MotionHandoffAnimation){let i=e.props[pQ];if(i){let e=window.MotionHandoffAnimation(i,t,fv);null!==e&&(a.startTime=e,c=!0)}}p3(e,t),r.start(go(t,r,n,e.shouldReduceMotion&&dX.has(t)?{type:!1}:a,e,c));let d=r.animation;d&&l.push(d)}return a&&Promise.all(l).then(()=>{fv.update(()=>{a&&function(e,t){let{transitionEnd:i={},transition:r={},...n}=p1(e,t)||{};for(let t in n={...n,...i}){var s;let i=p6(s=n[t])?s[s.length-1]||0:s;e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,fF(i))}}(e,a)})}),l}function gu(e,t,i,r=0,n=1){let s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*r;return"function"==typeof i?i(s,a):1===n?s*r:o-s*r}function gh(e,t,i={}){let r=p1(e,t,"exit"===i.type?e.presenceContext?.custom:void 0),{transition:n=e.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(n=i.transitionOverride);let s=r?()=>Promise.all(gl(e,r,i)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=n;return function(e,t,i=0,r=0,n=0,s=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(gh(l,t,{...a,delay:i+("function"==typeof r?0:r)+gu(e.variantChildren,l,r,n,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,s,a,o,i)}:()=>Promise.resolve(),{when:o}=n;if(!o)return Promise.all([s(),a(i.delay)]);{let[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}}let gc=fG.length;function gd(e,t){if(!Array.isArray(t))return!1;let i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}let gf=[...fW].reverse(),gp=fW.length;function gm(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gg(){return{animate:gm(!0),whileInView:gm(),whileHover:gm(),whileTap:gm(),whileDrag:gm(),whileFocus:gm(),exit:gm()}}let gy=0;function gv(e){return[e("x"),e("y")]}let gw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gb(e){return gw.has(e.tagName)||!0===e.isContentEditable}function gx(e,t,i,r={passive:!0}){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i)}let gE={x:!1,y:!1};function gA(e){return e.max-e.min}function gT(e,t,i,r=.5){e.origin=r,e.originPoint=po(t.min,t.max,e.origin),e.scale=gA(i)/gA(t),e.translate=po(i.min,i.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function gI(e,t,i,r){gT(e.x,t.x,i.x,r?r.originX:void 0),gT(e.y,t.y,i.y,r?r.originY:void 0)}function g_(e,t,i){e.min=i.min+t.min,e.max=e.min+gA(t)}function gS(e,t,i){e.min=t.min-i.min,e.max=e.min+gA(t)}function gC(e,t,i){gS(e.x,t.x,i.x),gS(e.y,t.y,i.y)}let gk=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function gN(e){return{point:{x:e.pageX,y:e.pageY}}}function gR(e,t,i,r){return gx(e,t,e=>gk(e)&&i(e,gN(e)),r)}let gP=({current:e})=>e?e.ownerDocument.defaultView:null,gD=(e,t)=>Math.abs(e-t),gO=new Set(["auto","scroll"]);class gM{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:n=!1,distanceThreshold:s=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let i=gV(this.lastMoveEventInfo,this.history),r=null!==this.startEvent,n=(e=i.offset,t={x:0,y:0},Math.sqrt(gD(e.x,t.x)**2+gD(e.y,t.y)**2)>=this.distanceThreshold);if(!r&&!n)return;let{point:s}=i,{timestamp:a}=fb;this.history.push({...s,timestamp:a});let{onStart:o,onMove:l}=this.handlers;r||(o&&o(this.lastMoveEvent,i),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,i)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=gL(t,this.transformPagePoint),fv.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:i,onSessionEnd:r,resumeAnimation:n}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&n&&n(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=gV("pointercancel"===e.type?this.lastMoveEventInfo:gL(t,this.transformPagePoint),this.history);this.startEvent&&i&&i(e,s),r&&r(e,s)},!gk(e))return;this.dragSnapToOrigin=n,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=s,this.contextWindow=r||window;const o=gL(gN(e),this.transformPagePoint),{point:l}=o,{timestamp:u}=fb;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,gV(o,this.history)),this.removeListeners=p8(gR(this.contextWindow,"pointermove",this.handlePointerMove),gR(this.contextWindow,"pointerup",this.handlePointerUp),gR(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(gO.has(e.overflowX)||gO.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let i=e===window,r=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},n={x:r.x-t.x,y:r.y-t.y};(0!==n.x||0!==n.y)&&(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=n.x,this.lastMoveEventInfo.point.y+=n.y):this.history.length>0&&(this.history[0].x-=n.x,this.history[0].y-=n.y),this.scrollPositions.set(e,r),fv.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),fw(this.updatePoint)}}function gL(e,t){return t?{point:t(e.point)}:e}function gj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gV({point:e},t){return{point:e,delta:gj(e,gF(t)),offset:gj(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,r=null,n=gF(e);for(;i>=0&&(r=e[i],!(n.timestamp-r.timestamp>p4(.1)));)i--;if(!r)return{x:0,y:0};let s=(n.timestamp-r.timestamp)/1e3;if(0===s)return{x:0,y:0};let a={x:(n.x-r.x)/s,y:(n.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function gF(e){return e[e.length-1]}function gU(e,t,i){return{min:void 0!==t?e.min+t:void 0,max:void 0!==i?e.max+i-(e.max-e.min):void 0}}function gB(e,t){let i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,r]=[r,i]),{min:i,max:r}}function gz(e,t,i){return{min:gq(e,t),max:gq(e,i)}}function gq(e,t){return"number"==typeof e?e:e[t]||0}let g$=new WeakMap;class gH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dQ(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let n=e=>{t?(this.stopAnimation(),this.snapToCursor(gN(e).point)):this.pauseAnimation()},s=(e,t)=>{this.stopAnimation();let{drag:i,dragPropagation:r,onDragStart:n}=this.getProps();if(i&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(gE[e])return null;else return gE[e]=!0,()=>{gE[e]=!1};return gE.x||gE.y?null:(gE.x=gE.y=!0,()=>{gE.x=gE.y=!1})}(i),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gv(e=>{let t=this.getAxisMotionValue(e).get()||0;if(dE.test(t)){let{projection:i}=this.visualElement;if(i&&i.layout){let r=i.layout.layoutBox[e];r&&(t=gA(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),n&&fv.postRender(()=>n(e,t)),p3(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:i,dragDirectionLock:r,onDirectionLock:n,onDrag:s}=this.getProps();if(!i&&!this.openDragLock)return;let{offset:a}=t;if(r&&null===this.currentDirection){this.currentDirection=function(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}(a),null!==this.currentDirection&&n&&n(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>gv(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new gM(e,{onSessionStart:n,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:gP(this.visualElement),element:this.visualElement.current})}stop(e,t){let i=e||this.latestPointerEvent,r=t||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!r||!i)return;let{velocity:s}=r;this.startAnimation(s);let{onDragEnd:a}=this.getProps();a&&fv.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){let{drag:r}=this.getProps();if(!i||!gK(e,r,this.currentDirection))return;let n=this.getAxisMotionValue(e),s=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:i},r){return void 0!==t&&e<t?e=r?po(t,e,r.min):Math.max(e,t):void 0!==i&&e>i&&(e=r?po(i,e,r.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),n.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&pX(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=function(e,{top:t,left:i,bottom:r,right:n}){return{x:gU(e.x,i,n),y:gU(e.y,t,r)}}(i.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:gz(e,"left","right"),y:gz(e,"top","bottom")}}(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gv(e=>{var t,r;let n;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=i.layoutBox[e],r=this.constraints[e],n={},void 0!==r.min&&(n.min=r.min-t.min),void 0!==r.max&&(n.max=r.max-t.min),n))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!pX(t))return!1;let r=t.current;d2(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:n}=this.visualElement;if(!n||!n.layout)return!1;let s=function(e,t,i){let r=pT(e,i),{scroll:n}=t;return n&&(px(r.x,n.offset.x),px(r.y,n.offset.y)),r}(r,n.root,this.visualElement.getTransformPagePoint()),a=(e=n.layout.layoutBox,{x:gB(e.x,s.x),y:gB(e.y,s.y)});if(i){let e=i(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=pf(e))}return a}startAnimation(e){let{drag:t,dragMomentum:i,dragElastic:r,dragTransition:n,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(gv(a=>{if(!gK(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let u={type:"inertia",velocity:i?e[a]:0,bounceStiffness:r?200:1e6,bounceDamping:r?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...n,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let i=this.getAxisMotionValue(e);return p3(this.visualElement,e),i.start(go(e,i,0,t,this.visualElement,!1))}stopAnimation(){gv(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gv(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps();return i[t]||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){gv(t=>{let{drag:i}=this.getProps();if(!gK(t,i,this.currentDirection))return;let{projection:r}=this.visualElement,n=this.getAxisMotionValue(t);if(r&&r.layout){let{min:i,max:s}=r.layout.layoutBox[t],a=n.get()||0;n.set(e[t]-po(i,s,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!pX(t)||!i||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};gv(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var i,n;let s,a,o,l=t.get();r[e]=(i={min:l,max:l},n=this.constraints[e],s=.5,a=gA(i),(o=gA(n))>a?s=mq(n.min,n.max-a,i.min):a>o&&(s=mq(i.min,i.max-o,n.min)),dl(0,1,s))}});let{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gv(t=>{if(!gK(t,e,null))return;let i=this.getAxisMotionValue(t),{min:n,max:s}=this.constraints[t];i.set(po(n,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;g$.set(this.visualElement,this);let e=gR(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:i=!0}=this.getProps();t&&i&&!gb(e.target)&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();pX(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",t);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),fv.read(t);let n=gx(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(gv(t=>{let i=this.getAxisMotionValue(t);i&&(this.originPoint[t]+=e[t].translate,i.set(i.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),e(),r(),s&&s()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:n=!1,dragElastic:s=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:n,dragElastic:s,dragMomentum:a}}}function gK(e,t,i){return(!0===t||t===e)&&(null===i||i===e)}let gW=e=>(t,i)=>{e&&fv.postRender(()=>e(t,i))},gG={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var gQ=N;let gY=!1;class gX extends gQ.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:n}=e;n&&(t.group&&t.group.add(n),i&&i.register&&r&&i.register(n),gY&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),gG.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:i,drag:r,isPresent:n}=this.props,{projection:s}=i;return s&&(s.isPresent=n,gY=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==n?s.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?s.promote():s.relegate()||fv.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;gY=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gJ(e){let[t,i]=function(e=!0){let t=(0,N.useContext)(pU);if(null===t)return[!0,null];let{isPresent:i,onExitComplete:r,register:n}=t,s=(0,N.useId)();(0,N.useEffect)(()=>{if(e)return n(s)},[e]);let a=(0,N.useCallback)(()=>e&&r&&r(s),[s,r,e]);return!i&&r?[!1,a]:[!0]}(),r=(0,gQ.useContext)(pC);return(0,k.jsx)(gX,{...e,layoutGroup:r,switchLayoutGroup:(0,gQ.useContext)(pY),isPresent:t,safeToRemove:i})}function gZ(e,t,i,r,n){return e-=t,e=r+1/i*(e-r),void 0!==n&&(e=r+1/n*(e-r)),e}function g0(e,t,[i,r,n],s,a){!function(e,t=0,i=1,r=.5,n,s=e,a=e){if(dE.test(t)&&(t=parseFloat(t),t=po(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=po(s.min,s.max,r);e===s&&(o-=t),e.min=gZ(e.min,t,i,o,n),e.max=gZ(e.max,t,i,o,n)}(e,t[i],t[r],t[n],t.scale,s,a)}let g1=["x","scaleX","originX"],g2=["y","scaleY","originY"];function g6(e,t,i,r){g0(e.x,t,g1,i?i.x:void 0,r?r.x:void 0),g0(e.y,t,g2,i?i.y:void 0,r?r.y:void 0)}function g3(e,t){e.min=t.min,e.max=t.max}function g4(e,t){g3(e.x,t.x),g3(e.y,t.y)}function g5(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function g8(e){return 0===e.translate&&1===e.scale}function g7(e){return g8(e.x)&&g8(e.y)}function g9(e,t){return e.min===t.min&&e.max===t.max}function ye(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function yt(e,t){return ye(e.x,t.x)&&ye(e.y,t.y)}function yi(e){return gA(e.x)/gA(e.y)}function yr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}let yn=["TopLeft","TopRight","BottomLeft","BottomRight"],ys=yn.length,ya=e=>"string"==typeof e?parseFloat(e):e,yo=e=>"number"==typeof e||dA.test(e);function yl(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let yu=yc(0,.5,mV),yh=yc(.5,.95,fp);function yc(e,t,i){return r=>r<e?0:r>t?1:i(mq(e,t,r))}function yd(e){return"object"==typeof e&&null!==e}function yf(e){return yd(e)&&"ownerSVGElement"in e}let yp=(e,t)=>e.depth-t.depth;class ym{constructor(){this.children=[],this.isDirty=!1}add(e){fP(this.children,e),this.isDirty=!0}remove(e){fD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yp),this.isDirty=!1,this.children.forEach(e)}}class yg{constructor(){this.members=[]}add(e){fP(this.members,e),e.scheduleRender()}remove(e){if(fD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,i=this.members.findIndex(t=>e===t);if(0===i)return!1;for(let e=i;e>=0;e--){let i=this.members[e];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:r}=e.options;!1===r&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let yy=["","X","Y","Z"],yv=0;function yw(e,t,i,r){let{latestValues:n}=t;n[e]&&(i[e]=n[e],t.setStaticValue(e,0),r&&(r[e]=0))}function yb({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(e={},i=t?.()){this.id=yv++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yA),this.nodes.forEach(yN),this.nodes.forEach(yR),this.nodes.forEach(yT)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new ym)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new fO),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let i=this.eventHandlers.get(e);i&&i.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=yf(t)&&!(yf(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:i,layout:r,visualElement:n}=this.options;if(n&&!n.current&&n.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||i)&&(this.isLayoutDirty=!0),e){let i,r=0,n=()=>this.root.updateBlockedByResize=!1;fv.read(()=>{r=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==r){let t,s;r=e,this.root.updateBlockedByResize=!0,i&&i(),t=fj.now(),s=({timestamp:e})=>{let i=e-t;i>=250&&(fw(s),n(i-250))},fv.setup(s,!0),i=()=>fw(s),gG.hasAnimatedSinceResize&&(gG.hasAnimatedSinceResize=!1,this.nodes.forEach(yk))}})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&n&&(i||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:i,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||n.getDefaultTransition()||yj,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=n.getProps(),l=!this.targetLayout||!yt(this.targetLayout,r),u=!t&&i;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...p2(s,"layout"),onPlay:a,onComplete:o};(n.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||yk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fw(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yP),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:i}=t.options;if(!i)return;let r=i.props[pQ];if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:e,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",fv,!(e||i))}let{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&e(n)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:i}=this.options;if(void 0===t&&!i)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(y_);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(yS);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yC),this.nodes.forEach(yx),this.nodes.forEach(yE)):this.nodes.forEach(yS),this.clearAllSnapshots();let e=fj.now();fb.delta=dl(0,1e3/60,e-fb.timestamp),fb.timestamp=e,fb.isProcessing=!0,fx.update.process(fb),fx.preRender.process(fb),fx.render.process(fb),fb.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yI),this.sharedNodes.forEach(yD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fv.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fv.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||gA(this.snapshot.measuredBox.x)||gA(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dQ(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!n)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!g7(this.projectionDelta),i=this.getTransformTemplate(),r=i?i(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||pg(this.latestValues)||s)&&(n(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let i=this.measurePageBox(),r=this.removeElementScroll(i);return e&&(r=this.removeTransform(r)),yU((t=r).x),yU(t.y),{animationId:this.root.animationId,measuredBox:i,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return dQ();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(yz))){let{scroll:e}=this.root;e&&(px(t.x,e.offset.x),px(t.y,e.offset.y))}return t}removeElementScroll(e){let t=dQ();if(g4(t,e),this.scroll?.wasRoot)return t;for(let i=0;i<this.path.length;i++){let r=this.path[i],{scroll:n,options:s}=r;r!==this.root&&n&&s.layoutScroll&&(n.wasRoot&&g4(t,e),px(t.x,n.offset.x),px(t.y,n.offset.y))}return t}applyTransform(e,t=!1){let i=dQ();g4(i,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&pA(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),pg(r.latestValues)&&pA(i,r.latestValues)}return pg(this.latestValues)&&pA(i,this.latestValues),i}removeTransform(e){let t=dQ();g4(t,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];if(!i.instance||!pg(i.latestValues))continue;pm(i.latestValues)&&i.updateSnapshot();let r=dQ();g4(r,i.measurePageBox()),g6(t,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,r)}return pg(this.latestValues)&&g6(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fb.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let i=!!this.resumingFrom||this!==t;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:n}=this.options;if(!this.layout||!(r||n))return;this.resolvedRelativeTargetAt=fb.timestamp;let s=this.getClosestProjectingParent();if(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=dQ(),this.targetWithTransforms=dQ()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,g_(a.x,o.x,l.x),g_(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):g4(this.target,this.layout.layoutBox),pb(this.target,this.targetDelta)):g4(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&!!s.resumingFrom==!!this.resumingFrom&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||pm(this.parent.latestValues)||py(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,i){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dQ(),this.relativeTargetOrigin=dQ(),gC(this.relativeTargetOrigin,t,i),g4(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,i=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(i=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===fb.timestamp&&(i=!1),i)return;let{layout:r,layoutId:n}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||n))return;g4(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,a=this.treeScale.y;!function(e,t,i,r=!1){let n,s,a=i.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(n=i[o]).projectionDelta;let{visualElement:a}=n.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(r&&n.options.layoutScroll&&n.scroll&&n!==n.root&&pA(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,pb(e,s)),r&&pg(n.latestValues)&&pA(e,n.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=dQ());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(g5(this.prevProjectionDelta.x,this.projectionDelta.x),g5(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),gI(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&yr(this.projectionDelta.x,this.prevProjectionDelta.x)&&yr(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dW(),this.projectionDelta=dW(),this.projectionDeltaWithTransform=dW()}setAnimationOrigin(e,t=!1){let i,r=this.snapshot,n=r?r.latestValues:{},s={...this.latestValues},a=dW();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=dQ(),l=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),h=!u||u.members.length<=1,c=!!(l&&!h&&!0===this.options.crossfade&&!this.path.some(yL));this.animationProgress=0,this.mixTargetDelta=t=>{let r=t/1e3;if(yO(a.x,e.x,r),yO(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,f,p,m,g;gC(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=o,g=r,yM(f.x,p.x,m.x,g),yM(f.y,p.y,m.y,g),i&&(u=this.relativeTarget,d=i,g9(u.x,d.x)&&g9(u.y,d.y))&&(this.isProjectionDirty=!1),i||(i=dQ()),g4(i,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,i,r,n,s){n?(e.opacity=po(0,i.opacity??1,yu(r)),e.opacityExit=po(t.opacity??1,0,yh(r))):s&&(e.opacity=po(t.opacity??1,i.opacity??1,r));for(let n=0;n<ys;n++){let s=`border${yn[n]}Radius`,a=yl(t,s),o=yl(i,s);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||yo(a)===yo(o)?(e[s]=Math.max(po(ya(a),ya(o),r),0),(dE.test(o)||dE.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||i.rotate)&&(e.rotate=po(t.rotate||0,i.rotate||0,r))}(s,n,this.latestValues,r,c,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fw(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fv.update(()=>{var t,i,r;let n;gG.hasAnimatedSinceResize=!0,p7.layout++,this.motionValue||(this.motionValue=fF(0)),this.currentAnimation=(t=this.motionValue,i=[0,1e3],r={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{p7.layout--},onComplete:()=>{p7.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(n=dY(t)?t:fF(t)).start(go("",n,i,r)),n.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:i,layout:r,latestValues:n}=e;if(t&&i&&r){if(this!==e&&this.layout&&r&&yB(this.options.animationType,this.layout.layoutBox,r.layoutBox)){i=this.target||dQ();let t=gA(this.layout.layoutBox.x);i.x.min=e.target.x.min,i.x.max=i.x.min+t;let r=gA(this.layout.layoutBox.y);i.y.min=e.target.y.min,i.y.max=i.y.min+r}g4(t,i),pA(t,n),gI(this.projectionDeltaWithTransform,this.layoutCorrected,t,n)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new yg),this.sharedNodes.get(e).add(t);let i=t.options.initialPromotionConfig;t.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:i}={}){let r=this.getStack();r&&r.promote(this,i),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:i}=e;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(t=!0),!t)return;let r={};i.z&&yw("z",e,r,this.animationValues);for(let t=0;t<yy.length;t++)yw(`rotate${yy[t]}`,e,r,this.animationValues),yw(`skew${yy[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let i=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=pF(t?.pointerEvents)||"",e.transform=i?i(this.latestValues,""):"none";return}let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=pF(t?.pointerEvents)||""),this.hasProjected&&!pg(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1);return}e.visibility="";let n=r.animationValues||r.latestValues;this.applyTransformsToTarget();let s=function(e,t,i){let r="",n=e.x.translate/t.x,s=e.y.translate/t.y,a=i?.z||0;if((n||s||a)&&(r=`translate3d(${n}px, ${s}px, ${a}px) `),(1!==t.x||1!==t.y)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),i){let{transformPerspective:e,rotate:t,rotateX:n,rotateY:s,skewX:a,skewY:o}=i;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),n&&(r+=`rotateX(${n}deg) `),s&&(r+=`rotateY(${s}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,n);i&&(s=i(n,s)),e.transform=s;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?n.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:n.opacityExit:e.opacity=r===this?void 0!==n.opacity?n.opacity:"":void 0!==n.opacityExit?n.opacityExit:0,pl){if(void 0===n[t])continue;let{correct:i,applyTo:a,isCSSVariable:o}=pl[t],l="none"===s?n[t]:i(n[t],r);if(a){let t=a.length;for(let i=0;i<t;i++)e[a[i]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=r===this?pF(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(y_),this.root.sharedNodes.clear()}}}function yx(e){e.updateLayout()}function yE(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:i,measuredBox:r}=e.layout,{animationType:n}=e.options,s=t.source!==e.layout.source;"size"===n?gv(e=>{let r=s?t.measuredBox[e]:t.layoutBox[e],n=gA(r);r.min=i[e].min,r.max=r.min+n}):yB(n,t.layoutBox,i)&&gv(r=>{let n=s?t.measuredBox[r]:t.layoutBox[r],a=gA(i[r]);n.max=n.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});let a=dW();gI(a,i,t.layoutBox);let o=dW();s?gI(o,e.applyTransform(r,!0),t.measuredBox):gI(o,i,t.layoutBox);let l=!g7(a),u=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:n,layout:s}=r;if(n&&s){let a=dQ();gC(a,t.layoutBox,n.layoutBox);let o=dQ();gC(o,i,s.layoutBox),yt(a,o)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function yA(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function yT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function yI(e){e.clearSnapshot()}function y_(e){e.clearMeasurements()}function yS(e){e.isLayoutDirty=!1}function yC(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yk(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yN(e){e.resolveTargetDelta()}function yR(e){e.calcProjection()}function yP(e){e.resetSkewAndRotation()}function yD(e){e.removeLeadSnapshot()}function yO(e,t,i){e.translate=po(t.translate,0,i),e.scale=po(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function yM(e,t,i,r){e.min=po(t.min,i.min,r),e.max=po(t.max,i.max,r)}function yL(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let yj={duration:.45,ease:[.4,0,.1,1]},yV=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),yF=yV("applewebkit/")&&!yV("chrome/")?Math.round:fp;function yU(e){e.min=yF(e.min),e.max=yF(e.max)}function yB(e,t,i){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(yi(t)-yi(i)))}function yz(e){return e!==e.root&&e.scroll?.wasRoot}let yq=yb({attachResizeListener:(e,t)=>gx(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),y$={current:void 0},yH=yb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!y$.current){let e=new yq({});e.mount(window),e.setOptions({layoutScroll:!0}),y$.current=e}return y$.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function yK(e,t){let i=function(e,t,i){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,i=(void 0)??t.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}(e),r=new AbortController;return[i,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function yW(e){return!("touch"===e.pointerType||gE.x||gE.y)}function yG(e,t,i){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===i);let n=r["onHover"+i];n&&fv.postRender(()=>n(t,gN(t)))}let yQ=(e,t)=>!!t&&(e===t||yQ(e,t.parentElement)),yY=new WeakSet;function yX(e){return t=>{"Enter"===t.key&&e(t)}}function yJ(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function yZ(e){return gk(e)&&!(gE.x||gE.y)}function y0(e,t,i){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===i);let n=r["onTap"+("End"===i?"":i)];n&&fv.postRender(()=>n(t,gN(t)))}let y1=new WeakMap,y2=new WeakMap,y6=e=>{let t=y1.get(e.target);t&&t(e)},y3=e=>{e.forEach(y6)},y4={some:0,all:1},y5=function(e,t){if("u"<typeof Proxy)return pZ;let i=new Map,r=(i,r)=>pZ(i,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(n,s)=>"create"===s?r:(i.has(s)||i.set(s,pZ(s,void 0,e,t)),i.get(s))})}({animation:{Feature:class extends p0{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:i})=>(function(e,t,i={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t))r=Promise.all(t.map(t=>gh(e,t,i)));else if("string"==typeof t)r=gh(e,t,i);else{let n="function"==typeof t?p1(e,t,i.custom):t;r=Promise.all(gl(e,n,i))}return r.then(()=>{e.notify("AnimationComplete",t)})})(e,t,i))),i=gg(),r=!0,n=t=>(i,r)=>{let n=p1(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(n){let{transition:e,transitionEnd:t,...r}=n;i={...i,...r,...t}}return i};function s(s){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let i=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(i.initial=t.props.initial),i}let i={};for(let e=0;e<gc;e++){let r=fG[e],n=t.props[r];(fK(n)||!1===n)&&(i[r]=n)}return i}(e.parent)||{},l=[],u=new Set,h={},c=1/0;for(let t=0;t<gp;t++){var d,f;let p=gf[t],m=i[p],g=void 0!==a[p]?a[p]:o[p],y=fK(g),v=p===s?m.isActive:null;!1===v&&(c=t);let w=g===o[p]&&g!==a[p]&&y;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys={...h},!m.isActive&&null===v||!g&&!m.prevProp||fH(g)||"boolean"==typeof g)continue;let b=(d=m.prevProp,"string"==typeof(f=g)?f!==d:!!Array.isArray(f)&&!gd(f,d)),x=b||p===s&&m.isActive&&!w&&y||t>c&&y,E=!1,A=Array.isArray(g)?g:[g],T=A.reduce(n(p),{});!1===v&&(T={});let{prevResolvedValues:I={}}=m,_={...I,...T},S=t=>{x=!0,u.has(t)&&(E=!0,u.delete(t)),m.needsAnimating[t]=!0;let i=e.getValue(t);i&&(i.liveStyle=!1)};for(let e in _){let t=T[e],i=I[e];if(!h.hasOwnProperty(e))(p6(t)&&p6(i)?gd(t,i):t===i)?void 0!==t&&u.has(e)?S(e):m.protectedKeys[e]=!0:null!=t?S(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=T,m.isActive&&(h={...h,...T}),r&&e.blockInitialAnimation&&(x=!1);let C=w&&b,k=!C||E;x&&k&&l.push(...A.map(t=>{let i={type:p};if("string"==typeof t&&r&&!C&&e.manuallyAnimateOnMount&&e.parent){let{parent:r}=e,n=p1(r,t);if(r.enteringChildren&&n){let{delayChildren:t}=n.transition||{};i.delay=gu(r.enteringChildren,e,t)}}return{animation:t,options:i}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let i=p1(e,Array.isArray(a.initial)?a.initial[0]:a.initial);i&&i.transition&&(t.transition=i.transition)}u.forEach(i=>{let r=e.getBaseTarget(i),n=e.getValue(i);n&&(n.liveStyle=!0),t[i]=r??null}),l.push({animation:t})}let p=!!l.length;return r&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){if(i[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),i[t].isActive=r;let n=s(t);for(let e in i)i[e].protectedKeys={};return n},setAnimateFunction:function(i){t=i(e)},getState:()=>i,reset:()=>{i=gg()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();fH(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends p0{constructor(){super(...arguments),this.id=gy++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;let r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends p0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:i={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=i,o={root:r?r.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:y4[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:i,onViewportLeave:r}=this.node.getProps(),n=t?i:r;n&&n(e)};return e=this.node.current,t=function({root:e,...t}){let i=e||document;y2.has(i)||y2.set(i,{});let r=y2.get(i),n=JSON.stringify(t);return r[n]||(r[n]=new IntersectionObserver(y3,{root:e,...t})),r[n]}(o),y1.set(e,l),t.observe(e),()=>{y1.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends p0{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[r,n,s]=yK(e,i),a=e=>{let r=e.currentTarget;if(!yZ(e))return;yY.add(r);let s=t(r,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),yY.has(r)&&yY.delete(r),yZ(e)&&"function"==typeof s&&s(e,{success:t})},o=e=>{a(e,r===window||r===document||i.useGlobalTarget||yQ(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,n),window.addEventListener("pointercancel",l,n)};return r.forEach(e=>{(i.useGlobalTarget?window:e).addEventListener("pointerdown",a,n),yd(e)&&"offsetHeight"in e&&(e.addEventListener("focus",e=>((e,t)=>{let i=e.currentTarget;if(!i)return;let r=yX(()=>{if(yY.has(i))return;yJ(i,"down");let e=yX(()=>{yJ(i,"up")});i.addEventListener("keyup",e,t),i.addEventListener("blur",()=>yJ(i,"cancel"),t)});i.addEventListener("keydown",r,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),t)})(e,n)),gb(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}(e,(e,t)=>(y0(this.node,t,"Start"),(e,{success:t})=>y0(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends p0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=p8(gx(this.node.current,"focus",()=>this.onFocus()),gx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends p0{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[r,n,s]=yK(e,i),a=e=>{if(!yW(e))return;let{target:i}=e,r=t(i,e);if("function"!=typeof r||!i)return;let s=e=>{yW(e)&&(r(e),i.removeEventListener("pointerleave",s))};i.addEventListener("pointerleave",s,n)};return r.forEach(e=>{e.addEventListener("pointerenter",a,n)}),s}(e,(e,t)=>(yG(this.node,t,"Start"),e=>yG(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends p0{constructor(){super(...arguments),this.removePointerDownListener=fp}onPointerDown(e){this.session=new gM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gP(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:gW(e),onStart:gW(t),onMove:i,onEnd:(e,t)=>{delete this.session,r&&fv.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=gR(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends p0{constructor(e){super(e),this.removeGroupControls=fp,this.removeListeners=fp,this.controls=new gH(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fp}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:yH,MeasureLayout:gJ},layout:{ProjectionNode:yH,MeasureLayout:gJ}},(e,t)=>t.isSVG??pS(e)?new pd(t):new pI(t,{allowProjection:e!==N.Fragment})),y8=({id:e,title:t,completed:i,timestamp:r,onToggle:n,onDelete:s})=>(0,k.jsxs)(y5.div,{layoutId:e,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group relative bg-white rounded-[var(--radius-lg)] p-4 mb-3 flex items-start space-x-4 material-shadow-1 hover:shadow-md transition-shadow",children:[(0,k.jsx)("button",{onClick:n,className:`mt-1 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${i?"bg-primary border-primary text-white":"border-slate-300 hover:border-primary"}`,children:i&&(0,k.jsx)(dn,{size:14,strokeWidth:3})}),(0,k.jsx)("div",{className:"flex-1 min-w-0",children:(0,k.jsx)("div",{className:"flex items-start justify-between",children:(0,k.jsxs)("div",{className:"flex-1",children:[r&&(0,k.jsx)("div",{className:"flex items-center space-x-2 text-xs text-slate-400 mb-1",children:(0,k.jsx)("span",{children:r})}),(0,k.jsx)("h4",{className:`text-base font-medium leading-relaxed transition-all ${i?"text-slate-400 line-through decoration-2 decoration-slate-200":"text-slate-800"}`,children:t})]})})}),(0,k.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity absolute right-4 top-4 flex items-center bg-white pl-2",children:(0,k.jsx)("button",{onClick:s,className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:(0,k.jsx)(dr,{size:18})})})]}),y7=c3("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),y9=({onClick:e})=>(0,k.jsx)("button",{onClick:e,className:"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 rounded-full text-white shadow-xl flex items-center justify-center hover:bg-blue-700 active:scale-90 transition-all z-50 material-fab-shadow","aria-label":"Add Item",children:(0,k.jsx)(y7,{size:32,strokeWidth:2.5})}),ve=({userName:e,onNavigateToLists:t})=>{let[i,r]=(0,N.useState)([{id:"1",title:"Project retrospective",completed:!1,timestamp:"Today, 4:50 PM"},{id:"2",title:"Evening team meeting",completed:!1,timestamp:"Today, 4:50 PM"},{id:"3",title:"Create monthly deck",completed:!1,timestamp:"Today"},{id:"4",title:"Shop for groceries",completed:!1,timestamp:"Today, 6:00 PM"},{id:"5",title:"Read book",completed:!1,timestamp:"Yesterday, 10:30 PM"}]);return(0,k.jsxs)("div",{className:"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h1",{className:"text-3xl font-bold text-slate-900",children:["Hello ",e?.split(" ")[0]||"User",","]}),(0,k.jsx)("p",{className:"text-slate-500 mt-1",children:"You have work today"})]}),(0,k.jsxs)("div",{className:"flex gap-4",children:[(0,k.jsx)("button",{className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,k.jsx)(c9,{size:24})}),(0,k.jsx)("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,k.jsx)(de,{size:24})})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-10",children:[(0,k.jsx)(di,{title:"Today",count:9,icon:c4,variant:"blue"}),(0,k.jsx)(di,{title:"Scheduled",count:5,icon:c5,variant:"yellow"}),(0,k.jsx)(di,{title:"All",count:14,icon:c8,variant:"green"}),(0,k.jsx)(di,{title:"Overdue",count:3,icon:c7,variant:"pink"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-lg font-bold text-slate-800 mb-6",children:"Today's Task"}),(0,k.jsx)("div",{className:"space-y-1",children:i.map(e=>(0,k.jsx)(y8,{id:e.id,title:e.title,completed:e.completed,timestamp:e.timestamp,onToggle:()=>{var t;return t=e.id,void r(e=>e.map(e=>e.id===t?{...e,completed:!e.completed}:e))},onDelete:()=>{}},e.id))})]}),(0,k.jsx)(y9,{onClick:()=>console.log("Add")})]})},vt=c3("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),vi=c3("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),vr=({title:e,itemsCount:t,pantryCount:i,variant:r,activeTab:n,onClick:s})=>{let a="shopping"===n;return(0,k.jsxs)("div",{onClick:s,className:dt("rounded-[var(--radius-xl)] p-6 relative overflow-hidden material-shadow-1 transition-transform active:scale-98 cursor-pointer group h-40 flex flex-col justify-between",{blue:"bg-card-blue text-on-card-blue",yellow:"bg-card-yellow text-on-card-yellow",green:"bg-card-green text-on-card-green",pink:"bg-card-pink text-on-card-pink",purple:"bg-purple-200 text-purple-900"}[r]),children:[(0,k.jsxs)("div",{className:"flex justify-between items-start",children:[(0,k.jsx)("h3",{className:"text-xl font-bold tracking-tight",children:e}),(0,k.jsx)("div",{className:"bg-white/30 px-3 py-1 rounded-full backdrop-blur-sm",children:(0,k.jsx)("span",{className:"text-xs font-semibold",children:a?`${t} To Buy`:`${i} In Pantry`})})]}),(0,k.jsxs)("div",{className:"flex justify-between items-end",children:[(0,k.jsx)("p",{className:"text-sm font-medium opacity-80",children:a?`${i} In Pantry`:`${t} To Buy`}),(0,k.jsx)("button",{className:"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center transition-colors group-hover:bg-black/20",children:(0,k.jsx)(vi,{size:20})})]})]})},vn=({activeTab:e,onTabChange:t,className:i})=>(0,k.jsxs)("div",{className:dt("flex p-1 rounded-full mb-6 relative",i||"bg-slate-200"),children:[(0,k.jsx)("button",{onClick:()=>t("shopping"),className:dt("flex-1 py-3 text-sm font-bold rounded-full transition-all z-10","shopping"===e?"bg-white text-slate-900 shadow-sm":"text-current opacity-60 hover:opacity-100"),children:"Shopping List"}),(0,k.jsx)("button",{onClick:()=>t("pantry"),className:dt("flex-1 py-3 text-sm font-bold rounded-full transition-all z-10","pantry"===e?"bg-white text-slate-900 shadow-sm":"text-current opacity-60 hover:opacity-100"),children:"What's in Pantry"})]}),vs=c3("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),va=c3("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var vo=function(){return(vo=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},vl=function(e){return{loading:null==e,value:e}},vu=function(e){var t=e?e():void 0,i=(0,N.useReducer)(function(e,t){switch(t.type){case"error":return vo(vo({},e),{error:t.error,loading:!1,value:void 0});case"reset":return vl(t.defaultValue);case"value":return vo(vo({},e),{error:void 0,loading:!1,value:t.value});default:return e}},vl(t)),r=i[0],n=i[1],s=(0,N.useCallback)(function(){n({type:"reset",defaultValue:e?e():void 0})},[e]),a=(0,N.useCallback)(function(e){n({type:"error",error:e})},[]),o=(0,N.useCallback)(function(e){n({type:"value",value:e})},[]);return(0,N.useMemo)(function(){return{error:r.error,loading:r.loading,reset:s,setError:a,setValue:o,value:r.value}},[r.error,r.loading,s,a,o,r.value])},vh=function(e,t,i){var r=(0,N.useRef)(e);return(0,N.useEffect)(function(){!t(e,r.current)&&(r.current=e,i&&i())}),r},vc=function(e,t){var i,r,n=!e&&!t,s=!!e&&!!t&&(i=e,r=t,i=ec(i),r=ec(r),i instanceof uG&&r instanceof uG&&i.firestore===r.firestore&&ah(i._query,r._query)&&i.converter===r.converter);return n||s},vd=function(e,t){var i=vu(),r=i.error,n=i.loading,s=i.reset,a=i.setError,o=i.setValue,l=i.value,u=vh(e,vc,s);return(0,N.useEffect)(function(){if(!u.current)return void o(void 0);var e=(null==t?void 0:t.snapshotListenOptions)?hH(u.current,t.snapshotListenOptions,o,a):hH(u.current,o,a);return function(){e()}},[u.current]),[l,n,r]};let vf=async(e,t,i)=>{try{let r=uJ(cZ,"items",t.id);await hz(r,{isBought:!0});let n=uX(cZ,"pantry"),s=h_(n,hC("userId","==",e),hC("sourceListId","==",t.listId),hC("name","==",t.name)),a=await hU(s);if(a.empty)await h$(n,{name:t.name,quantity:t.quantity||1,unit:t.unit||"",sourceListId:t.listId,sourceListName:i,lastUpdated:Date.now(),userId:e});else{let e=a.docs[0];await hz(e.ref,{quantity:hG(t.quantity||1),lastUpdated:Date.now()})}}catch(e){throw console.error("Error moving item to pantry:",e),e}},vp=async(e,t,i=!1)=>{try{let r=uJ(cZ,"pantry",t.id);if(t.quantity>1?await hz(r,{quantity:hG(-1),lastUpdated:Date.now()}):await hq(r),i){let i=t.sourceListId||"default",r=uX(cZ,"items"),n=h_(r,hC("listId","==",i),hC("name","==",t.name),hC("isBought","==",!1)),s=await hU(n);s.empty?await h$(r,{name:t.name,listId:i,isBought:!1,quantity:1,addedAt:Date.now(),userId:e}):await hz(s.docs[0].ref,{quantity:hG(1)})}}catch(e){throw console.error("Error depleting item from pantry:",e),e}},vm=({listId:e,listName:t,userId:i,variant:r,activeTab:n,onBack:s})=>{let[a,o]=(0,N.useState)(n),[l,u]=(0,N.useState)(""),[h]=vd(h_(uX(cZ,"items"),hC("listId","==",e),hC("isBought","==",!1))),[c]=vd(h_(uX(cZ,"pantry"),hC("sourceListId","==",e),hC("userId","==",i))),d=h?.docs.map(e=>({id:e.id,...e.data()}))||[],f=c?.docs.map(e=>({id:e.id,...e.data()}))||[],p=async t=>{if(t.preventDefault(),!l.trim())return;let r=d.find(e=>e.name.toLowerCase()===l.trim().toLowerCase());r?await hz(uJ(cZ,"items",r.id),{quantity:hG(1)}):await h$(uX(cZ,"items"),{listId:e,userId:i,name:l,isBought:!1,quantity:1,addedAt:Date.now()}),u("")},m=async e=>{await vf(i,e,t)},g=async e=>{await vp(i,e,!0)},y=async t=>{let r=d.find(e=>e.name===t.name);r?await hz(uJ(cZ,"items",r.id),{quantity:hG(1)}):await h$(uX(cZ,"items"),{listId:t.sourceListId||e,userId:i,name:t.name,isBought:!1,quantity:1,addedAt:Date.now()})},v=async e=>{await hq(uJ(cZ,"pantry",e.id))},w={blue:{bg:"bg-card-blue",text:"text-on-card-blue",input:"placeholder-indigo-300"},yellow:{bg:"bg-card-yellow",text:"text-on-card-yellow",input:"placeholder-yellow-600"},green:{bg:"bg-card-green",text:"text-on-card-green",input:"placeholder-emerald-600"},pink:{bg:"bg-card-pink",text:"text-on-card-pink",input:"placeholder-pink-400"},purple:{bg:"bg-purple-200",text:"text-purple-900",input:"placeholder-purple-400"}}[r];return(0,k.jsxs)("div",{className:`min-h-[60vh] rounded-[var(--radius-xl)] p-6 ${w.bg} ${w.text} material-shadow-2 flex flex-col`,children:[(0,k.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,k.jsx)("button",{onClick:s,className:"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center hover:bg-black/20 transition-colors",children:(0,k.jsx)(vs,{size:20})}),(0,k.jsx)("h2",{className:"text-2xl font-bold",children:t})]}),(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)(vn,{activeTab:a,onTabChange:o,className:"bg-black/10"})}),(0,k.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto mb-6",children:"shopping"===a?0===d.length?(0,k.jsx)("p",{className:"opacity-60 text-center py-8",children:"Your list is empty."}):d.map(e=>(0,k.jsxs)("div",{className:"flex items-center gap-3 bg-white/40 p-3 rounded-xl backdrop-blur-sm",children:[(0,k.jsx)("button",{onClick:()=>m(e),className:"w-6 h-6 rounded-full border-2 border-current flex items-center justify-center hover:bg-black/10"}),(0,k.jsx)("span",{className:"flex-1 font-medium",children:e.name}),(0,k.jsx)("button",{onClick:()=>hq(uJ(cZ,"items",e.id)),className:"opacity-50 hover:opacity-100 p-2",children:(0,k.jsx)(dr,{size:16})})]},e.id)):0===f.length?(0,k.jsx)("p",{className:"opacity-60 text-center py-8",children:"Nothing in pantry from this list."}):f.map(e=>(0,k.jsxs)("div",{className:"flex items-center gap-2 bg-white/40 p-3 rounded-xl backdrop-blur-sm",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/50 flex items-center justify-center text-xs font-bold",children:e.quantity}),(0,k.jsx)("span",{className:"flex-1 font-medium",children:e.name}),(0,k.jsx)("button",{onClick:()=>y(e),className:"opacity-50 hover:opacity-100 p-2",title:"Add to List",children:(0,k.jsx)(y7,{size:16})}),(0,k.jsx)("button",{onClick:()=>g(e),className:"opacity-50 hover:opacity-100 p-2",title:"Consume",children:(0,k.jsx)(va,{size:16})}),(0,k.jsx)("button",{onClick:()=>v(e),className:"opacity-50 hover:opacity-100 p-2 text-red-600",title:"Delete",children:(0,k.jsx)(dr,{size:16})})]},e.id))}),"shopping"===a&&(0,k.jsxs)("form",{onSubmit:p,className:"relative",children:[(0,k.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),placeholder:"Add new item...",className:`w-full bg-white/50 backdrop-blur-sm rounded-xl py-4 pl-4 pr-12 font-medium focus:outline-none focus:ring-2 focus:ring-black/10 ${w.input} placeholder-opacity-60`,autoFocus:!0}),(0,k.jsx)("button",{type:"submit",className:"absolute right-2 top-2 bottom-2 w-10 bg-black/10 rounded-lg flex items-center justify-center hover:bg-black/20 text-current",children:(0,k.jsx)(y7,{size:20})})]})]})},vg=c3("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),vy=c3("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),vv=c3("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vw=c3("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),vb=c3("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),vx=c3("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function vE({onClose:e}){let[t,i]=(0,N.useState)([]),[r,n]=(0,N.useState)(!0);(0,N.useEffect)(()=>{s()},[]);let s=async()=>{try{n(!0);let e=h_(uX(cZ,"users"),hC("isApproved","==",!1)),t=await hU(e),r=[];t.forEach(e=>{r.push({uid:e.id,...e.data()})}),i(r)}catch(e){console.error("Error fetching pending users:",e)}finally{n(!1)}},a=async e=>{try{await hz(uJ(cZ,"users",e),{isApproved:!0}),i(t=>t.filter(t=>t.uid!==e))}catch(e){console.error("Error approving user:",e),alert("Failed to approve user")}},o=async e=>{console.log("Decline logic clicked for",e)};return(0,k.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,k.jsxs)("div",{className:"bg-surface rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,k.jsxs)("div",{className:"p-6 border-b border-border flex items-center justify-between bg-surface-variant/30",children:[(0,k.jsxs)("div",{className:"flex items-center gap-3",children:[(0,k.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,k.jsx)(vb,{className:"text-primary",size:24})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-bold text-on-surface",children:"Approve Users"}),(0,k.jsx)("p",{className:"text-sm text-slate-500",children:"Manage pending access requests"})]})]}),(0,k.jsx)("button",{onClick:e,className:"p-2 hover:bg-black/5 rounded-full transition-colors text-slate-500",children:(0,k.jsx)(vv,{size:24})})]}),(0,k.jsx)("div",{className:"p-0 max-h-[60vh] overflow-y-auto",children:r?(0,k.jsx)("div",{className:"p-12 text-center text-slate-500",children:"Loading requests..."}):0===t.length?(0,k.jsxs)("div",{className:"p-12 text-center",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,k.jsx)(vx,{className:"text-slate-300",size:32})}),(0,k.jsx)("p",{className:"text-slate-500 font-medium",children:"No pending user requests"}),(0,k.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"New signups will appear here"})]}):(0,k.jsx)("div",{className:"divide-y divide-border",children:t.map(e=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-black/[0.02] transition-colors",children:[(0,k.jsxs)("div",{className:"flex items-center gap-4",children:[(0,k.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-lg",children:e.displayName?e.displayName[0].toUpperCase():e.email?e.email[0].toUpperCase():"?"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"font-semibold text-slate-800",children:e.displayName||"Unnamed User"}),(0,k.jsx)("p",{className:"text-sm text-slate-500",children:e.email})]})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("button",{onClick:()=>o(e.uid),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Decline Access",children:(0,k.jsx)(vv,{size:20})}),(0,k.jsx)("button",{onClick:()=>a(e.uid),className:"p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors border border-transparent hover:border-primary/20",title:"Approve Access",children:(0,k.jsx)(dn,{size:20,className:"stroke-[3]"})})]})]},e.uid))})}),(0,k.jsxs)("div",{className:"p-4 bg-surface-variant/30 border-t border-border text-center text-xs text-slate-400",children:["Showing ",t.length," pending request",1!==t.length?"s":""]})]})})}let vA=({userId:e,onClose:t})=>{let[i,r,n]=vd(h_(uX(cZ,"collaborations"),hC("inviterId","==",e))),s=async e=>{if(confirm("Are you sure you want to remove this collaborator? They will lose access to your lists."))try{await hq(uJ(cZ,"collaborations",e))}catch(e){console.error("Error removing collaborator:",e),alert("Failed to remove collaborator.")}};return(0,k.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200",children:(0,k.jsxs)("div",{className:"bg-white rounded-2xl material-shadow-3 w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,k.jsxs)("div",{className:"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[(0,k.jsxs)("h2",{className:"text-xl font-display font-bold text-slate-900 flex items-center gap-2",children:[(0,k.jsx)(vw,{className:"text-primary"}),"Manage Collaborators"]}),(0,k.jsx)("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors",children:(0,k.jsx)(vv,{size:20})})]}),(0,k.jsxs)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[r&&(0,k.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Loading..."}),n&&(0,k.jsx)("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl text-sm font-medium",children:"Failed to load collaborators."}),!r&&!n&&i?.empty&&(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300",children:(0,k.jsx)(vw,{size:32})}),(0,k.jsx)("p",{className:"text-slate-500 font-medium",children:"No active collaborators"}),(0,k.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Invite people from the user menu to get started."})]}),(0,k.jsx)("div",{className:"space-y-2",children:i?.docs.map(e=>{let t=e.data();return(0,k.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-slate-50 border border-slate-100 group hover:border-slate-200 transition-colors",children:[(0,k.jsxs)("div",{className:"min-w-0",children:[(0,k.jsx)("p",{className:"text-sm font-semibold text-slate-700 truncate",children:t.inviteeEmail||"Unknown User"}),(0,k.jsxs)("p",{className:"text-xs text-slate-400",children:["Added ",new Date(t.createdAt).toLocaleDateString()]})]}),(0,k.jsx)("button",{onClick:()=>s(e.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Revoke Access",children:(0,k.jsx)(dr,{size:18})})]},e.id)})})]})]})})},vT=({userName:e,userId:t,isAdmin:i,onLogout:r})=>{let[n,s]=(0,N.useState)(!1),[a,o]=(0,N.useState)(!1),[l,u]=(0,N.useState)(!1),[h,c]=(0,N.useState)(!1),[d,f]=(0,N.useState)(""),p=(0,N.useRef)(null);(0,N.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&(s(!1),c(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let m=async e=>{if(e.preventDefault(),d)try{let e=`${t}_${d.trim()}`;await hB(uJ(cZ,"collaborations",e),{inviterId:t,inviteeEmail:d.trim(),createdAt:Date.now()}),alert(`Invite sent to ${d}!`),f(""),c(!1)}catch(e){console.error("Error sending invite:",e),alert("Failed to send invite: "+e.message)}};return(0,k.jsxs)("div",{className:"relative font-display",ref:p,children:[(0,k.jsxs)("button",{onClick:()=>s(!n),className:"text-2xl font-bold text-slate-900 flex items-center gap-2 hover:opacity-80 transition-opacity",children:["Hi ",(0,k.jsx)("span",{className:"text-primary",children:e||"User"})]}),n&&(0,k.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-[var(--radius-lg)] material-shadow-2 z-50 overflow-hidden border border-slate-100 p-2 text-sm",children:[(0,k.jsx)("div",{className:"mb-1",children:h?(0,k.jsxs)("form",{onSubmit:m,className:"p-2 flex gap-2 bg-slate-50 rounded-lg items-center",children:[(0,k.jsx)("input",{type:"email",autoFocus:!0,className:"flex-1 bg-transparent text-sm font-medium placeholder-slate-400 focus:outline-none min-w-0 h-8",placeholder:"friend@email.com",value:d,onChange:e=>f(e.target.value)}),(0,k.jsxs)("div",{className:"flex gap-1 shrink-0",children:[(0,k.jsx)("button",{type:"button",onClick:()=>c(!1),className:"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-200 transition-colors",children:(0,k.jsx)(vv,{size:16})}),(0,k.jsx)("button",{type:"submit",className:"w-8 h-8 flex items-center justify-center text-white bg-green-500 hover:bg-green-600 rounded-full shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!d,children:(0,k.jsx)(dn,{size:16})})]})]}):(0,k.jsxs)("button",{onClick:()=>c(!0),className:"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600",children:(0,k.jsx)(vy,{size:18})}),"Invite Collaborator"]})}),(0,k.jsx)("div",{className:"mb-1",children:(0,k.jsxs)("button",{onClick:()=>{s(!1),u(!0)},className:"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600",children:(0,k.jsx)(vw,{size:18})}),"Manage Collaborators"]})}),i&&(0,k.jsx)("div",{className:"mb-1",children:(0,k.jsxs)("button",{onClick:()=>{s(!1),o(!0)},className:"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600",children:(0,k.jsx)(vb,{size:18})}),"Approve Users"]})}),(0,k.jsx)("div",{className:"h-px bg-slate-100 my-1 mx-2"}),(0,k.jsxs)("button",{onClick:r,className:"w-full text-left px-4 py-3 rounded-lg hover:bg-red-50 flex items-center gap-3 transition-colors text-red-600 font-medium group",children:[(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-600 group-hover:bg-red-200 transition-colors",children:(0,k.jsx)(vg,{size:18})}),"Log Out"]})]}),a&&(0,k.jsx)(vE,{onClose:()=>o(!1)}),l&&(0,k.jsx)(vA,{userId:t,onClose:()=>u(!1)})]})},vI=({userId:e,userName:t,userEmail:i,isAdmin:r,onLogout:n,onBack:s,onNavigateToHelp:a})=>{let[o,l]=(0,N.useState)("shopping"),[u,h]=(0,N.useState)(null),[c,d]=(0,N.useState)(!1),[f,p]=(0,N.useState)(""),[m]=vd(h_(uX(cZ,"collaborations"),hC("inviteeId","==",e))),[g]=vd(i?h_(uX(cZ,"collaborations"),hC("inviteeEmail","==",i)):null),y=(0,N.useMemo)(()=>[...new Set([e,...m?.docs.map(e=>e.data().inviterId)||[],...g?.docs.map(e=>e.data().inviterId)||[]])].slice(0,30),[m,g,e]),[v]=vd((0,N.useMemo)(()=>y.length>0?h_(uX(cZ,"lists"),hC("userId","in",y)):null,[y])),w=(0,N.useMemo)(()=>v?.docs.map(e=>({id:e.id,...e.data()}))||[],[v]),[b]=vd((0,N.useMemo)(()=>y.length>0?h_(uX(cZ,"items"),hC("userId","in",y),hC("isBought","==",!1)):null,[y])),x=(0,N.useMemo)(()=>b?.docs.map(e=>({id:e.id,...e.data()}))||[],[b]),[E]=vd((0,N.useMemo)(()=>y.length>0?h_(uX(cZ,"pantry"),hC("userId","in",y)):null,[y])),A=(0,N.useMemo)(()=>E?.docs.map(e=>({id:e.id,...e.data()}))||[],[E]),T=e=>{let t=["purple","blue","yellow","green","pink"];return t[e%t.length]},I=async t=>{if(t.preventDefault(),!f.trim())return void d(!1);let i=await h$(uX(cZ,"lists"),{userId:e,name:f,createdAt:Date.now(),ownerEmail:""});p(""),d(!1),h(i.id)};if(u){let t=w.find(e=>e.id===u);if(t){let i=w.findIndex(e=>e.id===u);return(0,k.jsx)("div",{className:"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface",children:(0,k.jsx)(vm,{listId:t.id,listName:t.name,userId:e,variant:T(i),activeTab:o,onBack:()=>h(null)})})}}return(0,k.jsxs)("div",{className:"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsx)(vT,{userName:t,userId:e,isAdmin:r,onLogout:n}),(0,k.jsxs)("div",{className:"flex gap-3",children:[(0,k.jsx)("button",{onClick:a,className:"w-10 h-10 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center hover:bg-slate-200 transition-colors","aria-label":"Help",children:(0,k.jsx)(vt,{size:24})}),(0,k.jsx)("button",{onClick:()=>d(!0),className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center hover:bg-slate-700 transition-colors shadow-lg","aria-label":"Create New List",children:(0,k.jsx)(y7,{size:24})})]})]}),(0,k.jsx)(vn,{activeTab:o,onTabChange:l}),(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[c&&(0,k.jsx)("div",{className:"rounded-[var(--radius-xl)] p-6 bg-slate-100 material-shadow-1 border-2 border-dashed border-slate-300",children:(0,k.jsxs)("form",{onSubmit:I,children:[(0,k.jsx)("input",{autoFocus:!0,type:"text",placeholder:"List Name...",className:"w-full bg-transparent text-xl font-bold placeholder-slate-400 focus:outline-none",value:f,onChange:e=>p(e.target.value),onBlur:()=>!f&&d(!1),onKeyDown:e=>"Escape"===e.key&&d(!1)}),(0,k.jsx)("div",{className:"flex justify-end mt-4",children:(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-bold",children:"Save"})})]})}),0!==w.length||c?w.map((e,t)=>{var i;let{itemsCount:r,pantryCount:n}=(i=e.id,{itemsCount:x.filter(e=>e.listId===i).length,pantryCount:A.filter(e=>e.sourceListId===i).length});return(0,k.jsx)(vr,{title:e.name,itemsCount:r,pantryCount:n,variant:T(t),activeTab:o,onClick:()=>h(e.id)},e.id)}):(0,k.jsx)("div",{className:"text-center py-10 opacity-50",children:(0,k.jsx)("p",{children:"No lists found. Click + to create one."})})]})]})},v_=c3("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),vS=c3("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vC=c3("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),vk=c3("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),vN=c3("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),vR=({onLoginSuccess:e})=>{let[t,i]=(0,N.useState)(!1),[r,n]=(0,N.useState)(null);(0,N.useEffect)(()=>{var t;let r;if(t=window.location.href,r=iq.parseLink(t),r?.operation==="EMAIL_SIGNIN"){i(!0);let t=window.localStorage.getItem("emailForSignIn");t||(t=window.prompt("Please provide your email for confirmation")),t?i7(cJ,t,window.location.href).then(async i=>{window.localStorage.removeItem("emailForSignIn"),i.user&&await hB(uJ(cZ,"users",i.user.uid),{uid:i.user.uid,email:i.user.email,displayName:i.user.displayName||t?.split("@")[0],photoURL:i.user.photoURL,lastLogin:hW()},{merge:!0}),e()}).catch(e=>{console.error("Email link sign-in failed:",e),n(e.message),i(!1)}):(i(!1),n("Email is required to complete sign-in."))}},[e]);let s=async()=>{i(!0),n(null);try{let t=new iG,i=await rP(cJ,t);i.user&&await hB(uJ(cZ,"users",i.user.uid),{uid:i.user.uid,email:i.user.email,displayName:i.user.displayName,photoURL:i.user.photoURL,lastLogin:hW()},{merge:!0}),e()}catch(e){console.error("Login failed:",e),"auth/popup-blocked"===e.code?n("Popup blocked! Please allow popups for this site and try again."):"auth/configuration-not-found"===e.code?n("Firebase Authentication is not configured. Please enable Google Sign-In in the Firebase Console."):n(e.message||"Failed to sign in. Please try again.")}finally{i(!1)}};return(0,k.jsxs)("div",{className:"min-h-screen bg-surface",children:[(0,k.jsx)("nav",{className:"fixed top-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-slate-100",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:(0,k.jsx)(v_,{className:"text-white",size:18})}),(0,k.jsxs)("span",{className:"font-bold text-xl text-slate-900 tracking-tight",children:["Pantry",(0,k.jsx)("span",{className:"text-indigo-600",children:"2List"})]})]}),(0,k.jsx)("button",{onClick:s,className:"text-sm font-bold text-slate-600 hover:text-indigo-600 transition-colors",children:"Sign In"})]})}),(0,k.jsx)("header",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center",children:[(0,k.jsxs)("div",{className:"max-w-2xl relative z-10",children:[(0,k.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-sm font-bold mb-6 border border-indigo-100",children:[(0,k.jsx)(vS,{size:16,className:"fill-indigo-700"}),(0,k.jsx)("span",{children:"New: Smart Pantry Tracking"})]}),(0,k.jsxs)("h1",{className:"text-5xl lg:text-7xl font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Stop buying spread. ",(0,k.jsx)("br",{}),(0,k.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Start tracking bread."})]}),(0,k.jsx)("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed max-w-lg",children:'Pantry2List bridges the gap between your shopping list and your kitchen inventory. Never wonder "Do I have milk?" again.'}),(0,k.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:(0,k.jsxs)("button",{onClick:s,disabled:t,className:"h-14 px-8 rounded-full bg-slate-900 text-white font-bold text-lg flex items-center justify-center gap-2 hover:bg-slate-800 transition-all shadow-xl shadow-slate-200 active:scale-95",children:[t?(0,k.jsx)(vk,{className:"animate-spin"}):"Get Started Free",(0,k.jsx)(vC,{size:20})]})}),r&&(0,k.jsx)("p",{className:"mt-4 text-red-600 text-sm bg-red-50 py-2 px-4 rounded-lg inline-block",children:r}),(0,k.jsxs)("div",{className:"mt-8 flex items-center gap-4 text-sm text-slate-500 font-medium",children:[(0,k.jsx)("div",{className:"flex -space-x-2",children:[1,2,3,4].map(e=>(0,k.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-slate-200"},e))}),(0,k.jsx)("p",{children:"Joined by 1,000+ smart shoppers"})]})]}),(0,k.jsxs)("div",{className:"relative z-0 lg:h-[600px] flex items-center justify-center",children:[(0,k.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-indigo-200 rounded-full blur-3xl opacity-30 animate-pulse"}),(0,k.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] bg-purple-200 rounded-full blur-3xl opacity-30"}),(0,k.jsxs)("div",{className:"relative w-[320px] bg-white rounded-[40px] shadow-2xl border-8 border-slate-900 overflow-hidden transform rotate-[-5deg] hover:rotate-0 transition-transform duration-500 ease-out",children:[(0,k.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 h-6 w-32 bg-slate-900 rounded-b-2xl z-20"}),(0,k.jsxs)("div",{className:"bg-slate-50 p-6 pt-12 border-b border-slate-100",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2 text-slate-900 font-bold text-lg",children:["Hi ",(0,k.jsx)("span",{className:"text-indigo-600",children:"Srinivas"})]}),(0,k.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-900 flex items-center justify-center text-white shadow-lg",children:(0,k.jsx)(vC,{size:16,className:"rotate-[-45deg]"})})]}),(0,k.jsxs)("div",{className:"flex p-1 bg-slate-200/50 rounded-xl",children:[(0,k.jsx)("div",{className:"flex-1 py-2 text-center text-xs font-bold bg-white shadow-sm rounded-lg text-slate-900",children:"Lists"}),(0,k.jsx)("div",{className:"flex-1 py-2 text-center text-xs font-bold text-slate-500",children:"Pantry"})]})]}),(0,k.jsxs)("div",{className:"bg-surface p-4 space-y-3 min-h-[400px]",children:[(0,k.jsx)(vr,{title:"Weekly Groceries",itemsCount:12,pantryCount:5,variant:"purple",activeTab:"shopping"}),(0,k.jsx)(vr,{title:"Taco Night",itemsCount:4,pantryCount:8,variant:"yellow",activeTab:"shopping"}),(0,k.jsx)(vr,{title:"Costco Run",itemsCount:18,pantryCount:2,variant:"blue",activeTab:"shopping"})]}),(0,k.jsx)("div",{className:"absolute bottom-6 right-6 w-14 h-14 bg-slate-900 rounded-full flex items-center justify-center text-white shadow-xl material-fab-shadow",children:(0,k.jsx)("div",{className:"w-6 h-6 border-2 border-white rounded-sm"})})]})]})]})}),(0,k.jsx)("section",{className:"py-24 bg-white",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,k.jsxs)("div",{className:"text-center max-w-2xl mx-auto mb-16",children:[(0,k.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to master your kitchen"}),(0,k.jsx)("p",{className:"text-slate-500 text-lg",children:"Managing groceries shouldn't be a chore. We've built the tools to make it effortless."})]}),(0,k.jsxs)("div",{className:"grid md:grid-cols-3 gap-8",children:[(0,k.jsx)(vP,{icon:(0,k.jsx)(vS,{className:"text-amber-500"}),title:"Auto-Replenish",description:"Bought it? It's in your pantry. Used it? It's back on your list. The cycle is seamless."}),(0,k.jsx)(vP,{icon:(0,k.jsx)(vN,{className:"text-indigo-500"}),title:"Smart Pantry",description:"Know exactly what you have at home before you buy. Reduce food waste and save money."}),(0,k.jsx)(vP,{icon:(0,k.jsx)(vw,{className:"text-emerald-500"}),title:"Collaborative Lists",description:"Plan dinner with your partner or roommates. Changes sync in real-time across all devices."})]})]})}),(0,k.jsx)("footer",{className:"bg-slate-50 py-12 border-t border-slate-100",children:(0,k.jsxs)("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("div",{className:"w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center",children:(0,k.jsx)(v_,{className:"text-white",size:18})}),(0,k.jsxs)("span",{className:"font-bold text-xl text-slate-900",children:["Pantry",(0,k.jsx)("span",{className:"text-indigo-600",children:"2List"})]})]}),(0,k.jsx)("p",{className:"text-slate-400 text-sm",children:" 2026 Pantry2List. Built for smart shoppers."})]})})]})},vP=({icon:e,title:t,description:i})=>(0,k.jsxs)("div",{className:"p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 hover:border-slate-200 transition-all duration-300",children:[(0,k.jsx)("div",{className:"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6",children:e}),(0,k.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:t}),(0,k.jsx)("p",{className:"text-slate-500 leading-relaxed",children:i})]});function vD({onLogout:e,email:t}){return(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-surface p-6",children:(0,k.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,k.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:(0,k.jsx)(c4,{className:"text-primary",size:40})}),(0,k.jsx)("h1",{className:"text-3xl font-bold text-on-surface mb-4",children:"Account Pending"}),(0,k.jsxs)("p",{className:"text-slate-500 text-lg mb-8 leading-relaxed",children:["Thanks for signing up",t?`, ${t}`:"","!",(0,k.jsx)("br",{}),"Your account is currently waiting for administrator approval. You will be granted access once an admin reviews your request."]}),(0,k.jsx)("div",{className:"bg-surface-variant/50 border border-border p-4 rounded-xl mb-8 text-sm text-slate-500",children:"Please contact the administrator if you believe this is an error or if you need immediate access."}),(0,k.jsxs)("button",{onClick:e,className:"w-full bg-slate-900 hover:bg-slate-800 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-900/20",children:[(0,k.jsx)(vg,{size:20}),"Sign Out"]})]})})}var vO=e.i(57688);let vM={src:e.i(108).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD0yayS4u2MqbkIAP7xh+nSrTsLZ3P/2Q=="},vL={src:e.i(36713).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwCkI7U/AbYHg+0bdxyVz/rc4z1z7VdvdIvqf//Z"},vj={src:e.i(11074).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1sxsSCRwD2bHGKznFuSfbzt/w409D/9k="},vV={src:e.i(82540).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1jZzv2pn1zzQI/9k="},vF={src:e.i(53984).default,width:1024,height:1024,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1T7Jatqv2nO25zgfMc4x6fShgrH//2Q=="},vU=({onBack:e})=>(0,k.jsxs)("div",{className:"min-h-screen bg-surface pb-24",children:[(0,k.jsxs)("div",{className:"sticky top-0 z-10 bg-surface/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center gap-4",children:[(0,k.jsx)("button",{onClick:e,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 transition-colors",children:(0,k.jsx)(vs,{size:24,className:"text-slate-700"})}),(0,k.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Help & Guides"})]}),(0,k.jsx)("div",{className:"px-6 py-6 max-w-2xl mx-auto space-y-12",children:[{title:"Creating a List",description:"Tap the + button in the top right to start a new shopping list. Give it a name and it will appear in your main view.",image:vM,color:"bg-purple-100 text-purple-900"},{title:"Adding Items",description:"Tap on any list to expand it. Type in the bottom bar to add items quickly. They will appear at the top of your list.",image:vL,color:"bg-blue-100 text-blue-900"},{title:"Managing Pantry",description:"Switch between 'Shopping' and 'Pantry' tabs. Checked items from your shopping list can be moved directly to your pantry to keep track of what you have at home.",image:vj,color:"bg-yellow-100 text-yellow-900"},{title:"Inviting Collaborators",description:"Share your lists with family or roommates. Go to the menu, select 'Manage Collaborators', and invite them by email.",image:vV,color:"bg-green-100 text-green-900"},{title:"Restocking & Consuming",description:"In your pantry, use the '+' button to quickly add an item back to your shopping list. Use the '-' button to decrease the quantity as you use items.",image:vF,color:"bg-orange-100 text-orange-900"}].map((e,t)=>(0,k.jsx)("section",{className:"space-y-4",children:(0,k.jsxs)("div",{className:`rounded-2xl overflow-hidden shadow-sm border border-slate-100 ${e.color}`,children:[(0,k.jsx)("div",{className:"aspect-video w-full bg-white/50 relative",children:(0,k.jsx)(vO.default,{src:e.image,alt:e.title,className:"object-contain p-4",fill:!0})}),(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.title}),(0,k.jsx)("p",{className:"opacity-90 leading-relaxed",children:e.description})]})]})},t))})]});e.s(["default",0,function(){let[e,t,i]=nr(cJ),[r,n]=(0,N.useState)(null),[s,a]=(0,N.useState)(!1),[o,l]=(0,N.useState)("all-lists"),[u,h]=(0,N.useState)(!1),[c,d]=(0,N.useState)(!1);return((0,N.useEffect)(()=>{d(!0)},[]),(0,N.useEffect)(()=>{let t=()=>{};return(async()=>{if(!e)return n(null);a(!0);try{let i=uJ(cZ,"users",e.uid);t=hH(i,async t=>{if(t.exists())n({uid:e.uid,...t.data()});else{let t={uid:e.uid,email:e.email,displayName:e.displayName,role:"user",isApproved:!1,preferences:{autoAddBackToShoppingList:!0}};await hB(i,t)}a(!1)})}catch(e){console.error("Error fetching user doc:",e),a(!1)}})(),()=>t()},[e]),c)?(t||e&&s)&&!u?(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)(vk,{className:"text-primary animate-spin mx-auto mb-4",size:48}),(0,k.jsx)("p",{className:"text-slate-500 animate-pulse",children:"Connecting..."})]})}):i||u&&!e&&!t?(0,k.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-surface p-6 text-center",children:(0,k.jsxs)("div",{className:"max-w-xs",children:[(0,k.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,k.jsx)(vg,{className:"text-red-600",size:32})}),(0,k.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Connection Issue"}),(0,k.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold",children:"Retry Connection"})]})}):e?r&&!r.isApproved?(0,k.jsx)(vD,{onLogout:()=>cJ.signOut(),email:e.email}):(0,k.jsxs)("div",{className:"min-h-screen bg-surface font-sans text-on-surface selection:bg-primary selection:text-white",children:["dashboard"===o&&(0,k.jsx)(ve,{userName:e.displayName,onNavigateToLists:()=>l("all-lists")}),"all-lists"===o&&(0,k.jsx)(vI,{userId:e.uid,userName:e.displayName,userEmail:e.email,isAdmin:r?.role==="admin",onLogout:()=>cJ.signOut(),onBack:()=>l("dashboard"),onNavigateToHelp:()=>l("help")}),"help"===o&&(0,k.jsx)(vU,{onBack:()=>l("all-lists")})]}):(0,k.jsx)(vR,{onLoginSuccess:()=>l("all-lists")}):null}],13716)}]);