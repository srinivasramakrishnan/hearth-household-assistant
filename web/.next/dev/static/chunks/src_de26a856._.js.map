{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAnalytics } from \"firebase/analytics\";\n\n// These values will be filled in once we have the Firebase project setup\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Initialize analytics only on client side to avoid SSR errors\nexport const analytics = typeof window !== \"undefined\" ? getAnalytics(app) : null;\n\nexport default app;\n"],"names":[],"mappings":";;;;;;;;;;AAOY;AAPZ;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,yEAAyE;AACzE,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACjB;AAEA,MAAM,MAAM,IAAA,oLAAa,EAAC;AACnB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AAGxB,MAAM,YAAY,uCAAgC,IAAA,yLAAY,EAAC,OAAO;uCAE9D"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/StatusCard.tsx"],"sourcesContent":["import { LucideIcon } from 'lucide-react';\nimport { clsx } from 'clsx';\n\ninterface StatusCardProps {\n    title: string;\n    count: number;\n    icon: LucideIcon;\n    variant: 'blue' | 'yellow' | 'green' | 'pink';\n}\n\nexport const StatusCard = ({ title, count, icon: Icon, variant }: StatusCardProps) => {\n    const variants = {\n        blue: 'bg-card-blue text-on-card-blue',\n        yellow: 'bg-card-yellow text-on-card-yellow',\n        green: 'bg-card-green text-on-card-green',\n        pink: 'bg-card-pink text-on-card-pink'\n    };\n\n    return (\n        <div className={clsx(\n            \"rounded-[var(--radius-lg)] p-4 flex flex-col justify-between aspect-square material-shadow-1 transition-transform active:scale-95 cursor-pointer\",\n            variants[variant]\n        )}>\n            <div className=\"flex justify-between items-start\">\n                <div className=\"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center backdrop-blur-sm\">\n                    <Icon size={20} strokeWidth={2.5} />\n                </div>\n            </div>\n\n            <div className=\"mt-2\">\n                <p className=\"text-sm font-medium opacity-90 mb-1\">{title}</p>\n                <h3 className=\"text-3xl font-bold\">{count}</h3>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;;;AASO,MAAM,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,OAAO,EAAmB;IAC7E,MAAM,WAAW;QACb,MAAM;QACN,QAAQ;QACR,OAAO;QACP,MAAM;IACV;IAEA,qBACI,6LAAC;QAAI,WAAW,IAAA,gJAAI,EAChB,oJACA,QAAQ,CAAC,QAAQ;;0BAEjB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAK,MAAM;wBAAI,aAAa;;;;;;;;;;;;;;;;0BAIrC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCAAuC;;;;;;kCACpD,6LAAC;wBAAG,WAAU;kCAAsB;;;;;;;;;;;;;;;;;;AAIpD;KAzBa"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/TaskItem.tsx"],"sourcesContent":["import { Trash2, GripVertical, Check } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface TaskItemProps {\n    id: string;\n    title: string;\n    completed: boolean;\n    timestamp?: string;\n    onToggle: () => void;\n    onDelete: () => void;\n}\n\nexport const TaskItem = ({ id, title, completed, timestamp, onToggle, onDelete }: TaskItemProps) => {\n    return (\n        <motion.div\n            layoutId={id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"group relative bg-white rounded-[var(--radius-lg)] p-4 mb-3 flex items-start space-x-4 material-shadow-1 hover:shadow-md transition-shadow\"\n        >\n            {/* Custom Radio/Checkbox */}\n            <button\n                onClick={onToggle}\n                className={`mt-1 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${completed\n                        ? 'bg-primary border-primary text-white'\n                        : 'border-slate-300 hover:border-primary'\n                    }`}\n            >\n                {completed && <Check size={14} strokeWidth={3} />}\n            </button>\n\n            <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                        {timestamp && (\n                            <div className=\"flex items-center space-x-2 text-xs text-slate-400 mb-1\">\n                                <span>{timestamp}</span>\n                            </div>\n                        )}\n                        <h4 className={`text-base font-medium leading-relaxed transition-all ${completed ? 'text-slate-400 line-through decoration-2 decoration-slate-200' : 'text-slate-800'\n                            }`}>\n                            {title}\n                        </h4>\n                    </div>\n                </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"opacity-0 group-hover:opacity-100 transition-opacity absolute right-4 top-4 flex items-center bg-white pl-2\">\n                <button\n                    onClick={onDelete}\n                    className=\"p-2 text-slate-300 hover:text-red-500 transition-colors\"\n                >\n                    <Trash2 size={18} />\n                </button>\n            </div>\n        </motion.div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAWO,MAAM,WAAW,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAiB;IAC3F,qBACI,6LAAC,uMAAM,CAAC,GAAG;QACP,UAAU;QACV,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAU;;0BAGV,6LAAC;gBACG,SAAS;gBACT,WAAW,CAAC,oGAAoG,EAAE,YACxG,yCACA,yCACJ;0BAEL,2BAAa,6LAAC,gNAAK;oBAAC,MAAM;oBAAI,aAAa;;;;;;;;;;;0BAGhD,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;4BACV,2BACG,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;8CAAM;;;;;;;;;;;0CAGf,6LAAC;gCAAG,WAAW,CAAC,qDAAqD,EAAE,YAAY,kEAAkE,kBAC/I;0CACD;;;;;;;;;;;;;;;;;;;;;;0BAOjB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBACG,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,uNAAM;wBAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;AAKlC;KA9Ca"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/FloatingActionButton.tsx"],"sourcesContent":["import { Plus } from 'lucide-react';\n\ninterface FloatingActionButtonProps {\n    onClick: () => void;\n}\n\nexport const FloatingActionButton = ({ onClick }: FloatingActionButtonProps) => {\n    return (\n        <button\n            onClick={onClick}\n            className=\"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 rounded-full text-white shadow-xl flex items-center justify-center hover:bg-blue-700 active:scale-90 transition-all z-50 material-fab-shadow\"\n            aria-label=\"Add Item\"\n        >\n            <Plus size={32} strokeWidth={2.5} />\n        </button>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAMO,MAAM,uBAAuB,CAAC,EAAE,OAAO,EAA6B;IACvE,qBACI,6LAAC;QACG,SAAS;QACT,WAAU;QACV,cAAW;kBAEX,cAAA,6LAAC,6MAAI;YAAC,MAAM;YAAI,aAAa;;;;;;;;;;;AAGzC;KAVa"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/DashboardView.tsx"],"sourcesContent":["import {\n    Clock,\n    Calendar,\n    Layers,\n    AlertCircle,\n    Bell,\n    Grip\n} from 'lucide-react';\nimport { StatusCard } from '../components/StatusCard';\nimport { TaskItem } from '../components/TaskItem';\nimport { FloatingActionButton } from '../components/FloatingActionButton';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth } from '../lib/firebase';\nimport { useState } from 'react';\n\ninterface DashboardViewProps {\n    userName?: string | null;\n    onNavigateToLists: () => void;\n}\n\nexport const DashboardView = ({ userName, onNavigateToLists }: DashboardViewProps) => {\n    // Mock data for now, ideally this comes from Firestore\n    const [tasks, setTasks] = useState([\n        { id: '1', title: 'Project retrospective', completed: false, timestamp: 'Today, 4:50 PM' },\n        { id: '2', title: 'Evening team meeting', completed: false, timestamp: 'Today, 4:50 PM' },\n        { id: '3', title: 'Create monthly deck', completed: false, timestamp: 'Today' },\n        { id: '4', title: 'Shop for groceries', completed: false, timestamp: 'Today, 6:00 PM' },\n        { id: '5', title: 'Read book', completed: false, timestamp: 'Yesterday, 10:30 PM' },\n    ]);\n\n    const handleToggle = (id: string) => {\n        setTasks(prev => prev.map(t => t.id === id ? { ...t, completed: !t.completed } : t));\n    };\n\n    return (\n        <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n            {/* Header */}\n            <div className=\"flex justify-between items-start mb-8\">\n                <div>\n                    <h1 className=\"text-3xl font-bold text-slate-900\">Hello {userName?.split(' ')[0] || 'User'},</h1>\n                    <p className=\"text-slate-500 mt-1\">You have work today</p>\n                </div>\n                <div className=\"flex gap-4\">\n                    <button className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                        <Bell size={24} />\n                    </button>\n                    <button\n                        onClick={onNavigateToLists}\n                        className=\"text-slate-400 hover:text-slate-600 transition-colors\"\n                    >\n                        <Grip size={24} />\n                    </button>\n                </div>\n            </div>\n\n            {/* Status Grid */}\n            <div className=\"grid grid-cols-2 gap-4 mb-10\">\n                <StatusCard\n                    title=\"Today\"\n                    count={9}\n                    icon={Clock}\n                    variant=\"blue\"\n                />\n                <StatusCard\n                    title=\"Scheduled\"\n                    count={5}\n                    icon={Calendar}\n                    variant=\"yellow\"\n                />\n                <StatusCard\n                    title=\"All\"\n                    count={14}\n                    icon={Layers}\n                    variant=\"green\"\n                />\n                <StatusCard\n                    title=\"Overdue\"\n                    count={3}\n                    icon={AlertCircle}\n                    variant=\"pink\"\n                />\n            </div>\n\n            {/* Tasks List */}\n            <div>\n                <h2 className=\"text-lg font-bold text-slate-800 mb-6\">Today's Task</h2>\n                <div className=\"space-y-1\">\n                    {tasks.map(task => (\n                        <TaskItem\n                            key={task.id}\n                            id={task.id}\n                            title={task.title}\n                            completed={task.completed}\n                            timestamp={task.timestamp}\n                            onToggle={() => handleToggle(task.id)}\n                            onDelete={() => { }}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            <FloatingActionButton onClick={() => console.log('Add')} />\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAGA;;;;;;;;AAOO,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,iBAAiB,EAAsB;;IAC7E,uDAAuD;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;QAC/B;YAAE,IAAI;YAAK,OAAO;YAAyB,WAAW;YAAO,WAAW;QAAiB;QACzF;YAAE,IAAI;YAAK,OAAO;YAAwB,WAAW;YAAO,WAAW;QAAiB;QACxF;YAAE,IAAI;YAAK,OAAO;YAAuB,WAAW;YAAO,WAAW;QAAQ;QAC9E;YAAE,IAAI;YAAK,OAAO;YAAsB,WAAW;YAAO,WAAW;QAAiB;QACtF;YAAE,IAAI;YAAK,OAAO;YAAa,WAAW;YAAO,WAAW;QAAsB;KACrF;IAED,MAAM,eAAe,CAAC;QAClB,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE,WAAW,CAAC,EAAE,SAAS;gBAAC,IAAI;IACrF;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;;oCAAoC;oCAAO,UAAU,MAAM,IAAI,CAAC,EAAE,IAAI;oCAAO;;;;;;;0CAC3F,6LAAC;gCAAE,WAAU;0CAAsB;;;;;;;;;;;;kCAEvC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAO,WAAU;0CACd,cAAA,6LAAC,6MAAI;oCAAC,MAAM;;;;;;;;;;;0CAEhB,6LAAC;gCACG,SAAS;gCACT,WAAU;0CAEV,cAAA,6LAAC,6MAAI;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;0BAMxB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,gNAAK;wBACX,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,yNAAQ;wBACd,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,mNAAM;wBACZ,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,sOAAW;wBACjB,SAAQ;;;;;;;;;;;;0BAKhB,6LAAC;;kCACG,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,6LAAC;wBAAI,WAAU;kCACV,MAAM,GAAG,CAAC,CAAA,qBACP,6LAAC,6IAAQ;gCAEL,IAAI,KAAK,EAAE;gCACX,OAAO,KAAK,KAAK;gCACjB,WAAW,KAAK,SAAS;gCACzB,WAAW,KAAK,SAAS;gCACzB,UAAU,IAAM,aAAa,KAAK,EAAE;gCACpC,UAAU,KAAQ;+BANb,KAAK,EAAE;;;;;;;;;;;;;;;;0BAY5B,6LAAC,qKAAoB;gBAAC,SAAS,IAAM,QAAQ,GAAG,CAAC;;;;;;;;;;;;AAG7D;GApFa;KAAA"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/ListCard.tsx"],"sourcesContent":["import { ArrowUpRight } from 'lucide-react';\nimport { clsx } from 'clsx';\n\ninterface ListCardProps {\n    title: string;\n    itemsCount: number;\n    pantryCount: number;\n    variant: 'blue' | 'yellow' | 'green' | 'pink' | 'purple';\n    activeTab: 'shopping' | 'pantry';\n    onClick?: () => void;\n}\n\nexport const ListCard = ({ title, itemsCount, pantryCount, variant, activeTab, onClick }: ListCardProps) => {\n    const variants = {\n        blue: 'bg-card-blue text-on-card-blue',\n        yellow: 'bg-card-yellow text-on-card-yellow',\n        green: 'bg-card-green text-on-card-green',\n        pink: 'bg-card-pink text-on-card-pink',\n        purple: 'bg-purple-200 text-purple-900'\n    };\n\n    const isShopping = activeTab === 'shopping';\n\n    return (\n        <div\n            onClick={onClick}\n            className={clsx(\n                \"rounded-[var(--radius-xl)] p-6 relative overflow-hidden material-shadow-1 transition-transform active:scale-98 cursor-pointer group h-40 flex flex-col justify-between\",\n                variants[variant]\n            )}\n        >\n            <div className=\"flex justify-between items-start\">\n                <h3 className=\"text-xl font-bold tracking-tight\">{title}</h3>\n                <div className=\"bg-white/30 px-3 py-1 rounded-full backdrop-blur-sm\">\n                    {/* Dynamic badge based on what's interesting? Show both for now or just one? Prompt said \"instead of pills... show 7 in pantry\". Let's show Pantry count prominently */}\n                    <span className=\"text-xs font-semibold\">\n                        {isShopping ? `${itemsCount} To Buy` : `${pantryCount} In Pantry`}\n                    </span>\n                </div>\n            </div>\n\n            <div className=\"flex justify-between items-end\">\n                <p className=\"text-sm font-medium opacity-80\">\n                    {isShopping ? `${pantryCount} In Pantry` : `${itemsCount} To Buy`}\n                </p>\n                <button className=\"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center transition-colors group-hover:bg-black/20\">\n                    <ArrowUpRight size={20} />\n                </button>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAWO,MAAM,WAAW,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAiB;IACnG,MAAM,WAAW;QACb,MAAM;QACN,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;IACZ;IAEA,MAAM,aAAa,cAAc;IAEjC,qBACI,6LAAC;QACG,SAAS;QACT,WAAW,IAAA,gJAAI,EACX,0KACA,QAAQ,CAAC,QAAQ;;0BAGrB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAI,WAAU;kCAEX,cAAA,6LAAC;4BAAK,WAAU;sCACX,aAAa,GAAG,WAAW,OAAO,CAAC,GAAG,GAAG,YAAY,UAAU,CAAC;;;;;;;;;;;;;;;;;0BAK7E,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCACR,aAAa,GAAG,YAAY,UAAU,CAAC,GAAG,GAAG,WAAW,OAAO,CAAC;;;;;;kCAErE,6LAAC;wBAAO,WAAU;kCACd,cAAA,6LAAC,6OAAY;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKxC;KAvCa"}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/TabSwitcher.tsx"],"sourcesContent":["import clsx from 'clsx';\n\ninterface TabSwitcherProps {\n    activeTab: 'shopping' | 'pantry';\n    onTabChange: (tab: 'shopping' | 'pantry') => void;\n    className?: string;\n}\n\nexport const TabSwitcher = ({ activeTab, onTabChange, className }: TabSwitcherProps) => {\n    return (\n        <div className={clsx(\"flex p-1 rounded-full mb-6 relative\", className || \"bg-slate-200\")}>\n            <button\n                onClick={() => onTabChange('shopping')}\n                className={clsx(\n                    \"flex-1 py-3 text-sm font-bold rounded-full transition-all z-10\",\n                    activeTab === 'shopping' ? \"bg-white text-slate-900 shadow-sm\" : \"text-current opacity-60 hover:opacity-100\"\n                )}\n            >\n                Shopping List\n            </button>\n            <button\n                onClick={() => onTabChange('pantry')}\n                className={clsx(\n                    \"flex-1 py-3 text-sm font-bold rounded-full transition-all z-10\",\n                    activeTab === 'pantry' ? \"bg-white text-slate-900 shadow-sm\" : \"text-current opacity-60 hover:opacity-100\"\n                )}\n            >\n                What's in Pantry\n            </button>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAQO,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAoB;IAC/E,qBACI,6LAAC;QAAI,WAAW,IAAA,mJAAI,EAAC,uCAAuC,aAAa;;0BACrE,6LAAC;gBACG,SAAS,IAAM,YAAY;gBAC3B,WAAW,IAAA,mJAAI,EACX,kEACA,cAAc,aAAa,sCAAsC;0BAExE;;;;;;0BAGD,6LAAC;gBACG,SAAS,IAAM,YAAY;gBAC3B,WAAW,IAAA,mJAAI,EACX,kEACA,cAAc,WAAW,sCAAsC;0BAEtE;;;;;;;;;;;;AAKb;KAvBa"}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/lib/logic.ts"],"sourcesContent":["import { db } from './firebase';\nimport {\n    collection,\n    addDoc,\n    updateDoc,\n    doc,\n    deleteDoc,\n    increment,\n    query,\n    where,\n    getDocs\n} from 'firebase/firestore';\nimport type { ListItem, PantryItem } from '../types';\n\nexport const moveItemToPantry = async (userId: string, item: ListItem, listName: string) => {\n    try {\n        // 1. Mark as bought in the list\n        const itemRef = doc(db, 'items', item.id);\n        await updateDoc(itemRef, { isBought: true });\n\n        // 2. Add to pantry (deduplicating)\n        const pantryRef = collection(db, 'pantry');\n        const q = query(\n            pantryRef,\n            where('userId', '==', userId),\n            where('sourceListId', '==', item.listId),\n            where('name', '==', item.name)\n        );\n        const snapshot = await getDocs(q);\n\n        if (!snapshot.empty) {\n            // Update existing\n            const existingItem = snapshot.docs[0];\n            await updateDoc(existingItem.ref, {\n                quantity: increment(item.quantity || 1),\n                lastUpdated: Date.now()\n            });\n        } else {\n            // Create new\n            await addDoc(pantryRef, {\n                name: item.name,\n                quantity: item.quantity || 1,\n                unit: item.unit || '',\n                sourceListId: item.listId,\n                sourceListName: listName,\n                lastUpdated: Date.now(),\n                userId: userId\n            });\n        }\n    } catch (error) {\n        console.error(\"Error moving item to pantry:\", error);\n        throw error;\n    }\n};\n\nexport const depleteItemFromPantry = async (userId: string, item: PantryItem, addBackToList: boolean = false) => {\n    try {\n        // 1. Remove from pantry (or decrement)\n        const itemRef = doc(db, 'pantry', item.id);\n        if (item.quantity > 1) {\n            await updateDoc(itemRef, { quantity: increment(-1), lastUpdated: Date.now() });\n        } else {\n            await deleteDoc(itemRef);\n        }\n\n        // 2. Add back to shopping list if requested\n        if (addBackToList) {\n            const listId = item.sourceListId || 'default';\n            const itemsRef = collection(db, 'items');\n\n            // Check if item already exists in the list (unbought)\n            const q = query(\n                itemsRef,\n                where('listId', '==', listId),\n                where('name', '==', item.name),\n                where('isBought', '==', false)\n            );\n            const snapshot = await getDocs(q);\n\n            if (!snapshot.empty) {\n                // Increment existing\n                await updateDoc(snapshot.docs[0].ref, {\n                    quantity: increment(1)\n                });\n            } else {\n                // Create new\n                await addDoc(itemsRef, {\n                    name: item.name,\n                    listId: listId,\n                    isBought: false,\n                    quantity: 1,\n                    addedAt: Date.now(),\n                    userId: userId\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Error depleting item from pantry:\", error);\n        throw error;\n    }\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAaO,MAAM,mBAAmB,OAAO,QAAgB,MAAgB;IACnE,IAAI;QACA,gCAAgC;QAChC,MAAM,UAAU,IAAA,yKAAG,EAAC,+HAAE,EAAE,SAAS,KAAK,EAAE;QACxC,MAAM,IAAA,+KAAS,EAAC,SAAS;YAAE,UAAU;QAAK;QAE1C,mCAAmC;QACnC,MAAM,YAAY,IAAA,gLAAU,EAAC,+HAAE,EAAE;QACjC,MAAM,IAAI,IAAA,2KAAK,EACX,WACA,IAAA,2KAAK,EAAC,UAAU,MAAM,SACtB,IAAA,2KAAK,EAAC,gBAAgB,MAAM,KAAK,MAAM,GACvC,IAAA,2KAAK,EAAC,QAAQ,MAAM,KAAK,IAAI;QAEjC,MAAM,WAAW,MAAM,IAAA,6KAAO,EAAC;QAE/B,IAAI,CAAC,SAAS,KAAK,EAAE;YACjB,kBAAkB;YAClB,MAAM,eAAe,SAAS,IAAI,CAAC,EAAE;YACrC,MAAM,IAAA,+KAAS,EAAC,aAAa,GAAG,EAAE;gBAC9B,UAAU,IAAA,+KAAS,EAAC,KAAK,QAAQ,IAAI;gBACrC,aAAa,KAAK,GAAG;YACzB;QACJ,OAAO;YACH,aAAa;YACb,MAAM,IAAA,4KAAM,EAAC,WAAW;gBACpB,MAAM,KAAK,IAAI;gBACf,UAAU,KAAK,QAAQ,IAAI;gBAC3B,MAAM,KAAK,IAAI,IAAI;gBACnB,cAAc,KAAK,MAAM;gBACzB,gBAAgB;gBAChB,aAAa,KAAK,GAAG;gBACrB,QAAQ;YACZ;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACV;AACJ;AAEO,MAAM,wBAAwB,OAAO,QAAgB,MAAkB,gBAAyB,KAAK;IACxG,IAAI;QACA,uCAAuC;QACvC,MAAM,UAAU,IAAA,yKAAG,EAAC,+HAAE,EAAE,UAAU,KAAK,EAAE;QACzC,IAAI,KAAK,QAAQ,GAAG,GAAG;YACnB,MAAM,IAAA,+KAAS,EAAC,SAAS;gBAAE,UAAU,IAAA,+KAAS,EAAC,CAAC;gBAAI,aAAa,KAAK,GAAG;YAAG;QAChF,OAAO;YACH,MAAM,IAAA,+KAAS,EAAC;QACpB;QAEA,4CAA4C;QAC5C,IAAI,eAAe;YACf,MAAM,SAAS,KAAK,YAAY,IAAI;YACpC,MAAM,WAAW,IAAA,gLAAU,EAAC,+HAAE,EAAE;YAEhC,sDAAsD;YACtD,MAAM,IAAI,IAAA,2KAAK,EACX,UACA,IAAA,2KAAK,EAAC,UAAU,MAAM,SACtB,IAAA,2KAAK,EAAC,QAAQ,MAAM,KAAK,IAAI,GAC7B,IAAA,2KAAK,EAAC,YAAY,MAAM;YAE5B,MAAM,WAAW,MAAM,IAAA,6KAAO,EAAC;YAE/B,IAAI,CAAC,SAAS,KAAK,EAAE;gBACjB,qBAAqB;gBACrB,MAAM,IAAA,+KAAS,EAAC,SAAS,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE;oBAClC,UAAU,IAAA,+KAAS,EAAC;gBACxB;YACJ,OAAO;gBACH,aAAa;gBACb,MAAM,IAAA,4KAAM,EAAC,UAAU;oBACnB,MAAM,KAAK,IAAI;oBACf,QAAQ;oBACR,UAAU;oBACV,UAAU;oBACV,SAAS,KAAK,GAAG;oBACjB,QAAQ;gBACZ;YACJ;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACV;AACJ"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/ExpandedListView.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { ArrowLeft, Plus, Trash2, Check, Minus } from 'lucide-react';\nimport { TabSwitcher } from './TabSwitcher';\nimport {\n    collection,\n    addDoc,\n    deleteDoc,\n    doc,\n    updateDoc,\n    increment\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { query, where } from 'firebase/firestore';\nimport { moveItemToPantry, depleteItemFromPantry } from '../lib/logic';\nimport type { ListItem, PantryItem } from '../types';\n\ninterface ExpandedListViewProps {\n    listId: string;\n    listName: string;\n    userId: string;\n    variant: 'blue' | 'yellow' | 'green' | 'pink' | 'purple';\n    activeTab: 'shopping' | 'pantry'; // Initial tab\n    onBack: () => void;\n}\n\nexport const ExpandedListView = ({\n    listId,\n    listName,\n    userId,\n    variant,\n    activeTab: initialTab,\n    onBack\n}: ExpandedListViewProps) => {\n    const [currentTab, setCurrentTab] = useState<'shopping' | 'pantry'>(initialTab);\n    const [newItemName, setNewItemName] = useState('');\n\n    // Query Items (Shopping List)\n    const [itemsQuery] = useCollection(\n        query(\n            collection(db, 'items'),\n            where('listId', '==', listId),\n            where('isBought', '==', false) // Only show unbought items in shopping list\n        )\n    );\n\n    // Query Pantry (Items from this list)\n    const [pantryQuery] = useCollection(\n        query(\n            collection(db, 'pantry'),\n            where('sourceListId', '==', listId),\n            where('userId', '==', userId)\n        )\n    );\n\n    const items = itemsQuery?.docs.map(d => ({ id: d.id, ...d.data() } as ListItem)) || [];\n    const pantryItems = pantryQuery?.docs.map(d => ({ id: d.id, ...d.data() } as PantryItem)) || [];\n\n    const handleAddItem = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newItemName.trim()) return;\n\n        const existingItem = items.find(\n            i => i.name.toLowerCase() === newItemName.trim().toLowerCase()\n        );\n\n        if (existingItem) {\n            await updateDoc(doc(db, 'items', existingItem.id), {\n                quantity: increment(1)\n            });\n        } else {\n            await addDoc(collection(db, 'items'), {\n                listId,\n                userId,\n                name: newItemName,\n                isBought: false,\n                quantity: 1,\n                addedAt: Date.now()\n            });\n        }\n        setNewItemName('');\n    };\n\n    const handleBuyItem = async (item: ListItem) => {\n        await moveItemToPantry(userId, item, listName);\n    };\n\n    const handleConsumeItem = async (item: PantryItem) => {\n        await depleteItemFromPantry(userId, item, true);\n    };\n\n    const handleRestockItem = async (item: PantryItem) => {\n        const existingItem = items.find(i => i.name === item.name);\n        if (existingItem) {\n            await updateDoc(doc(db, 'items', existingItem.id), {\n                quantity: increment(1)\n            });\n        } else {\n            await addDoc(collection(db, 'items'), {\n                listId: item.sourceListId || listId,\n                userId,\n                name: item.name,\n                isBought: false,\n                quantity: 1,\n                addedAt: Date.now()\n            });\n        }\n    };\n\n    const handleDeletePantryItem = async (item: PantryItem) => {\n        await deleteDoc(doc(db, 'pantry', item.id));\n    };\n\n    // Color theme classes\n    const themes = {\n        blue: { bg: 'bg-card-blue', text: 'text-on-card-blue', input: 'placeholder-indigo-300' },\n        yellow: { bg: 'bg-card-yellow', text: 'text-on-card-yellow', input: 'placeholder-yellow-600' },\n        green: { bg: 'bg-card-green', text: 'text-on-card-green', input: 'placeholder-emerald-600' },\n        pink: { bg: 'bg-card-pink', text: 'text-on-card-pink', input: 'placeholder-pink-400' },\n        purple: { bg: 'bg-purple-200', text: 'text-purple-900', input: 'placeholder-purple-400' },\n    };\n    const theme = themes[variant];\n\n    return (\n        <div className={`min-h-[60vh] rounded-[var(--radius-xl)] p-6 ${theme.bg} ${theme.text} material-shadow-2 flex flex-col`}>\n            {/* Header */}\n            <div className=\"flex items-center gap-4 mb-4\">\n                <button\n                    onClick={onBack}\n                    className=\"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center hover:bg-black/20 transition-colors\"\n                >\n                    <ArrowLeft size={20} />\n                </button>\n                <h2 className=\"text-2xl font-bold\">{listName}</h2>\n            </div>\n\n            {/* Local Tab Switcher if needed, utilizing translucent bg */}\n            <div className=\"mb-4\">\n                <TabSwitcher activeTab={currentTab} onTabChange={setCurrentTab} className=\"bg-black/10\" />\n            </div>\n\n            {/* List */}\n            <div className=\"flex-1 space-y-3 overflow-y-auto mb-6\">\n                {currentTab === 'shopping' ? (\n                    items.length === 0 ? (\n                        <p className=\"opacity-60 text-center py-8\">Your list is empty.</p>\n                    ) : (\n                        items.map(item => (\n                            <div key={item.id} className=\"flex items-center gap-3 bg-white/40 p-3 rounded-xl backdrop-blur-sm\">\n                                <button\n                                    onClick={() => handleBuyItem(item)}\n                                    className=\"w-6 h-6 rounded-full border-2 border-current flex items-center justify-center hover:bg-black/10\"\n                                >\n                                </button>\n                                <span className=\"flex-1 font-medium\">{item.name}</span>\n                                <button\n                                    onClick={() => deleteDoc(doc(db, 'items', item.id))}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                >\n                                    <Trash2 size={16} />\n                                </button>\n                            </div>\n                        ))\n                    )\n                ) : (\n                    pantryItems.length === 0 ? (\n                        <p className=\"opacity-60 text-center py-8\">Nothing in pantry from this list.</p>\n                    ) : (\n                        pantryItems.map(item => (\n                            <div key={item.id} className=\"flex items-center gap-2 bg-white/40 p-3 rounded-xl backdrop-blur-sm\">\n                                <div className=\"w-8 h-8 rounded-full bg-white/50 flex items-center justify-center text-xs font-bold\">\n                                    {item.quantity}\n                                </div>\n                                <span className=\"flex-1 font-medium\">{item.name}</span>\n                                <button\n                                    onClick={() => handleRestockItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                    title=\"Add to List\"\n                                >\n                                    <Plus size={16} />\n                                </button>\n                                <button\n                                    onClick={() => handleConsumeItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                    title=\"Consume\"\n                                >\n                                    <Minus size={16} />\n                                </button>\n                                <button\n                                    onClick={() => handleDeletePantryItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2 text-red-600\"\n                                    title=\"Delete\"\n                                >\n                                    <Trash2 size={16} />\n                                </button>\n                            </div>\n                        ))\n                    )\n                )}\n            </div>\n\n            {/* Add Item Input */}\n            {currentTab === 'shopping' && (\n                <form onSubmit={handleAddItem} className=\"relative\">\n                    <input\n                        type=\"text\"\n                        value={newItemName}\n                        onChange={(e) => setNewItemName(e.target.value)}\n                        placeholder=\"Add new item...\"\n                        className={`w-full bg-white/50 backdrop-blur-sm rounded-xl py-4 pl-4 pr-12 font-medium focus:outline-none focus:ring-2 focus:ring-black/10 ${theme.input} placeholder-opacity-60`}\n                        autoFocus\n                    />\n                    <button\n                        type=\"submit\"\n                        className=\"absolute right-2 top-2 bottom-2 w-10 bg-black/10 rounded-lg flex items-center justify-center hover:bg-black/20 text-current\"\n                    >\n                        <Plus size={20} />\n                    </button>\n                </form>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1148, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/AdminApprovalView.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { X, Check, Search, Shield, User } from 'lucide-react';\nimport { collection, query, where, getDocs, updateDoc, doc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { UserProfile } from '../types';\n\ninterface AdminApprovalViewProps {\n    onClose: () => void;\n}\n\nexport function AdminApprovalView({ onClose }: AdminApprovalViewProps) {\n    const [pendingUsers, setPendingUsers] = useState<UserProfile[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchPendingUsers();\n    }, []);\n\n    const fetchPendingUsers = async () => {\n        try {\n            setLoading(true);\n            // Fetch users where isApproved is false or missing\n            const q = query(collection(db, 'users'), where('isApproved', '==', false));\n            const querySnapshot = await getDocs(q);\n\n            const users: UserProfile[] = [];\n            querySnapshot.forEach((doc) => {\n                users.push({ uid: doc.id, ...doc.data() } as UserProfile);\n            });\n\n            setPendingUsers(users);\n        } catch (error) {\n            console.error(\"Error fetching pending users:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleApprove = async (userId: string) => {\n        try {\n            await updateDoc(doc(db, 'users', userId), {\n                isApproved: true\n            });\n            // Remove from local state\n            setPendingUsers(prev => prev.filter(u => u.uid !== userId));\n        } catch (error) {\n            console.error(\"Error approving user:\", error);\n            alert(\"Failed to approve user\");\n        }\n    };\n\n    const handleDecline = async (userId: string) => {\n        // Requirements say: \"decline should just not enable access\" - effectively doing nothing for now, \n        // potentially we could delete the user or mark as declined, but for now we'll just leave them in the list or maybe mark explicitly declined?\n        // Request says: \"check should enable access and cross should decline their access ... for now, decline should just not enable access\"\n        // So functionally, doing nothing on the backend is \"not enabling\".\n        // But to give feedback to the admin, maybe we should just remove them from the list? \n        // Or perhaps toggling 'isApproved: false' explicitly if it was undefined?\n        // Let's just alert for now since the requirement is vague on state change for decline.\n        // Actually, \"decline should just not enable access\" implies no change needed, but maybe we want to hide them from this list?\n        // I'll leave them there for now pending clarification, or just log it.\n        console.log(\"Decline logic clicked for\", userId);\n        // User requested: \"check should enable access and cross should decline their access\"\n        // \"we will implement decline flow later but for now, decline should just not enable access\"\n        // This implies that clicking X might just do nothing, or maybe close the row? \n        // I'll make it do nothing but maybe show a toast or something.\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200\">\n            <div className=\"bg-surface rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200\">\n                <div className=\"p-6 border-b border-border flex items-center justify-between bg-surface-variant/30\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 bg-primary/10 rounded-lg\">\n                            <Shield className=\"text-primary\" size={24} />\n                        </div>\n                        <div>\n                            <h2 className=\"text-xl font-bold text-on-surface\">Approve Users</h2>\n                            <p className=\"text-sm text-slate-500\">Manage pending access requests</p>\n                        </div>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 hover:bg-black/5 rounded-full transition-colors text-slate-500\"\n                    >\n                        <X size={24} />\n                    </button>\n                </div>\n\n                <div className=\"p-0 max-h-[60vh] overflow-y-auto\">\n                    {loading ? (\n                        <div className=\"p-12 text-center text-slate-500\">Loading requests...</div>\n                    ) : pendingUsers.length === 0 ? (\n                        <div className=\"p-12 text-center\">\n                            <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                <User className=\"text-slate-300\" size={32} />\n                            </div>\n                            <p className=\"text-slate-500 font-medium\">No pending user requests</p>\n                            <p className=\"text-sm text-slate-400 mt-1\">New signups will appear here</p>\n                        </div>\n                    ) : (\n                        <div className=\"divide-y divide-border\">\n                            {pendingUsers.map((user) => (\n                                <div key={user.uid} className=\"flex items-center justify-between p-4 hover:bg-black/[0.02] transition-colors\">\n                                    <div className=\"flex items-center gap-4\">\n                                        <div className=\"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-lg\">\n                                            {user.displayName ? user.displayName[0].toUpperCase() : (user.email ? user.email[0].toUpperCase() : '?')}\n                                        </div>\n                                        <div>\n                                            <h3 className=\"font-semibold text-slate-800\">{user.displayName || 'Unnamed User'}</h3>\n                                            <p className=\"text-sm text-slate-500\">{user.email}</p>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex items-center gap-2\">\n                                        <button\n                                            onClick={() => handleDecline(user.uid)}\n                                            className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                                            title=\"Decline Access\"\n                                        >\n                                            <X size={20} />\n                                        </button>\n                                        <button\n                                            onClick={() => handleApprove(user.uid)}\n                                            className=\"p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors border border-transparent hover:border-primary/20\"\n                                            title=\"Approve Access\"\n                                        >\n                                            <Check size={20} className=\"stroke-[3]\" />\n                                        </button>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"p-4 bg-surface-variant/30 border-t border-border text-center text-xs text-slate-400\">\n                    Showing {pendingUsers.length} pending request{pendingUsers.length !== 1 ? 's' : ''}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;;;;;;;AAOO,SAAS,kBAAkB,EAAE,OAAO,EAA0B;;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;uCAAC;YACN;QACJ;sCAAG,EAAE;IAEL,MAAM,oBAAoB;QACtB,IAAI;YACA,WAAW;YACX,mDAAmD;YACnD,MAAM,IAAI,IAAA,2KAAK,EAAC,IAAA,gLAAU,EAAC,+HAAE,EAAE,UAAU,IAAA,2KAAK,EAAC,cAAc,MAAM;YACnE,MAAM,gBAAgB,MAAM,IAAA,6KAAO,EAAC;YAEpC,MAAM,QAAuB,EAAE;YAC/B,cAAc,OAAO,CAAC,CAAC;gBACnB,MAAM,IAAI,CAAC;oBAAE,KAAK,IAAI,EAAE;oBAAE,GAAG,IAAI,IAAI,EAAE;gBAAC;YAC5C;YAEA,gBAAgB;QACpB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,iCAAiC;QACnD,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,gBAAgB,OAAO;QACzB,IAAI;YACA,MAAM,IAAA,+KAAS,EAAC,IAAA,yKAAG,EAAC,+HAAE,EAAE,SAAS,SAAS;gBACtC,YAAY;YAChB;YACA,0BAA0B;YAC1B,gBAAgB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,GAAG,KAAK;QACvD,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV;IACJ;IAEA,MAAM,gBAAgB,OAAO;QACzB,kGAAkG;QAClG,6IAA6I;QAC7I,sIAAsI;QACtI,mEAAmE;QACnE,sFAAsF;QACtF,0EAA0E;QAC1E,uFAAuF;QACvF,6HAA6H;QAC7H,uEAAuE;QACvE,QAAQ,GAAG,CAAC,6BAA6B;IACzC,qFAAqF;IACrF,4FAA4F;IAC5F,+EAA+E;IAC/E,+DAA+D;IACnE;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,mNAAM;wCAAC,WAAU;wCAAe,MAAM;;;;;;;;;;;8CAE3C,6LAAC;;sDACG,6LAAC;4CAAG,WAAU;sDAAoC;;;;;;sDAClD,6LAAC;4CAAE,WAAU;sDAAyB;;;;;;;;;;;;;;;;;;sCAG9C,6LAAC;4BACG,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAIjB,6LAAC;oBAAI,WAAU;8BACV,wBACG,6LAAC;wBAAI,WAAU;kCAAkC;;;;;+BACjD,aAAa,MAAM,KAAK,kBACxB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC,6MAAI;oCAAC,WAAU;oCAAiB,MAAM;;;;;;;;;;;0CAE3C,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,6LAAC;gCAAE,WAAU;0CAA8B;;;;;;;;;;;6CAG/C,6LAAC;wBAAI,WAAU;kCACV,aAAa,GAAG,CAAC,CAAC,qBACf,6LAAC;gCAAmB,WAAU;;kDAC1B,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;0DACV,KAAK,WAAW,GAAG,KAAK,WAAW,CAAC,EAAE,CAAC,WAAW,KAAM,KAAK,KAAK,GAAG,KAAK,KAAK,CAAC,EAAE,CAAC,WAAW,KAAK;;;;;;0DAExG,6LAAC;;kEACG,6LAAC;wDAAG,WAAU;kEAAgC,KAAK,WAAW,IAAI;;;;;;kEAClE,6LAAC;wDAAE,WAAU;kEAA0B,KAAK,KAAK;;;;;;;;;;;;;;;;;;kDAIzD,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDACG,SAAS,IAAM,cAAc,KAAK,GAAG;gDACrC,WAAU;gDACV,OAAM;0DAEN,cAAA,6LAAC,oMAAC;oDAAC,MAAM;;;;;;;;;;;0DAEb,6LAAC;gDACG,SAAS,IAAM,cAAc,KAAK,GAAG;gDACrC,WAAU;gDACV,OAAM;0DAEN,cAAA,6LAAC,gNAAK;oDAAC,MAAM;oDAAI,WAAU;;;;;;;;;;;;;;;;;;+BAxB7B,KAAK,GAAG;;;;;;;;;;;;;;;8BAiClC,6LAAC;oBAAI,WAAU;;wBAAsF;wBACxF,aAAa,MAAM;wBAAC;wBAAiB,aAAa,MAAM,KAAK,IAAI,MAAM;;;;;;;;;;;;;;;;;;AAKpG;GApIgB;KAAA"}},
    {"offset": {"line": 1489, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/CollaboratorsView.tsx"],"sourcesContent":["import { X, Trash2, Users } from 'lucide-react';\nimport { collection, query, where, deleteDoc, doc } from 'firebase/firestore';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { db } from '../lib/firebase';\n\ninterface CollaboratorsViewProps {\n    userId: string;\n    onClose: () => void;\n}\n\nexport const CollaboratorsView = ({ userId, onClose }: CollaboratorsViewProps) => {\n    // Fetch collaborations where I am the inviter\n    const [collaborationsSnapshot, loading, error] = useCollection(\n        query(collection(db, 'collaborations'), where('inviterId', '==', userId))\n    );\n\n    const handleRemoveCollaborator = async (collabId: string) => {\n        if (!confirm('Are you sure you want to remove this collaborator? They will lose access to your lists.')) return;\n        try {\n            await deleteDoc(doc(db, 'collaborations', collabId));\n        } catch (error) {\n            console.error(\"Error removing collaborator:\", error);\n            alert(\"Failed to remove collaborator.\");\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200\">\n            <div className=\"bg-white rounded-2xl material-shadow-3 w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200\">\n                {/* Header */}\n                <div className=\"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50\">\n                    <h2 className=\"text-xl font-display font-bold text-slate-900 flex items-center gap-2\">\n                        <Users className=\"text-primary\" />\n                        Manage Collaborators\n                    </h2>\n                    <button\n                        onClick={onClose}\n                        className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors\"\n                    >\n                        <X size={20} />\n                    </button>\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n                    {loading && (\n                        <div className=\"text-center py-8 text-slate-500\">\n                            Loading...\n                        </div>\n                    )}\n\n                    {error && (\n                        <div className=\"p-4 bg-red-50 text-red-600 rounded-xl text-sm font-medium\">\n                            Failed to load collaborators.\n                        </div>\n                    )}\n\n                    {!loading && !error && collaborationsSnapshot?.empty && (\n                        <div className=\"text-center py-8\">\n                            <div className=\"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300\">\n                                <Users size={32} />\n                            </div>\n                            <p className=\"text-slate-500 font-medium\">No active collaborators</p>\n                            <p className=\"text-xs text-slate-400 mt-1\">Invite people from the user menu to get started.</p>\n                        </div>\n                    )}\n\n                    <div className=\"space-y-2\">\n                        {collaborationsSnapshot?.docs.map(doc => {\n                            const data = doc.data();\n                            return (\n                                <div key={doc.id} className=\"flex items-center justify-between p-3 rounded-xl bg-slate-50 border border-slate-100 group hover:border-slate-200 transition-colors\">\n                                    <div className=\"min-w-0\">\n                                        <p className=\"text-sm font-semibold text-slate-700 truncate\">\n                                            {data.inviteeEmail || 'Unknown User'}\n                                        </p>\n                                        <p className=\"text-xs text-slate-400\">\n                                            Added {new Date(data.createdAt).toLocaleDateString()}\n                                        </p>\n                                    </div>\n                                    <button\n                                        onClick={() => handleRemoveCollaborator(doc.id)}\n                                        className=\"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all\"\n                                        title=\"Revoke Access\"\n                                    >\n                                        <Trash2 size={18} />\n                                    </button>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;AAOO,MAAM,oBAAoB,CAAC,EAAE,MAAM,EAAE,OAAO,EAA0B;;IACzE,8CAA8C;IAC9C,MAAM,CAAC,wBAAwB,SAAS,MAAM,GAAG,IAAA,mMAAa,EAC1D,IAAA,2KAAK,EAAC,IAAA,gLAAU,EAAC,+HAAE,EAAE,mBAAmB,IAAA,2KAAK,EAAC,aAAa,MAAM;IAGrE,MAAM,2BAA2B,OAAO;QACpC,IAAI,CAAC,QAAQ,4FAA4F;QACzG,IAAI;YACA,MAAM,IAAA,+KAAS,EAAC,IAAA,yKAAG,EAAC,+HAAE,EAAE,kBAAkB;QAC9C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM;QACV;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;;8CACV,6LAAC,gNAAK;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;sCAGtC,6LAAC;4BACG,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAI,WAAU;;wBACV,yBACG,6LAAC;4BAAI,WAAU;sCAAkC;;;;;;wBAKpD,uBACG,6LAAC;4BAAI,WAAU;sCAA4D;;;;;;wBAK9E,CAAC,WAAW,CAAC,SAAS,wBAAwB,uBAC3C,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,gNAAK;wCAAC,MAAM;;;;;;;;;;;8CAEjB,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAC1C,6LAAC;oCAAE,WAAU;8CAA8B;;;;;;;;;;;;sCAInD,6LAAC;4BAAI,WAAU;sCACV,wBAAwB,KAAK,IAAI,CAAA;gCAC9B,MAAM,OAAO,IAAI,IAAI;gCACrB,qBACI,6LAAC;oCAAiB,WAAU;;sDACxB,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAE,WAAU;8DACR,KAAK,YAAY,IAAI;;;;;;8DAE1B,6LAAC;oDAAE,WAAU;;wDAAyB;wDAC3B,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;sDAG1D,6LAAC;4CACG,SAAS,IAAM,yBAAyB,IAAI,EAAE;4CAC9C,WAAU;4CACV,OAAM;sDAEN,cAAA,6LAAC,uNAAM;gDAAC,MAAM;;;;;;;;;;;;mCAdZ,IAAI,EAAE;;;;;4BAkBxB;;;;;;;;;;;;;;;;;;;;;;;AAMxB;GArFa;;QAEwC,mMAAa;;;KAFrD"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/UserMenu.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { LogOut, UserPlus, Check, X, Users, Shield } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { doc, setDoc } from 'firebase/firestore';\nimport { auth, db } from '../lib/firebase';\nimport { AdminApprovalView } from '../views/AdminApprovalView';\nimport { CollaboratorsView } from '../views/CollaboratorsView';\n\ninterface UserMenuProps {\n    userName?: string | null;\n    userId: string;\n    isAdmin?: boolean;\n    onLogout: () => void;\n}\n\nexport const UserMenu = ({ userName, userId, isAdmin, onLogout }: UserMenuProps) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [showAdminApproval, setShowAdminApproval] = useState(false);\n    const [showCollaborators, setShowCollaborators] = useState(false);\n    const [isInviting, setIsInviting] = useState(false);\n    const [inviteEmail, setInviteEmail] = useState('');\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    // Close on click outside\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsOpen(false);\n                setIsInviting(false);\n                // Don't close admin/collab view here, handled by their own close buttons\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const handleInviteSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!inviteEmail) return;\n\n        try {\n            const collabId = `${userId}_${inviteEmail.trim()}`;\n            await setDoc(doc(db, 'collaborations', collabId), {\n                inviterId: userId,\n                inviteeEmail: inviteEmail.trim(),\n                createdAt: Date.now()\n            });\n\n            alert(`Invite sent to ${inviteEmail}!`);\n            setInviteEmail('');\n            setIsInviting(false);\n        } catch (error: any) {\n            console.error('Error sending invite:', error);\n            alert('Failed to send invite: ' + error.message);\n        }\n    };\n\n    return (\n        <div className=\"relative font-display\" ref={menuRef}>\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"text-2xl font-bold text-slate-900 flex items-center gap-2 hover:opacity-80 transition-opacity\"\n            >\n                Hi <span className=\"text-primary\">{userName || 'User'}</span>\n            </button>\n\n            {isOpen && (\n                <div className=\"absolute top-full left-0 mt-2 w-80 bg-white rounded-[var(--radius-lg)] material-shadow-2 z-50 overflow-hidden border border-slate-100 p-2 text-sm\">\n\n                    {/* Invite Action */}\n                    <div className=\"mb-1\">\n                        {!isInviting ? (\n                            <button\n                                onClick={() => setIsInviting(true)}\n                                className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium\"\n                            >\n                                <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\n                                    <UserPlus size={18} />\n                                </div>\n                                Invite Collaborator\n                            </button>\n                        ) : (\n                            <form onSubmit={handleInviteSubmit} className=\"p-2 flex gap-2 bg-slate-50 rounded-lg items-center\">\n                                <input\n                                    type=\"email\"\n                                    autoFocus\n                                    className=\"flex-1 bg-transparent text-sm font-medium placeholder-slate-400 focus:outline-none min-w-0 h-8\"\n                                    placeholder=\"friend@email.com\"\n                                    value={inviteEmail}\n                                    onChange={(e) => setInviteEmail(e.target.value)}\n                                />\n                                <div className=\"flex gap-1 shrink-0\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => setIsInviting(false)}\n                                        className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-200 transition-colors\"\n                                    >\n                                        <X size={16} />\n                                    </button>\n                                    <button\n                                        type=\"submit\"\n                                        className=\"w-8 h-8 flex items-center justify-center text-white bg-green-500 hover:bg-green-600 rounded-full shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                                        disabled={!inviteEmail}\n                                    >\n                                        <Check size={16} />\n                                    </button>\n                                </div>\n                            </form>\n                        )}\n                    </div>\n\n                    {/* Manage Collaborators */}\n                    <div className=\"mb-1\">\n                        <button\n                            onClick={() => {\n                                setIsOpen(false);\n                                setShowCollaborators(true);\n                            }}\n                            className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium\"\n                        >\n                            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\n                                <Users size={18} />\n                            </div>\n                            Manage Collaborators\n                        </button>\n                    </div>\n\n                    {/* Admin Actions */}\n                    {isAdmin && (\n                        <div className=\"mb-1\">\n                            <button\n                                onClick={() => {\n                                    setIsOpen(false);\n                                    setShowAdminApproval(true);\n                                }}\n                                className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium\"\n                            >\n                                <div className=\"w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600\">\n                                    <Shield size={18} />\n                                </div>\n                                Approve Users\n                            </button>\n                        </div>\n                    )}\n\n                    {/* Divider */}\n                    <div className=\"h-px bg-slate-100 my-1 mx-2\" />\n\n                    {/* Logout Action */}\n                    <button\n                        onClick={onLogout}\n                        className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-red-50 flex items-center gap-3 transition-colors text-red-600 font-medium group\"\n                    >\n                        <div className=\"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-600 group-hover:bg-red-200 transition-colors\">\n                            <LogOut size={18} />\n                        </div>\n                        Log Out\n                    </button>\n                </div>\n            )}\n            {showAdminApproval && <AdminApprovalView onClose={() => setShowAdminApproval(false)} />}\n            {showCollaborators && <CollaboratorsView userId={userId} onClose={() => setShowCollaborators(false)} />}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2050, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/AllListsView.tsx"],"sourcesContent":["import { useState, useMemo } from 'react';\nimport { Plus, HelpCircle } from 'lucide-react';\nimport { ListCard } from '../components/ListCard';\nimport { TabSwitcher } from '../components/TabSwitcher';\nimport { ExpandedListView } from '../components/ExpandedListView';\nimport {\n    collection,\n    addDoc,\n    query,\n    where\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport type { ShoppingList, ListItem, PantryItem } from '../types';\n\nimport { UserMenu } from '../components/UserMenu';\n\ninterface AllListsViewProps {\n    userId: string;\n    userName?: string | null;\n    userEmail?: string | null;\n    isAdmin?: boolean;\n    onLogout: () => void;\n    onBack: () => void;\n    onNavigateToHelp: () => void;\n}\n\nexport const AllListsView = ({ userId, userName, userEmail, isAdmin, onLogout, onBack, onNavigateToHelp }: AllListsViewProps) => {\n    const [activeTab, setActiveTab] = useState<'shopping' | 'pantry'>('shopping');\n    const [expandedListId, setExpandedListId] = useState<string | null>(null);\n    const [isCreating, setIsCreating] = useState(false);\n    const [newListName, setNewListName] = useState('');\n\n    // --- Data Fetching ---\n\n    // 0. Collaborations (Shared with me)\n    // We check both inviteeId (legacy/direct) and inviteeEmail (new flow)\n    const [collabSnapshotUID] = useCollection(\n        query(collection(db, 'collaborations'), where('inviteeId', '==', userId))\n    );\n    const [collabSnapshotEmail] = useCollection(\n        userEmail ? query(collection(db, 'collaborations'), where('inviteeEmail', '==', userEmail)) : null\n    );\n\n    const allowedUserIds = useMemo(() => {\n        const idsFromUID = collabSnapshotUID?.docs.map(d => d.data().inviterId) || [];\n        const idsFromEmail = collabSnapshotEmail?.docs.map(d => d.data().inviterId) || [];\n\n        // Firestore 'in' limit is 30. We prioritize the current user + first 29 collaborators.\n        const allIds = [userId, ...idsFromUID, ...idsFromEmail];\n        return [...new Set(allIds)].slice(0, 30);\n    }, [collabSnapshotUID, collabSnapshotEmail, userId]);\n\n    // 1. Lists\n    const listQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'lists'), where('userId', 'in', allowedUserIds))\n            : null\n        , [allowedUserIds]);\n\n    const [listsSnapshot] = useCollection(listQuery);\n\n    const lists = useMemo(() =>\n        listsSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as ShoppingList)) || [],\n        [listsSnapshot]);\n\n    // 2. All Items (for counts)\n    const itemsQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'items'), where('userId', 'in', allowedUserIds), where('isBought', '==', false))\n            : null\n        , [allowedUserIds]);\n\n    const [itemsSnapshot] = useCollection(itemsQuery);\n\n    const allItems = useMemo(() =>\n        itemsSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as ListItem)) || [],\n        [itemsSnapshot]);\n\n    // 3. All Pantry Items (for counts)\n    const pantryQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'pantry'), where('userId', 'in', allowedUserIds))\n            : null\n        , [allowedUserIds]);\n\n    const [pantrySnapshot] = useCollection(pantryQuery);\n\n    const allPantryItems = useMemo(() =>\n        pantrySnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as PantryItem)) || [],\n        [pantrySnapshot]);\n\n    // --- Derived State ---\n\n    const getListStats = (listId: string) => {\n        const itemsCount = allItems.filter(i => i.listId === listId).length;\n        const pantryCount = allPantryItems.filter(i => i.sourceListId === listId).length;\n        return { itemsCount, pantryCount };\n    };\n\n    const getColorForList = (index: number) => {\n        const colors = ['purple', 'blue', 'yellow', 'green', 'pink'] as const;\n        return colors[index % colors.length];\n    };\n\n    // --- Handlers ---\n\n    const handleCreateList = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newListName.trim()) {\n            setIsCreating(false);\n            return;\n        }\n\n        const docRef = await addDoc(collection(db, 'lists'), {\n            userId,\n            name: newListName,\n            createdAt: Date.now(),\n            ownerEmail: '' // Optional or verify auth provider\n        });\n\n        setNewListName('');\n        setIsCreating(false);\n        // Optionally expand the new list immediately\n        setExpandedListId(docRef.id);\n    };\n\n    // --- Render ---\n\n    // 1. Expanded View?\n    if (expandedListId) {\n        const list = lists.find(l => l.id === expandedListId);\n        if (list) {\n            const index = lists.findIndex(l => l.id === expandedListId);\n            return (\n                <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n                    <ExpandedListView\n                        listId={list.id}\n                        listName={list.name}\n                        userId={userId} // Pass userId so we know who is viewing\n                        variant={getColorForList(index)}\n                        activeTab={activeTab}\n                        onBack={() => setExpandedListId(null)}\n                    />\n                </div>\n            );\n        }\n    }\n\n    // 2. Main List View\n    return (\n        <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center mb-6\">\n                <UserMenu userName={userName} userId={userId} isAdmin={isAdmin} onLogout={onLogout} />\n                <div className=\"flex gap-3\">\n                    <button\n                        onClick={onNavigateToHelp}\n                        className=\"w-10 h-10 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center hover:bg-slate-200 transition-colors\"\n                        aria-label=\"Help\"\n                    >\n                        <HelpCircle size={24} />\n                    </button>\n                    <button\n                        onClick={() => setIsCreating(true)}\n                        className=\"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center hover:bg-slate-700 transition-colors shadow-lg\"\n                        aria-label=\"Create New List\"\n                    >\n                        <Plus size={24} />\n                    </button>\n                </div>\n            </div>\n\n            {/* Tabs */}\n            <TabSwitcher activeTab={activeTab} onTabChange={setActiveTab} />\n\n            {/* Content */}\n            <div className=\"grid grid-cols-1 gap-4\">\n                {/* Creation Card */}\n                {isCreating && (\n                    <div className=\"rounded-[var(--radius-xl)] p-6 bg-slate-100 material-shadow-1 border-2 border-dashed border-slate-300\">\n                        <form onSubmit={handleCreateList}>\n                            <input\n                                autoFocus\n                                type=\"text\"\n                                placeholder=\"List Name...\"\n                                className=\"w-full bg-transparent text-xl font-bold placeholder-slate-400 focus:outline-none\"\n                                value={newListName}\n                                onChange={e => setNewListName(e.target.value)}\n                                onBlur={() => !newListName && setIsCreating(false)}\n                                onKeyDown={e => e.key === 'Escape' && setIsCreating(false)}\n                            />\n                            <div className=\"flex justify-end mt-4\">\n                                <button\n                                    type=\"submit\"\n                                    className=\"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-bold\"\n                                >\n                                    Save\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                )}\n\n                {/* Lists */}\n                {lists.length === 0 && !isCreating ? (\n                    <div className=\"text-center py-10 opacity-50\">\n                        <p>No lists found. Click + to create one.</p>\n                    </div>\n                ) : (\n                    lists.map((list, index) => {\n                        const { itemsCount, pantryCount } = getListStats(list.id);\n                        return (\n                            <ListCard\n                                key={list.id}\n                                title={list.name}\n                                itemsCount={itemsCount}\n                                pantryCount={pantryCount}\n                                variant={getColorForList(index)}\n                                activeTab={activeTab}\n                                onClick={() => setExpandedListId(list.id)}\n                            />\n                        );\n                    })\n                )}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2407, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/LandingView.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ShoppingCart, Zap, Box, ArrowRight, Loader2, Check, ChefHat, Users } from 'lucide-react';\nimport { auth, db } from '../lib/firebase';\nimport { signInWithPopup, GoogleAuthProvider, isSignInWithEmailLink, signInWithEmailLink } from 'firebase/auth';\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { ListCard } from '../components/ListCard';\n\ninterface LandingViewProps {\n    onLoginSuccess: () => void;\n}\n\nexport const LandingView = ({ onLoginSuccess }: LandingViewProps) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Handle Email Link Sign-in\n    useEffect(() => {\n        if (isSignInWithEmailLink(auth, window.location.href)) {\n            setIsLoading(true);\n            let email = window.localStorage.getItem('emailForSignIn');\n\n            if (!email) {\n                email = window.prompt('Please provide your email for confirmation');\n            }\n\n            if (email) {\n                signInWithEmailLink(auth, email, window.location.href)\n                    .then(async (result) => {\n                        window.localStorage.removeItem('emailForSignIn');\n                        if (result.user) {\n                            await setDoc(doc(db, 'users', result.user.uid), {\n                                uid: result.user.uid,\n                                email: result.user.email,\n                                displayName: result.user.displayName || email?.split('@')[0],\n                                photoURL: result.user.photoURL,\n                                lastLogin: serverTimestamp()\n                            }, { merge: true });\n                        }\n                        onLoginSuccess();\n                    })\n                    .catch((err) => {\n                        console.error(\"Email link sign-in failed:\", err);\n                        setError(err.message);\n                        setIsLoading(false);\n                    });\n            } else {\n                setIsLoading(false);\n                setError(\"Email is required to complete sign-in.\");\n            }\n        }\n    }, [onLoginSuccess]);\n\n    const handleLogin = async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const provider = new GoogleAuthProvider();\n            const result = await signInWithPopup(auth, provider);\n\n            if (result.user) {\n                await setDoc(doc(db, 'users', result.user.uid), {\n                    uid: result.user.uid,\n                    email: result.user.email,\n                    displayName: result.user.displayName,\n                    photoURL: result.user.photoURL,\n                    lastLogin: serverTimestamp()\n                }, { merge: true });\n            }\n\n            onLoginSuccess();\n        } catch (err: any) {\n            console.error(\"Login failed:\", err);\n            if (err.code === 'auth/popup-blocked') {\n                setError(\"Popup blocked! Please allow popups for this site and try again.\");\n            } else if (err.code === 'auth/configuration-not-found') {\n                setError(\"Firebase Authentication is not configured. Please enable Google Sign-In in the Firebase Console.\");\n            } else {\n                setError(err.message || \"Failed to sign in. Please try again.\");\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-surface\">\n            {/* Navbar */}\n            <nav className=\"fixed top-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-slate-100\">\n                <div className=\"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center\">\n                            <ShoppingCart className=\"text-white\" size={18} />\n                        </div>\n                        <span className=\"font-bold text-xl text-slate-900 tracking-tight\">Pantry<span className=\"text-indigo-600\">2List</span></span>\n                    </div>\n                    <button\n                        onClick={handleLogin}\n                        className=\"text-sm font-bold text-slate-600 hover:text-indigo-600 transition-colors\"\n                    >\n                        Sign In\n                    </button>\n                </div>\n            </nav>\n\n            {/* Hero Section */}\n            <header className=\"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden\">\n                <div className=\"max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center\">\n\n                    {/* Left: Copy */}\n                    <div className=\"max-w-2xl relative z-10\">\n                        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 text-indigo-700 text-sm font-bold mb-6 border border-indigo-100\">\n                            <Zap size={16} className=\"fill-indigo-700\" />\n                            <span>New: Smart Pantry Tracking</span>\n                        </div>\n\n                        <h1 className=\"text-5xl lg:text-7xl font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight\">\n                            Stop buying spread. <br />\n                            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600\">\n                                Start tracking bread.\n                            </span>\n                        </h1>\n\n                        <p className=\"text-xl text-slate-600 mb-8 leading-relaxed max-w-lg\">\n                            Pantry2List bridges the gap between your shopping list and your kitchen inventory. Never wonder \"Do I have milk?\" again.\n                        </p>\n\n                        <div className=\"flex flex-col sm:flex-row gap-4 mb-4\">\n                            <button\n                                onClick={handleLogin}\n                                disabled={isLoading}\n                                className=\"h-14 px-8 rounded-full bg-slate-900 text-white font-bold text-lg flex items-center justify-center gap-2 hover:bg-slate-800 transition-all shadow-xl shadow-slate-200 active:scale-95\"\n                            >\n                                {isLoading ? <Loader2 className=\"animate-spin\" /> : 'Get Started Free'}\n                                <ArrowRight size={20} />\n                            </button>\n                        </div>\n\n                        {error && (\n                            <p className=\"mt-4 text-red-600 text-sm bg-red-50 py-2 px-4 rounded-lg inline-block\">{error}</p>\n                        )}\n\n                        <div className=\"mt-8 flex items-center gap-4 text-sm text-slate-500 font-medium\">\n                            <div className=\"flex -space-x-2\">\n                                {[1, 2, 3, 4].map(i => (\n                                    <div key={i} className=\"w-8 h-8 rounded-full border-2 border-white bg-slate-200\" />\n                                ))}\n                            </div>\n                            <p>Joined by 1,000+ smart shoppers</p>\n                        </div>\n                    </div>\n\n                    {/* Right: Phone Mockup */}\n                    <div className=\"relative z-0 lg:h-[600px] flex items-center justify-center\">\n                        {/* Decorative Blobs */}\n                        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-indigo-200 rounded-full blur-3xl opacity-30 animate-pulse\" />\n                        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] bg-purple-200 rounded-full blur-3xl opacity-30\" />\n\n                        {/* The Mockup */}\n                        <div className=\"relative w-[320px] bg-white rounded-[40px] shadow-2xl border-8 border-slate-900 overflow-hidden transform rotate-[-5deg] hover:rotate-0 transition-transform duration-500 ease-out\">\n                            {/* Notch */}\n                            <div className=\"absolute top-0 left-1/2 -translate-x-1/2 h-6 w-32 bg-slate-900 rounded-b-2xl z-20\" />\n\n                            {/* App Header */}\n                            <div className=\"bg-slate-50 p-6 pt-12 border-b border-slate-100\">\n                                <div className=\"flex justify-between items-center mb-6\">\n                                    <div className=\"flex items-center gap-2 text-slate-900 font-bold text-lg\">\n                                        Hi <span className=\"text-indigo-600\">Srinivas</span>\n                                    </div>\n                                    <div className=\"w-8 h-8 rounded-full bg-slate-900 flex items-center justify-center text-white shadow-lg\">\n                                        <ArrowRight size={16} className=\"rotate-[-45deg]\" />\n                                    </div>\n                                </div>\n                                {/* Fake Tabs */}\n                                <div className=\"flex p-1 bg-slate-200/50 rounded-xl\">\n                                    <div className=\"flex-1 py-2 text-center text-xs font-bold bg-white shadow-sm rounded-lg text-slate-900\">\n                                        Lists\n                                    </div>\n                                    <div className=\"flex-1 py-2 text-center text-xs font-bold text-slate-500\">\n                                        Pantry\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* App Content */}\n                            <div className=\"bg-surface p-4 space-y-3 min-h-[400px]\">\n                                <ListCard\n                                    title=\"Weekly Groceries\"\n                                    itemsCount={12}\n                                    pantryCount={5}\n                                    variant=\"purple\"\n                                    activeTab=\"shopping\"\n                                />\n                                <ListCard\n                                    title=\"Taco Night\"\n                                    itemsCount={4}\n                                    pantryCount={8}\n                                    variant=\"yellow\"\n                                    activeTab=\"shopping\"\n                                />\n                                <ListCard\n                                    title=\"Costco Run\"\n                                    itemsCount={18}\n                                    pantryCount={2}\n                                    variant=\"blue\"\n                                    activeTab=\"shopping\"\n                                />\n                            </div>\n\n                            {/* Floating Action Button */}\n                            <div className=\"absolute bottom-6 right-6 w-14 h-14 bg-slate-900 rounded-full flex items-center justify-center text-white shadow-xl material-fab-shadow\">\n                                <div className=\"w-6 h-6 border-2 border-white rounded-sm\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            {/* Features Section */}\n            <section className=\"py-24 bg-white\">\n                <div className=\"max-w-7xl mx-auto px-6\">\n                    <div className=\"text-center max-w-2xl mx-auto mb-16\">\n                        <h2 className=\"text-3xl font-bold text-slate-900 mb-4\">Everything you need to master your kitchen</h2>\n                        <p className=\"text-slate-500 text-lg\">Managing groceries shouldn't be a chore. We've built the tools to make it effortless.</p>\n                    </div>\n\n                    <div className=\"grid md:grid-cols-3 gap-8\">\n                        <FeatureCard\n                            icon={<Zap className=\"text-amber-500\" />}\n                            title=\"Auto-Replenish\"\n                            description=\"Bought it? It's in your pantry. Used it? It's back on your list. The cycle is seamless.\"\n                        />\n                        <FeatureCard\n                            icon={<ChefHat className=\"text-indigo-500\" />}\n                            title=\"Smart Pantry\"\n                            description=\"Know exactly what you have at home before you buy. Reduce food waste and save money.\"\n                        />\n                        <FeatureCard\n                            icon={<Users className=\"text-emerald-500\" />}\n                            title=\"Collaborative Lists\"\n                            description=\"Plan dinner with your partner or roommates. Changes sync in real-time across all devices.\"\n                        />\n                    </div>\n                </div>\n            </section>\n\n            {/* Footer */}\n            <footer className=\"bg-slate-50 py-12 border-t border-slate-100\">\n                <div className=\"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center\">\n                            <ShoppingCart className=\"text-white\" size={18} />\n                        </div>\n                        <span className=\"font-bold text-xl text-slate-900\">Pantry<span className=\"text-indigo-600\">2List</span></span>\n                    </div>\n                    <p className=\"text-slate-400 text-sm\"> 2026 Pantry2List. Built for smart shoppers.</p>\n                </div>\n            </footer>\n        </div>\n    );\n};\n\nconst FeatureCard = ({ icon, title, description }: { icon: React.ReactNode, title: string, description: string }) => (\n    <div className=\"p-8 rounded-3xl bg-slate-50 border border-slate-100 hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 hover:border-slate-200 transition-all duration-300\">\n        <div className=\"w-12 h-12 bg-white rounded-2xl shadow-sm flex items-center justify-center mb-6\">\n            {icon}\n        </div>\n        <h3 className=\"text-xl font-bold text-slate-900 mb-3\">{title}</h3>\n        <p className=\"text-slate-500 leading-relaxed\">{description}</p>\n    </div>\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3120, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/WaitApprovalView.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Clock, LogOut } from 'lucide-react';\n\ninterface WaitApprovalViewProps {\n    onLogout: () => void;\n    email?: string | null;\n}\n\nexport function WaitApprovalView({ onLogout, email }: WaitApprovalViewProps) {\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-surface p-6\">\n            <div className=\"max-w-md w-full text-center\">\n                <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse\">\n                    <Clock className=\"text-primary\" size={40} />\n                </div>\n\n                <h1 className=\"text-3xl font-bold text-on-surface mb-4\">Account Pending</h1>\n\n                <p className=\"text-slate-500 text-lg mb-8 leading-relaxed\">\n                    Thanks for signing up{email ? `, ${email}` : ''}!\n                    <br />\n                    Your account is currently waiting for administrator approval.\n                    You will be granted access once an admin reviews your request.\n                </p>\n\n                <div className=\"bg-surface-variant/50 border border-border p-4 rounded-xl mb-8 text-sm text-slate-500\">\n                    Please contact the administrator if you believe this is an error or if you need immediate access.\n                </div>\n\n                <button\n                    onClick={onLogout}\n                    className=\"w-full bg-slate-900 hover:bg-slate-800 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-900/20\"\n                >\n                    <LogOut size={20} />\n                    Sign Out\n                </button>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;;;AAOO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,KAAK,EAAyB;IACvE,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,gNAAK;wBAAC,WAAU;wBAAe,MAAM;;;;;;;;;;;8BAG1C,6LAAC;oBAAG,WAAU;8BAA0C;;;;;;8BAExD,6LAAC;oBAAE,WAAU;;wBAA8C;wBACjC,QAAQ,CAAC,EAAE,EAAE,OAAO,GAAG;wBAAG;sCAChD,6LAAC;;;;;wBAAK;;;;;;;8BAKV,6LAAC;oBAAI,WAAU;8BAAwF;;;;;;8BAIvG,6LAAC;oBACG,SAAS;oBACT,WAAU;;sCAEV,6LAAC,uNAAM;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAMxC;KA/BgB"}},
    {"offset": {"line": 3227, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/assets/guide-create.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD0yayS4u2MqbkIAP7xh+nSrTsLZ3P/2Q==\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,qJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAAy3B"}},
    {"offset": {"line": 3251, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/assets/guide-add.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwCkI7U/AbYHg+0bdxyVz/rc4z1z7VdvdIvqf//Z\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,kJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAA63B"}},
    {"offset": {"line": 3275, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/assets/guide-pantry.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1sxsSCRwD2bHGKznFuSfbzt/w409D/9k=\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,qJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAAy3B"}},
    {"offset": {"line": 3299, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/assets/guide-invite.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1jZzv2pn1zzQI/9k=\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,qJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAAy2B"}},
    {"offset": {"line": 3323, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/assets/guide-restock.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1T7Jatqv2nO25zgfMc4x6fShgrH//2Q==\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,sJAAG;IAAE,OAAO;IAAM,QAAQ;IAAM,WAAW;IAAG,YAAY;IAAG,aAAa;AAAy3B"}},
    {"offset": {"line": 3344, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/HelpView.tsx"],"sourcesContent":["import { ArrowLeft } from 'lucide-react';\nimport Image from 'next/image';\nimport guideCreate from '../assets/guide-create.png';\nimport guideAdd from '../assets/guide-add.png';\nimport guidePantry from '../assets/guide-pantry.png';\nimport guideInvite from '../assets/guide-invite.png';\nimport guideRestock from '../assets/guide-restock.png';\n\ninterface HelpViewProps {\n    onBack: () => void;\n}\n\nexport const HelpView = ({ onBack }: HelpViewProps) => {\n    const guides = [\n        {\n            title: \"Creating a List\",\n            description: \"Tap the + button in the top right to start a new shopping list. Give it a name and it will appear in your main view.\",\n            image: guideCreate,\n            color: \"bg-purple-100 text-purple-900\"\n        },\n        {\n            title: \"Adding Items\",\n            description: \"Tap on any list to expand it. Type in the bottom bar to add items quickly. They will appear at the top of your list.\",\n            image: guideAdd,\n            color: \"bg-blue-100 text-blue-900\"\n        },\n        {\n            title: \"Managing Pantry\",\n            description: \"Switch between 'Shopping' and 'Pantry' tabs. Checked items from your shopping list can be moved directly to your pantry to keep track of what you have at home.\",\n            image: guidePantry,\n            color: \"bg-yellow-100 text-yellow-900\"\n        },\n        {\n            title: \"Inviting Collaborators\",\n            description: \"Share your lists with family or roommates. Go to the menu, select 'Manage Collaborators', and invite them by email.\",\n            image: guideInvite,\n            color: \"bg-green-100 text-green-900\"\n        },\n        {\n            title: \"Restocking & Consuming\",\n            description: \"In your pantry, use the '+' button to quickly add an item back to your shopping list. Use the '-' button to decrease the quantity as you use items.\",\n            image: guideRestock,\n            color: \"bg-orange-100 text-orange-900\"\n        }\n    ];\n\n    return (\n        <div className=\"min-h-screen bg-surface pb-24\">\n            {/* Header */}\n            <div className=\"sticky top-0 z-10 bg-surface/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center gap-4\">\n                <button\n                    onClick={onBack}\n                    className=\"p-2 -ml-2 rounded-full hover:bg-slate-100 transition-colors\"\n                >\n                    <ArrowLeft size={24} className=\"text-slate-700\" />\n                </button>\n                <h1 className=\"text-2xl font-bold text-slate-900\">Help & Guides</h1>\n            </div>\n\n            <div className=\"px-6 py-6 max-w-2xl mx-auto space-y-12\">\n                {guides.map((guide, index) => (\n                    <section key={index} className=\"space-y-4\">\n                        <div className={`rounded-2xl overflow-hidden shadow-sm border border-slate-100 ${guide.color}`}>\n                            <div className=\"aspect-video w-full bg-white/50 relative\">\n                                <Image\n                                    src={guide.image}\n                                    alt={guide.title}\n                                    className=\"object-contain p-4\"\n                                    fill\n                                />\n                            </div>\n                            <div className=\"p-6\">\n                                <h2 className=\"text-xl font-bold mb-2\">{guide.title}</h2>\n                                <p className=\"opacity-90 leading-relaxed\">\n                                    {guide.description}\n                                </p>\n                            </div>\n                        </div>\n                    </section>\n                ))}\n\n\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAMO,MAAM,WAAW,CAAC,EAAE,MAAM,EAAiB;IAC9C,MAAM,SAAS;QACX;YACI,OAAO;YACP,aAAa;YACb,OAAO,gVAAW;YAClB,OAAO;QACX;QACA;YACI,OAAO;YACP,aAAa;YACb,OAAO,0UAAQ;YACf,OAAO;QACX;QACA;YACI,OAAO;YACP,aAAa;YACb,OAAO,gVAAW;YAClB,OAAO;QACX;QACA;YACI,OAAO;YACP,aAAa;YACb,OAAO,gVAAW;YAClB,OAAO;QACX;QACA;YACI,OAAO;YACP,aAAa;YACb,OAAO,kVAAY;YACnB,OAAO;QACX;KACH;IAED,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,gOAAS;4BAAC,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAEnC,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;;;;;;;0BAGtD,6LAAC;gBAAI,WAAU;0BACV,OAAO,GAAG,CAAC,CAAC,OAAO,sBAChB,6LAAC;wBAAoB,WAAU;kCAC3B,cAAA,6LAAC;4BAAI,WAAW,CAAC,8DAA8D,EAAE,MAAM,KAAK,EAAE;;8CAC1F,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,2IAAK;wCACF,KAAK,MAAM,KAAK;wCAChB,KAAK,MAAM,KAAK;wCAChB,WAAU;wCACV,IAAI;;;;;;;;;;;8CAGZ,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAG,WAAU;sDAA0B,MAAM,KAAK;;;;;;sDACnD,6LAAC;4CAAE,WAAU;sDACR,MAAM,WAAW;;;;;;;;;;;;;;;;;;uBAbpB;;;;;;;;;;;;;;;;AAwBlC;KAzEa"}},
    {"offset": {"line": 3515, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/App.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth, db } from './lib/firebase';\nimport { DashboardView } from './views/DashboardView';\nimport { AllListsView } from './views/AllListsView';\nimport { LandingView } from './views/LandingView';\nimport { WaitApprovalView } from './views/WaitApprovalView';\nimport { HelpView } from './views/HelpView';\nimport { Loader2, LogOut } from 'lucide-react';\nimport { doc, setDoc, getDoc, onSnapshot } from 'firebase/firestore';\nimport { UserProfile } from './types';\n\nfunction App() {\n  const [user, loading, error] = useAuthState(auth);\n  const [appUser, setAppUser] = useState<UserProfile | null>(null);\n  const [isAppUserLoading, setIsAppUserLoading] = useState(false);\n  const [currentView, setCurrentView] = useState<'dashboard' | 'all-lists' | 'help'>('all-lists');\n  const [timedOut, setTimedOut] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Fetch or Create Firestore User\n  useEffect(() => {\n    let unsubscribe = () => { };\n\n    const syncUser = async () => {\n      if (!user) {\n        setAppUser(null);\n        return;\n      }\n\n      setIsAppUserLoading(true);\n      try {\n        const userRef = doc(db, 'users', user.uid);\n        // Use onSnapshot to listen for changes (like approval) in real-time\n        unsubscribe = onSnapshot(userRef, async (snapshot) => {\n          if (snapshot.exists()) {\n            setAppUser({ uid: user.uid, ...snapshot.data() } as UserProfile);\n          } else {\n            // New user registration\n            const newUser: UserProfile = {\n              uid: user.uid,\n              email: user.email,\n              displayName: user.displayName,\n              role: 'user',\n              isApproved: false,\n              preferences: {\n                autoAddBackToShoppingList: true\n              }\n            };\n            await setDoc(userRef, newUser);\n            // Snapshot listener will pick this up immediately\n          }\n          setIsAppUserLoading(false);\n        });\n      } catch (err) {\n        console.error(\"Error fetching user doc:\", err);\n        setIsAppUserLoading(false);\n      }\n    };\n\n    syncUser();\n    return () => unsubscribe();\n  }, [user]);\n\n  // Prevent hydration mismatch\n  if (!isMounted) return null;\n\n  if ((loading || (user && isAppUserLoading)) && !timedOut) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface\">\n        <div className=\"text-center\">\n          <Loader2 className=\"text-primary animate-spin mx-auto mb-4\" size={48} />\n          <p className=\"text-slate-500 animate-pulse\">Connecting...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || (timedOut && !user && !loading)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface p-6 text-center\">\n        <div className=\"max-w-xs\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <LogOut className=\"text-red-600\" size={32} />\n          </div>\n          <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Connection Issue</h2>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"w-full bg-slate-900 text-white py-3 rounded-xl font-bold\"\n          >\n            Retry Connection\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <LandingView onLoginSuccess={() => setCurrentView('all-lists')} />;\n  }\n\n  // Check approval status\n  if (appUser && !appUser.isApproved) {\n    return <WaitApprovalView onLogout={() => auth.signOut()} email={user.email} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-surface font-sans text-on-surface selection:bg-primary selection:text-white\">\n      {currentView === 'dashboard' && (\n        <DashboardView\n          userName={user.displayName}\n          onNavigateToLists={() => setCurrentView('all-lists')}\n        />\n      )}\n      {currentView === 'all-lists' && (\n        <AllListsView\n          userId={user.uid}\n          userName={user.displayName}\n          userEmail={user.email}\n          isAdmin={appUser?.role === 'admin'}\n          onLogout={() => auth.signOut()}\n          onBack={() => setCurrentView('dashboard')}\n          onNavigateToHelp={() => setCurrentView('help')}\n        />\n      )}\n      {currentView === 'help' && (\n        <HelpView onBack={() => setCurrentView('all-lists')} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"names":[],"mappings":"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"}}]
}