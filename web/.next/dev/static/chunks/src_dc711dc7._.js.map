{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/LandingView.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { motion, useScroll, useTransform, AnimatePresence } from 'framer-motion';\nimport {\n    Sparkles,\n    ArrowRight,\n    Check,\n    MessageCircle,\n    ShoppingCart,\n    Users,\n    Leaf,\n    Menu,\n    X,\n    ChevronRight,\n    Star\n} from 'lucide-react';\nimport { auth, db } from '../lib/firebase';\nimport { signInWithPopup, GoogleAuthProvider, isSignInWithEmailLink, signInWithEmailLink } from 'firebase/auth';\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\n\ninterface LandingViewProps {\n    onLoginSuccess: () => void;\n    isLoggedIn?: boolean;\n    onGoToDashboard?: () => void;\n}\n\nexport const LandingView = ({ onLoginSuccess, isLoggedIn = false, onGoToDashboard }: LandingViewProps) => {\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n    const { scrollYProgress } = useScroll();\n    const opacity = useTransform(scrollYProgress, [0, 0.2], [1, 0]);\n    const scale = useTransform(scrollYProgress, [0, 0.2], [1, 0.95]);\n\n    // Auth State\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Initial check for email link sign-in\n    useEffect(() => {\n        if (isSignInWithEmailLink(auth, window.location.href)) {\n            handleEmailLinkSignIn();\n        }\n    }, []);\n\n    const handleEmailLinkSignIn = async () => {\n        setIsLoading(true);\n        let email = window.localStorage.getItem('emailForSignIn');\n        if (!email) {\n            email = window.prompt('Please provide your email for confirmation');\n        }\n\n        if (email) {\n            try {\n                const result = await signInWithEmailLink(auth, email, window.location.href);\n                window.localStorage.removeItem('emailForSignIn');\n                if (result.user) {\n                    await updateUserDoc(result.user);\n                }\n                onLoginSuccess();\n            } catch (err: any) {\n                console.error(\"Email link sign-in failed:\", err);\n                setError(err.message);\n            } finally {\n                setIsLoading(false);\n            }\n        } else {\n            setIsLoading(false);\n            setError(\"Email is required to complete sign-in.\");\n        }\n    };\n\n    const handleLogin = async () => {\n        if (isLoggedIn && onGoToDashboard) {\n            onGoToDashboard();\n            return;\n        }\n\n        setIsLoading(true);\n        setError(null);\n        try {\n            const provider = new GoogleAuthProvider();\n            const result = await signInWithPopup(auth, provider);\n            if (result.user) {\n                await updateUserDoc(result.user);\n            }\n            onLoginSuccess();\n        } catch (err: any) {\n            console.error(\"Login failed:\", err);\n            setError(err.message || \"Failed to sign in.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const updateUserDoc = async (user: any) => {\n        await setDoc(doc(db, 'users', user.uid), {\n            uid: user.uid,\n            email: user.email,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n            lastLogin: serverTimestamp()\n        }, { merge: true });\n    };\n\n    return (\n        <div className=\"min-h-screen bg-slate-950 font-sans text-slate-100 selection:bg-indigo-500/30\">\n            {/* Background Gradients */}\n            <div className=\"fixed inset-0 z-0 overflow-hidden pointer-events-none\">\n                <div className=\"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-[120px] mix-blend-screen animate-pulse\" />\n                <div className=\"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-violet-600/10 rounded-full blur-[120px] mix-blend-screen\" />\n                <div className=\"absolute top-[20%] right-[10%] w-[300px] h-[300px] bg-emerald-500/10 rounded-full blur-[100px] mix-blend-screen\" />\n            </div>\n\n            {/* Navigation */}\n            <nav className=\"fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/5\">\n                <div className=\"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 rounded-lg bg-gradient-to-tr from-indigo-500 to-violet-500 flex items-center justify-center shadow-lg shadow-indigo-500/20\">\n                            <Sparkles className=\"text-white w-4 h-4\" />\n                        </div>\n                        <span className=\"font-bold text-xl tracking-tight text-white\">Sam</span>\n                    </div>\n\n                    <div className=\"hidden md:flex items-center gap-8\">\n                        <NavLink href=\"#features\">Features</NavLink>\n                        <NavLink href=\"#how-it-works\">How it works</NavLink>\n                        <NavLink href=\"#pricing\">Pricing</NavLink>\n                    </div>\n\n                    <div className=\"flex items-center gap-4\">\n                        <button\n                            onClick={handleLogin}\n                            className=\"hidden md:flex px-5 py-2 rounded-full bg-white text-slate-950 font-semibold text-sm hover:bg-indigo-50 transition-colors\"\n                        >\n                            {isLoggedIn ? 'Dashboard' : 'Sign In'}\n                        </button>\n                        <button\n                            className=\"md:hidden p-2 text-slate-400 hover:text-white\"\n                            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n                        >\n                            {isMobileMenuOpen ? <X /> : <Menu />}\n                        </button>\n                    </div>\n                </div>\n            </nav>\n\n            {/* Mobile Menu */}\n            <AnimatePresence>\n                {isMobileMenuOpen && (\n                    <motion.div\n                        initial={{ opacity: 0, y: -20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: -20 }}\n                        className=\"fixed inset-0 z-40 bg-slate-950 pt-24 px-6 md:hidden\"\n                    >\n                        <div className=\"flex flex-col gap-6 text-2xl font-light\">\n                            <a href=\"#features\" onClick={() => setIsMobileMenuOpen(false)}>Features</a>\n                            <a href=\"#how-it-works\" onClick={() => setIsMobileMenuOpen(false)}>How it works</a>\n                            <a href=\"#pricing\" onClick={() => setIsMobileMenuOpen(false)}>Pricing</a>\n                            <button\n                                onClick={() => { handleLogin(); setIsMobileMenuOpen(false); }}\n                                className=\"mt-8 w-full py-4 bg-indigo-600 rounded-xl font-bold text-lg text-center\"\n                            >\n                                {isLoggedIn ? 'Go to Dashboard' : 'Sign In'}\n                            </button>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {/* Hero Section */}\n            <section className=\"relative pt-32 pb-20 lg:pt-48 lg:pb-32 px-6 z-10\">\n                <div className=\"max-w-7xl mx-auto text-center\">\n                    <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.8 }}\n                        className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-indigo-400 text-xs font-medium mb-8\"\n                    >\n                        <span className=\"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse\" />\n                        Now in Public Beta\n                    </motion.div>\n\n                    <motion.h1\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.8, delay: 0.1 }}\n                        className=\"text-5xl lg:text-8xl font-bold tracking-tight mb-8 leading-[1.1]\"\n                    >\n                        <span className=\"text-white\">Run your home</span>\n                        <br />\n                        <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-violet-400 to-emerald-400\">\n                            on autopilot.\n                        </span>\n                    </motion.h1>\n\n                    <motion.p\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.8, delay: 0.2 }}\n                        className=\"text-lg lg:text-xl text-slate-400 mb-10 max-w-2xl mx-auto leading-relaxed\"\n                    >\n                        Sam is the AI household manager that remembers the milk, organizes your pantry, and syncs your family schedule. All through a simple chat.\n                    </motion.p>\n\n                    <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ duration: 0.8, delay: 0.3 }}\n                        className=\"flex flex-col sm:flex-row items-center justify-center gap-4\"\n                    >\n                        <button\n                            onClick={handleLogin}\n                            disabled={isLoading}\n                            className=\"h-14 px-8 rounded-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-lg transition-all hover:scale-105 active:scale-95 flex items-center gap-2 shadow-lg shadow-indigo-500/25 w-full sm:w-auto justify-center\"\n                        >\n                            {isLoading ? 'Connecting...' : (isLoggedIn ? 'Go to Dashboard' : 'Start for Free')}\n                            <ArrowRight size={20} />\n                        </button>\n                        <a\n                            href=\"#demo\"\n                            className=\"h-14 px-8 rounded-full bg-white/5 border border-white/10 hover:bg-white/10 text-white font-semibold text-lg transition-all flex items-center gap-2 w-full sm:w-auto justify-center\"\n                        >\n                            See how it works\n                        </a>\n                    </motion.div>\n\n                    {error && (\n                        <motion.div\n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            className=\"mt-8 p-4 bg-red-500/10 border border-red-500/20 text-red-200 rounded-xl inline-block\"\n                        >\n                            {error}\n                        </motion.div>\n                    )}\n                </div>\n\n                {/* Hero Visual */}\n                <motion.div\n                    style={{ opacity, scale }}\n                    className=\"mt-24 max-w-6xl mx-auto relative\"\n                >\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent z-20\" />\n                    <div className=\"relative rounded-2xl border border-white/10 bg-slate-900/50 backdrop-blur-sm overflow-hidden shadow-2xl shadow-indigo-900/20 aspect-[16/10] md:aspect-[21/9] flex flex-col md:flex-row\">\n                        {/* Fake Clean UI */}\n                        <div className=\"w-full md:w-80 border-r border-white/5 bg-slate-900/80 p-4 flex flex-col gap-4\">\n                            <div className=\"flex items-center gap-3 p-3 rounded-xl bg-indigo-500/10 border border-indigo-500/20\">\n                                <div className=\"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center\">\n                                    <MessageCircle size={16} />\n                                </div>\n                                <div>\n                                    <div className=\"text-sm font-medium text-white\">Chat with Sam</div>\n                                    <div className=\"text-xs text-indigo-300\">Active now</div>\n                                </div>\n                            </div>\n                            <div className=\"space-y-2\">\n                                <div className=\"p-3 rounded-xl bg-white/5 text-sm text-slate-300\">\n                                    \"I noticed you're out of olive oil. Want me to add it?\"\n                                </div>\n                                <div className=\"p-3 rounded-xl bg-indigo-600 text-sm text-white ml-auto max-w-[90%]\">\n                                    \"Yes, and remind me to water the plants on Tuesday.\"\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"flex-1 bg-slate-950/50 p-6 md:p-8\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div className=\"space-y-4\">\n                                    <h3 className=\"text-sm font-semibold text-slate-500 uppercase tracking-wider\">Shopping List</h3>\n                                    <div className=\"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/5\">\n                                        <div className=\"w-5 h-5 rounded border-2 border-slate-600\" />\n                                        <span className=\"text-slate-200\">Extra Virgin Olive Oil</span>\n                                        <span className=\"ml-auto px-2 py-1 rounded-md bg-emerald-500/10 text-emerald-400 text-xs font-medium\">Added via Chat</span>\n                                    </div>\n                                    <div className=\"flex items-center gap-4 p-4 rounded-xl bg-white/5 border border-white/5\">\n                                        <div className=\"w-5 h-5 rounded border-2 border-slate-600\" />\n                                        <span className=\"text-slate-200\">Dish Soap</span>\n                                    </div>\n                                </div>\n                                <div className=\"space-y-4\">\n                                    <h3 className=\"text-sm font-semibold text-slate-500 uppercase tracking-wider\">Upcoming</h3>\n                                    <div className=\"flex items-start gap-4 p-4 rounded-xl bg-white/5 border border-white/5\">\n                                        <div className=\"flex flex-col items-center justify-center w-12 h-12 rounded-lg bg-white/10\">\n                                            <span className=\"text-xs text-slate-400 uppercase\">Feb</span>\n                                            <span className=\"text-lg font-bold text-white\">18</span>\n                                        </div>\n                                        <div>\n                                            <div className=\"font-medium text-white\">Water Plants</div>\n                                            <div className=\"text-sm text-slate-400\">9:00 AM • Recurring</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </motion.div>\n            </section>\n\n            {/* Features Grid */}\n            <section id=\"features\" className=\"py-24 px-6 relative\">\n                <div className=\"max-w-7xl mx-auto\">\n                    <div className=\"grid md:grid-cols-3 gap-8\">\n                        <FeatureCard\n                            icon={<MessageCircle className=\"text-indigo-400\" />}\n                            title=\"Chat-First Design\"\n                            description=\"Talk to Sam like a person. Text via WhatsApp or the web app to add items, check your pantry, or set reminders.\"\n                        />\n                        <FeatureCard\n                            icon={<ShoppingCart className=\"text-emerald-400\" />}\n                            title=\"Smart Pantry\"\n                            description=\"Stop double-buying. Sam tracks what you have and suggests recipes based on your inventory.\"\n                        />\n                        <FeatureCard\n                            icon={<Users className=\"text-violet-400\" />}\n                            title=\"Family Sync\"\n                            description=\"Real-time sync for the whole house. When you add milk, your partner sees it instantly.\"\n                        />\n                    </div>\n                </div>\n            </section>\n\n            {/* Value Prop Section */}\n            <section className=\"py-32 px-6 bg-slate-900/50\">\n                <div className=\"max-w-7xl mx-auto flex flex-col md:flex-row items-center gap-16\">\n                    <div className=\"flex-1\">\n                        <h2 className=\"text-3xl md:text-5xl font-bold mb-6\">The mental load is real. <br /><span className=\"text-indigo-400\">Sam carries it for you.</span></h2>\n                        <p className=\"text-lg text-slate-400 mb-8 leading-relaxed\">\n                            Managing a household is a full-time job. Between grocery runs, meal planning, and coordinating schedules, it's easy to feel overwhelmed.\n                            Sam acts as your central brain, ensuring nothing falls through the cracks.\n                        </p>\n                        <ul className=\"space-y-4 mb-8\">\n                            {[\n                                \"No more 'Did you buy eggs?' texts\",\n                                \"Reduce food waste with pantry tracking\",\n                                \"Automated recurring chores\"\n                            ].map((item, i) => (\n                                <li key={i} className=\"flex items-center gap-3 text-slate-300\">\n                                    <div className=\"w-6 h-6 rounded-full bg-indigo-500/20 flex items-center justify-center\">\n                                        <Check size={14} className=\"text-indigo-400\" />\n                                    </div>\n                                    {item}\n                                </li>\n                            ))}\n                        </ul>\n                    </div>\n                    <div className=\"flex-1 w-full relative\">\n                        <div className=\"absolute inset-0 bg-indigo-500/20 blur-[100px] rounded-full\" />\n                        <div className=\"relative bg-slate-950 border border-white/10 rounded-2xl p-8 shadow-2xl\">\n                            <div className=\"flex flex-col gap-4\">\n                                <ChatBubble text=\"Hey Sam, we're out of paper towels.\" isUser />\n                                <ChatBubble text=\"Added Paper Towels to your Shopping List. Anything else?\" />\n                                <ChatBubble text=\"Yeah, remind me to check the mail when I get home.\" isUser />\n                                <ChatBubble text=\"Got it. I'll remind you to 'Check Mail' at 6:00 PM.\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n\n            {/* Social Proof */}\n            <section className=\"py-24 px-6 text-center border-t border-white/5\">\n                <div className=\"max-w-4xl mx-auto\">\n                    <div className=\"flex justify-center gap-1 mb-6\">\n                        {[1, 2, 3, 4, 5].map(i => <Star key={i} className=\"fill-emerald-400 text-emerald-400\" size={20} />)}\n                    </div>\n                    <h2 className=\"text-3xl font-bold mb-8\">\"Finally, a household app that actually works.\"</h2>\n                    <div className=\"flex flex-wrap justify-center gap-8 opacity-50 grayscale hover:grayscale-0 transition-all duration-500\">\n                        {/* Placeholder logos */}\n                        <span className=\"text-xl font-bold\">TechCrunch</span>\n                        <span className=\"text-xl font-bold\">ProductHunt</span>\n                        <span className=\"text-xl font-bold\">TheVerge</span>\n                    </div>\n                </div>\n            </section>\n\n            {/* CTA */}\n            <section className=\"py-32 px-6 relative overflow-hidden\">\n                <div className=\"absolute inset-0 bg-indigo-900/20\" />\n                <div className=\"max-w-3xl mx-auto text-center relative z-10\">\n                    <h2 className=\"text-4xl md:text-5xl font-bold mb-6\">Ready to upgrade your home?</h2>\n                    <p className=\"text-xl text-slate-300 mb-10\">Join thousands of organized households today.</p>\n                    <button\n                        onClick={handleLogin}\n                        className=\"h-16 px-10 rounded-full bg-white text-slate-950 font-bold text-xl hover:bg-indigo-50 transition-all shadow-xl shadow-white/10\"\n                    >\n                        Get Started for Free\n                    </button>\n                    <p className=\"mt-6 text-sm text-slate-500\">No credit card required.</p>\n                </div>\n            </section>\n\n            {/* Footer */}\n            <footer className=\"py-12 px-6 border-t border-white/5 bg-slate-950\">\n                <div className=\"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center\">\n                            <Sparkles className=\"text-white w-4 h-4\" />\n                        </div>\n                        <span className=\"font-bold text-xl text-white\">Sam</span>\n                    </div>\n                    <div className=\"flex gap-8 text-sm text-slate-400\">\n                        <a href=\"#\" className=\"hover:text-white transition-colors\">Privacy</a>\n                        <a href=\"#\" className=\"hover:text-white transition-colors\">Terms</a>\n                        <a href=\"#\" className=\"hover:text-white transition-colors\">Contact</a>\n                    </div>\n                    <div className=\"text-slate-500 text-sm\">\n                        © 2026 Bilbo Inc.\n                    </div>\n                </div>\n            </footer>\n        </div>\n    );\n};\n\n// Components\nconst NavLink = ({ href, children }: { href: string, children: React.ReactNode }) => (\n    <a href={href} className=\"text-sm font-medium text-slate-300 hover:text-white transition-colors\">\n        {children}\n    </a>\n);\n\nconst FeatureCard = ({ icon, title, description }: { icon: React.ReactNode, title: string, description: string }) => (\n    <div className=\"p-8 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/10 transition-all duration-300 group\">\n        <div className=\"w-12 h-12 bg-slate-900 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/10\">\n            {icon}\n        </div>\n        <h3 className=\"text-xl font-bold text-white mb-3\">{title}</h3>\n        <p className=\"text-slate-400 leading-relaxed\">{description}</p>\n    </div>\n);\n\nconst ChatBubble = ({ text, isUser = false }: { text: string, isUser?: boolean }) => (\n    <div className={`p-4 rounded-2xl max-w-[80%] ${isUser ? 'bg-indigo-600 text-white ml-auto rounded-tr-sm' : 'bg-white/10 text-slate-200 mr-auto rounded-tl-sm'}`}>\n        {text}\n    </div>\n);\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1319, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/WaitApprovalView.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Clock, LogOut } from 'lucide-react';\n\ninterface WaitApprovalViewProps {\n    onLogout: () => void;\n    email?: string | null;\n}\n\nexport function WaitApprovalView({ onLogout, email }: WaitApprovalViewProps) {\n    return (\n        <div className=\"min-h-screen flex items-center justify-center bg-surface p-6\">\n            <div className=\"max-w-md w-full text-center\">\n                <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse\">\n                    <Clock className=\"text-primary\" size={40} />\n                </div>\n\n                <h1 className=\"text-3xl font-bold text-on-surface mb-4\">Account Pending</h1>\n\n                <p className=\"text-slate-500 text-lg mb-8 leading-relaxed\">\n                    Thanks for signing up{email ? `, ${email}` : ''}!\n                    <br />\n                    Your account is currently waiting for administrator approval.\n                    You will be granted access once an admin reviews your request.\n                </p>\n\n                <div className=\"bg-surface-variant/50 border border-border p-4 rounded-xl mb-8 text-sm text-slate-500\">\n                    Please contact the administrator if you believe this is an error or if you need immediate access.\n                </div>\n\n                <button\n                    onClick={onLogout}\n                    className=\"w-full bg-slate-900 hover:bg-slate-800 text-white py-3.5 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg shadow-slate-900/20\"\n                >\n                    <LogOut size={20} />\n                    Sign Out\n                </button>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;;;AAOO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,KAAK,EAAyB;IACvE,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC,gNAAK;wBAAC,WAAU;wBAAe,MAAM;;;;;;;;;;;8BAG1C,6LAAC;oBAAG,WAAU;8BAA0C;;;;;;8BAExD,6LAAC;oBAAE,WAAU;;wBAA8C;wBACjC,QAAQ,CAAC,EAAE,EAAE,OAAO,GAAG;wBAAG;sCAChD,6LAAC;;;;;wBAAK;;;;;;;8BAKV,6LAAC;oBAAI,WAAU;8BAAwF;;;;;;8BAIvG,6LAAC;oBACG,SAAS;oBACT,WAAU;;sCAEV,6LAAC,uNAAM;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAMxC;KA/BgB"}},
    {"offset": {"line": 1423, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/lib/logic.ts"],"sourcesContent":["import { db } from './firebase';\nimport {\n    collection,\n    addDoc,\n    updateDoc,\n    doc,\n    deleteDoc,\n    increment,\n    query,\n    where,\n    getDocs\n} from 'firebase/firestore';\nimport type { ListItem, PantryItem } from '../types';\n\nexport const moveItemToPantry = async (userId: string, item: ListItem, listName: string) => {\n    try {\n        // 1. Mark as bought in the list\n        const itemRef = doc(db, 'items', item.id);\n        await updateDoc(itemRef, { isBought: true });\n\n        // 2. Add to pantry (deduplicating)\n        const pantryRef = collection(db, 'pantry');\n        const q = query(\n            pantryRef,\n            where('userId', '==', userId),\n            where('sourceListId', '==', item.listId),\n            where('name', '==', item.name)\n        );\n        const snapshot = await getDocs(q);\n\n        if (!snapshot.empty) {\n            // Update existing\n            const existingItem = snapshot.docs[0];\n            await updateDoc(existingItem.ref, {\n                quantity: increment(item.quantity || 1),\n                lastUpdated: Date.now()\n            });\n        } else {\n            // Create new\n            await addDoc(pantryRef, {\n                name: item.name,\n                quantity: item.quantity || 1,\n                unit: item.unit || '',\n                sourceListId: item.listId,\n                sourceListName: listName,\n                lastUpdated: Date.now(),\n                userId: userId\n            });\n        }\n    } catch (error) {\n        console.error(\"Error moving item to pantry:\", error);\n        throw error;\n    }\n};\n\nexport const depleteItemFromPantry = async (userId: string, item: PantryItem, addBackToList: boolean = false) => {\n    try {\n        // 1. Remove from pantry (or decrement)\n        const itemRef = doc(db, 'pantry', item.id);\n        if (item.quantity > 1) {\n            await updateDoc(itemRef, { quantity: increment(-1), lastUpdated: Date.now() });\n        } else {\n            await deleteDoc(itemRef);\n        }\n\n        // 2. Add back to shopping list if requested\n        if (addBackToList) {\n            const listId = item.sourceListId || 'default';\n            const itemsRef = collection(db, 'items');\n\n            // Check if item already exists in the list (unbought)\n            const q = query(\n                itemsRef,\n                where('listId', '==', listId),\n                where('name', '==', item.name),\n                where('isBought', '==', false)\n            );\n            const snapshot = await getDocs(q);\n\n            if (!snapshot.empty) {\n                // Increment existing\n                await updateDoc(snapshot.docs[0].ref, {\n                    quantity: increment(1)\n                });\n            } else {\n                // Create new\n                await addDoc(itemsRef, {\n                    name: item.name,\n                    listId: listId,\n                    isBought: false,\n                    quantity: 1,\n                    addedAt: Date.now(),\n                    userId: userId\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Error depleting item from pantry:\", error);\n        throw error;\n    }\n};\n\nexport const undoMoveToPantry = async (userId: string, item: ListItem) => {\n    try {\n        // 1. Mark as NOT bought in the list\n        const itemRef = doc(db, 'items', item.id);\n        await updateDoc(itemRef, { isBought: false });\n\n        // 2. Remove from pantry (decrement/delete)\n        const pantryRef = collection(db, 'pantry');\n        const q = query(\n            pantryRef,\n            where('userId', '==', userId),\n            where('sourceListId', '==', item.listId),\n            where('name', '==', item.name)\n        );\n        const snapshot = await getDocs(q);\n\n        if (!snapshot.empty) {\n            const existingItem = snapshot.docs[0];\n            const currentQty = existingItem.data().quantity || 1;\n\n            if (currentQty > 1) {\n                await updateDoc(existingItem.ref, {\n                    quantity: increment(-(item.quantity || 1)),\n                    lastUpdated: Date.now()\n                });\n            } else {\n                await deleteDoc(existingItem.ref);\n            }\n        }\n    } catch (error) {\n        console.error(\"Error undoing move to pantry:\", error);\n        throw error;\n    }\n};\n\nexport const incrementPantryItem = async (item: PantryItem) => {\n    try {\n        const itemRef = doc(db, 'pantry', item.id);\n        await updateDoc(itemRef, {\n            quantity: increment(1),\n            lastUpdated: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Error incrementing pantry item:\", error);\n        throw error;\n    }\n};\n\n// --- CRUD Operations ---\n\nexport const updateShoppingItemQuantity = async (itemId: string, delta: number) => {\n    try {\n        const itemRef = doc(db, 'items', itemId);\n        await updateDoc(itemRef, {\n            quantity: increment(delta),\n            lastUpdated: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Error updating shopping item quantity:\", error);\n        throw error;\n    }\n};\n\nexport const deleteShoppingItem = async (itemId: string) => {\n    try {\n        await deleteDoc(doc(db, 'items', itemId));\n    } catch (error) {\n        console.error(\"Error deleting shopping item:\", error);\n        throw error;\n    }\n};\n\nexport const deletePantryItem = async (itemId: string) => {\n    try {\n        await deleteDoc(doc(db, 'pantry', itemId));\n    } catch (error) {\n        console.error(\"Error deleting pantry item:\", error);\n        throw error;\n    }\n};\n\nexport const updateShoppingItem = async (itemId: string, data: Partial<ListItem>) => {\n    try {\n        await updateDoc(doc(db, 'items', itemId), {\n            ...data,\n            lastUpdated: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Error updating shopping item:\", error);\n        throw error;\n    }\n};\n\nexport const updatePantryItem = async (itemId: string, data: Partial<PantryItem>) => {\n    try {\n        await updateDoc(doc(db, 'pantry', itemId), {\n            ...data,\n            lastUpdated: Date.now()\n        });\n    } catch (error) {\n        console.error(\"Error updating pantry item:\", error);\n        throw error;\n    }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1621, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/sam/BottomNav.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { ShoppingBasket, Calendar, MessageSquare, Settings, PieChart } from 'lucide-react';\n\ninterface BottomNavProps {\n    activeTab: 'shopping' | 'events' | 'summary' | 'chat' | 'setup';\n    onNavigate: (tab: 'shopping' | 'events' | 'summary' | 'chat' | 'setup') => void;\n}\n\nexport const BottomNav = ({ activeTab, onNavigate }: BottomNavProps) => {\n    const NavItem = ({ id, icon: Icon, label }: { id: typeof activeTab, icon: any, label: string }) => (\n        <button\n            onClick={() => onNavigate(id)}\n            className={`flex flex-col items-center gap-1 text-[10px] font-medium transition-colors\n                ${activeTab === id ? 'text-[var(--accent-olive)]' : 'text-[var(--text-tertiary)]'}\n            `}\n        >\n            <Icon size={20} className={activeTab === id ? 'stroke-2' : 'stroke-[1.5px]'} />\n            {label}\n        </button>\n    );\n\n    return (\n        <nav className=\"absolute bottom-0 left-0 right-0 bg-white h-[72px] flex justify-around items-center border-t border-[rgba(0,0,0,0.05)] pb-3 z-30\">\n            <NavItem id=\"shopping\" icon={ShoppingBasket} label=\"Shopping\" />\n            <NavItem id=\"events\" icon={Calendar} label=\"Events\" />\n            <NavItem id=\"summary\" icon={PieChart} label=\"Summary\" />\n            <NavItem id=\"chat\" icon={MessageSquare} label=\"Chat\" />\n            <NavItem id=\"setup\" icon={Settings} label=\"Setup\" />\n        </nav>\n    );\n};\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;;;AAOO,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,UAAU,EAAkB;IAC/D,MAAM,UAAU,CAAC,EAAE,EAAE,EAAE,MAAM,IAAI,EAAE,KAAK,EAAsD,iBAC1F,6LAAC;YACG,SAAS,IAAM,WAAW;YAC1B,WAAW,CAAC;gBACR,EAAE,cAAc,KAAK,+BAA+B,8BAA8B;YACtF,CAAC;;8BAED,6LAAC;oBAAK,MAAM;oBAAI,WAAW,cAAc,KAAK,aAAa;;;;;;gBAC1D;;;;;;;IAIT,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAQ,IAAG;gBAAW,MAAM,+OAAc;gBAAE,OAAM;;;;;;0BACnD,6LAAC;gBAAQ,IAAG;gBAAS,MAAM,yNAAQ;gBAAE,OAAM;;;;;;0BAC3C,6LAAC;gBAAQ,IAAG;gBAAU,MAAM,6NAAQ;gBAAE,OAAM;;;;;;0BAC5C,6LAAC;gBAAQ,IAAG;gBAAO,MAAM,4OAAa;gBAAE,OAAM;;;;;;0BAC9C,6LAAC;gBAAQ,IAAG;gBAAQ,MAAM,yNAAQ;gBAAE,OAAM;;;;;;;;;;;;AAGtD;KAtBa"}},
    {"offset": {"line": 1720, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/AdminApprovalView.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { X, Check, Search, Shield, User } from 'lucide-react';\nimport { collection, query, where, getDocs, updateDoc, doc } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { UserProfile } from '../types';\n\ninterface AdminApprovalViewProps {\n    onClose: () => void;\n}\n\nexport function AdminApprovalView({ onClose }: AdminApprovalViewProps) {\n    const [pendingUsers, setPendingUsers] = useState<UserProfile[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchPendingUsers();\n    }, []);\n\n    const fetchPendingUsers = async () => {\n        try {\n            setLoading(true);\n            // Fetch users where isApproved is false or missing\n            const q = query(collection(db, 'users'), where('isApproved', '==', false));\n            const querySnapshot = await getDocs(q);\n\n            const users: UserProfile[] = [];\n            querySnapshot.forEach((doc) => {\n                users.push({ uid: doc.id, ...doc.data() } as UserProfile);\n            });\n\n            setPendingUsers(users);\n        } catch (error) {\n            console.error(\"Error fetching pending users:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleApprove = async (userId: string) => {\n        try {\n            await updateDoc(doc(db, 'users', userId), {\n                isApproved: true\n            });\n            // Remove from local state\n            setPendingUsers(prev => prev.filter(u => u.uid !== userId));\n        } catch (error) {\n            console.error(\"Error approving user:\", error);\n            alert(\"Failed to approve user\");\n        }\n    };\n\n    const handleDecline = async (userId: string) => {\n        // Requirements say: \"decline should just not enable access\" - effectively doing nothing for now, \n        // potentially we could delete the user or mark as declined, but for now we'll just leave them in the list or maybe mark explicitly declined?\n        // Request says: \"check should enable access and cross should decline their access ... for now, decline should just not enable access\"\n        // So functionally, doing nothing on the backend is \"not enabling\".\n        // But to give feedback to the admin, maybe we should just remove them from the list? \n        // Or perhaps toggling 'isApproved: false' explicitly if it was undefined?\n        // Let's just alert for now since the requirement is vague on state change for decline.\n        // Actually, \"decline should just not enable access\" implies no change needed, but maybe we want to hide them from this list?\n        // I'll leave them there for now pending clarification, or just log it.\n        console.log(\"Decline logic clicked for\", userId);\n        // User requested: \"check should enable access and cross should decline their access\"\n        // \"we will implement decline flow later but for now, decline should just not enable access\"\n        // This implies that clicking X might just do nothing, or maybe close the row? \n        // I'll make it do nothing but maybe show a toast or something.\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200\">\n            <div className=\"bg-surface rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200\">\n                <div className=\"p-6 border-b border-border flex items-center justify-between bg-surface-variant/30\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 bg-primary/10 rounded-lg\">\n                            <Shield className=\"text-primary\" size={24} />\n                        </div>\n                        <div>\n                            <h2 className=\"text-xl font-bold text-on-surface\">Approve Users</h2>\n                            <p className=\"text-sm text-slate-500\">Manage pending access requests</p>\n                        </div>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 hover:bg-black/5 rounded-full transition-colors text-slate-500\"\n                    >\n                        <X size={24} />\n                    </button>\n                </div>\n\n                <div className=\"p-0 max-h-[60vh] overflow-y-auto\">\n                    {loading ? (\n                        <div className=\"p-12 text-center text-slate-500\">Loading requests...</div>\n                    ) : pendingUsers.length === 0 ? (\n                        <div className=\"p-12 text-center\">\n                            <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                                <User className=\"text-slate-300\" size={32} />\n                            </div>\n                            <p className=\"text-slate-500 font-medium\">No pending user requests</p>\n                            <p className=\"text-sm text-slate-400 mt-1\">New signups will appear here</p>\n                        </div>\n                    ) : (\n                        <div className=\"divide-y divide-border\">\n                            {pendingUsers.map((user) => (\n                                <div key={user.uid} className=\"flex items-center justify-between p-4 hover:bg-black/[0.02] transition-colors\">\n                                    <div className=\"flex items-center gap-4\">\n                                        <div className=\"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-lg\">\n                                            {user.displayName ? user.displayName[0].toUpperCase() : (user.email ? user.email[0].toUpperCase() : '?')}\n                                        </div>\n                                        <div>\n                                            <h3 className=\"font-semibold text-slate-800\">{user.displayName || 'Unnamed User'}</h3>\n                                            <p className=\"text-sm text-slate-500\">{user.email}</p>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex items-center gap-2\">\n                                        <button\n                                            onClick={() => handleDecline(user.uid)}\n                                            className=\"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                                            title=\"Decline Access\"\n                                        >\n                                            <X size={20} />\n                                        </button>\n                                        <button\n                                            onClick={() => handleApprove(user.uid)}\n                                            className=\"p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors border border-transparent hover:border-primary/20\"\n                                            title=\"Approve Access\"\n                                        >\n                                            <Check size={20} className=\"stroke-[3]\" />\n                                        </button>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"p-4 bg-surface-variant/30 border-t border-border text-center text-xs text-slate-400\">\n                    Showing {pendingUsers.length} pending request{pendingUsers.length !== 1 ? 's' : ''}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2061, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/CollaboratorsView.tsx"],"sourcesContent":["import { X, Trash2, Users, UserPlus, Check } from 'lucide-react';\nimport { collection, query, where, deleteDoc, doc, setDoc } from 'firebase/firestore';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { db } from '../lib/firebase';\nimport { useState } from 'react';\n\ninterface CollaboratorsViewProps {\n    userId: string;\n    onClose: () => void;\n}\n\nexport const CollaboratorsView = ({ userId, onClose }: CollaboratorsViewProps) => {\n    // Fetch collaborations where I am the inviter\n    const [collaborationsSnapshot, loading, error] = useCollection(\n        query(collection(db, 'collaborations'), where('inviterId', '==', userId))\n    );\n    const [inviteEmail, setInviteEmail] = useState('');\n    const [isInviting, setIsInviting] = useState(false);\n\n    const handleInviteSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!inviteEmail) return;\n\n        try {\n            const collabId = `${userId}_${inviteEmail.trim()}`;\n            await setDoc(doc(db, 'collaborations', collabId), {\n                inviterId: userId,\n                inviteeEmail: inviteEmail.trim(),\n                createdAt: Date.now()\n            });\n\n            setInviteEmail('');\n            setIsInviting(false);\n            // Optional: Show success toast\n        } catch (error: any) {\n            console.error('Error sending invite:', error);\n            alert('Failed to send invite: ' + error.message);\n        }\n    };\n\n    const handleRemoveCollaborator = async (collabId: string) => {\n        if (!confirm('Are you sure you want to remove this collaborator? They will lose access to your lists.')) return;\n        try {\n            await deleteDoc(doc(db, 'collaborations', collabId));\n        } catch (error) {\n            console.error(\"Error removing collaborator:\", error);\n            alert(\"Failed to remove collaborator.\");\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200\">\n            <div className=\"bg-white rounded-2xl material-shadow-3 w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200\">\n                {/* Header */}\n                <div className=\"px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50\">\n                    <h2 className=\"text-xl font-display font-bold text-slate-900 flex items-center gap-2\">\n                        <Users className=\"text-primary\" />\n                        Manage Collaborators\n                    </h2>\n                    <button\n                        onClick={onClose}\n                        className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors\"\n                    >\n                        <X size={20} />\n                    </button>\n                </div>\n\n                {/* Invite Section */}\n                <div className=\"px-6 pt-4 pb-0\">\n                    {!isInviting ? (\n                        <button\n                            onClick={() => setIsInviting(true)}\n                            className=\"w-full py-3 rounded-lg border border-dashed border-slate-300 hover:border-indigo-300 hover:bg-indigo-50/30 flex items-center justify-center gap-2 transition-colors text-slate-500 font-medium\"\n                        >\n                            <UserPlus size={18} />\n                            Invite New Collaborator\n                        </button>\n                    ) : (\n                        <form onSubmit={handleInviteSubmit} className=\"flex gap-2 items-center\">\n                            <div className=\"relative flex-1\">\n                                <UserPlus size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400\" />\n                                <input\n                                    type=\"email\"\n                                    autoFocus\n                                    required\n                                    className=\"w-full pl-9 pr-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500\"\n                                    placeholder=\"Enter email address\"\n                                    value={inviteEmail}\n                                    onChange={(e) => setInviteEmail(e.target.value)}\n                                />\n                            </div>\n                            <button\n                                type=\"submit\"\n                                disabled={!inviteEmail}\n                                className=\"p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                            >\n                                <Check size={20} />\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={() => setIsInviting(false)}\n                                className=\"p-2 text-slate-400 hover:bg-slate-100 rounded-lg transition-colors\"\n                            >\n                                <X size={20} />\n                            </button>\n                        </form>\n                    )}\n                </div>\n\n                {/* Content */}\n                <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\n                    {loading && (\n                        <div className=\"text-center py-8 text-slate-500\">\n                            Loading...\n                        </div>\n                    )}\n\n                    {error && (\n                        <div className=\"p-4 bg-red-50 text-red-600 rounded-xl text-sm font-medium\">\n                            Failed to load collaborators.\n                        </div>\n                    )}\n\n                    {!loading && !error && collaborationsSnapshot?.empty && (\n                        <div className=\"text-center py-8\">\n                            <div className=\"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300\">\n                                <Users size={32} />\n                            </div>\n                            <p className=\"text-slate-500 font-medium\">No active collaborators</p>\n                            <p className=\"text-xs text-slate-400 mt-1\">Invite people from the user menu to get started.</p>\n                        </div>\n                    )}\n\n                    <div className=\"space-y-2\">\n                        {collaborationsSnapshot?.docs.map(doc => {\n                            const data = doc.data();\n                            return (\n                                <div key={doc.id} className=\"flex items-center justify-between p-3 rounded-xl bg-slate-50 border border-slate-100 group hover:border-slate-200 transition-colors\">\n                                    <div className=\"min-w-0\">\n                                        <p className=\"text-sm font-semibold text-slate-700 truncate\">\n                                            {data.inviteeEmail || 'Unknown User'}\n                                        </p>\n                                        <p className=\"text-xs text-slate-400\">\n                                            Added {new Date(data.createdAt).toLocaleDateString()}\n                                        </p>\n                                    </div>\n                                    <button\n                                        onClick={() => handleRemoveCollaborator(doc.id)}\n                                        className=\"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all\"\n                                        title=\"Revoke Access\"\n                                    >\n                                        <Trash2 size={18} />\n                                    </button>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AAOO,MAAM,oBAAoB,CAAC,EAAE,MAAM,EAAE,OAAO,EAA0B;;IACzE,8CAA8C;IAC9C,MAAM,CAAC,wBAAwB,SAAS,MAAM,GAAG,IAAA,mMAAa,EAC1D,IAAA,2KAAK,EAAC,IAAA,gLAAU,EAAC,+HAAE,EAAE,mBAAmB,IAAA,2KAAK,EAAC,aAAa,MAAM;IAErE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,qBAAqB,OAAO;QAC9B,EAAE,cAAc;QAChB,IAAI,CAAC,aAAa;QAElB,IAAI;YACA,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,YAAY,IAAI,IAAI;YAClD,MAAM,IAAA,4KAAM,EAAC,IAAA,yKAAG,EAAC,+HAAE,EAAE,kBAAkB,WAAW;gBAC9C,WAAW;gBACX,cAAc,YAAY,IAAI;gBAC9B,WAAW,KAAK,GAAG;YACvB;YAEA,eAAe;YACf,cAAc;QACd,+BAA+B;QACnC,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM,4BAA4B,MAAM,OAAO;QACnD;IACJ;IAEA,MAAM,2BAA2B,OAAO;QACpC,IAAI,CAAC,QAAQ,4FAA4F;QACzG,IAAI;YACA,MAAM,IAAA,+KAAS,EAAC,IAAA,yKAAG,EAAC,+HAAE,EAAE,kBAAkB;QAC9C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,MAAM;QACV;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAG,WAAU;;8CACV,6LAAC,gNAAK;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;sCAGtC,6LAAC;4BACG,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAKjB,6LAAC;oBAAI,WAAU;8BACV,CAAC,2BACE,6LAAC;wBACG,SAAS,IAAM,cAAc;wBAC7B,WAAU;;0CAEV,6LAAC,6NAAQ;gCAAC,MAAM;;;;;;4BAAM;;;;;;iFAI1B,6LAAC;wBAAK,UAAU;wBAAoB,WAAU;;0CAC1C,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,6NAAQ;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC9B,6LAAC;wCACG,MAAK;wCACL,SAAS;wCACT,QAAQ;wCACR,WAAU;wCACV,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;0CAGtD,6LAAC;gCACG,MAAK;gCACL,UAAU,CAAC;gCACX,WAAU;0CAEV,cAAA,6LAAC,gNAAK;oCAAC,MAAM;;;;;;;;;;;0CAEjB,6LAAC;gCACG,MAAK;gCACL,SAAS,IAAM,cAAc;gCAC7B,WAAU;0CAEV,cAAA,6LAAC,oMAAC;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;8BAOzB,6LAAC;oBAAI,WAAU;;wBACV,yBACG,6LAAC;4BAAI,WAAU;sCAAkC;;;;;;wBAKpD,uBACG,6LAAC;4BAAI,WAAU;sCAA4D;;;;;;wBAK9E,CAAC,WAAW,CAAC,SAAS,wBAAwB,uBAC3C,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,gNAAK;wCAAC,MAAM;;;;;;;;;;;8CAEjB,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAC1C,6LAAC;oCAAE,WAAU;8CAA8B;;;;;;;;;;;;sCAInD,6LAAC;4BAAI,WAAU;sCACV,wBAAwB,KAAK,IAAI,CAAA;gCAC9B,MAAM,OAAO,IAAI,IAAI;gCACrB,qBACI,6LAAC;oCAAiB,WAAU;;sDACxB,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAE,WAAU;8DACR,KAAK,YAAY,IAAI;;;;;;8DAE1B,6LAAC;oDAAE,WAAU;;wDAAyB;wDAC3B,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;sDAG1D,6LAAC;4CACG,SAAS,IAAM,yBAAyB,IAAI,EAAE;4CAC9C,WAAU;4CACV,OAAM;sDAEN,cAAA,6LAAC,uNAAM;gDAAC,MAAM;;;;;;;;;;;;mCAdZ,IAAI,EAAE;;;;;4BAkBxB;;;;;;;;;;;;;;;;;;;;;;;AAMxB;GAtJa;;QAEwC,mMAAa;;;KAFrD"}},
    {"offset": {"line": 2412, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/sam/SamLayout.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { BottomNav } from './BottomNav';\nimport { useAuth } from '../../context/AuthContext';\nimport { LogOut, User as UserIcon, Users, Shield } from 'lucide-react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { AdminApprovalView } from '../../views/AdminApprovalView';\nimport { CollaboratorsView } from '../../views/CollaboratorsView';\n\ninterface SamLayoutProps {\n    children: React.ReactNode;\n    activeTab: 'shopping' | 'events' | 'summary' | 'chat' | 'setup';\n    onNavigate: (tab: 'shopping' | 'events' | 'summary' | 'chat' | 'setup') => void;\n}\n\nexport const SamLayout = ({ children, activeTab, onNavigate }: SamLayoutProps) => {\n    const { user, appUser, logout } = useAuth();\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const [showAdminApproval, setShowAdminApproval] = useState(false);\n    const [showCollaborators, setShowCollaborators] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    // Close menu when clicking outside\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsMenuOpen(false);\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const userInitials = user?.email ? user.email.charAt(0).toUpperCase() : 'S';\n    const isAdmin = appUser?.role === 'admin';\n\n    return (\n        <div className=\"flex flex-col h-[100dvh] bg-[var(--bg-paper)] overflow-hidden font-sans text-[var(--text-primary)]\">\n            {/* Mobile Viewport Constraint */}\n            <div className=\"w-full max-w-[480px] mx-auto h-full flex flex-col relative bg-[var(--bg-paper)] shadow-2xl\">\n\n                {/* Header */}\n                <header className=\"p-4 bg-[var(--bg-paper)] z-20 relative\">\n                    <div className=\"flex justify-between items-center mb-2\">\n                        <div className=\"font-serif text-[20px] font-semibold\">Sam</div>\n\n                        {/* Avatar & Menu */}\n                        <div className=\"relative\" ref={menuRef}>\n                            <button\n                                onClick={() => setIsMenuOpen(!isMenuOpen)}\n                                className=\"w-8 h-8 rounded-full bg-[var(--accent-slate)] text-white text-[13px] flex items-center justify-center font-semibold hover:opacity-90 transition-opacity\"\n                            >\n                                {userInitials}\n                            </button>\n\n                            <AnimatePresence>\n                                {isMenuOpen && (\n                                    <motion.div\n                                        initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                                        animate={{ opacity: 1, y: 0, scale: 1 }}\n                                        exit={{ opacity: 0, y: 10, scale: 0.95 }}\n                                        transition={{ duration: 0.1 }}\n                                        className=\"absolute right-0 top-full mt-2 w-64 bg-white rounded-xl shadow-xl border border-slate-100 p-2 z-50 origin-top-right\"\n                                    >\n                                        <div className=\"px-3 py-2 border-b border-slate-50 mb-1\">\n                                            <div className=\"text-[11px] font-semibold text-[var(--text-secondary)] uppercase tracking-wider\">Signed in as</div>\n                                            <div className=\"text-sm font-medium text-[var(--text-primary)] truncate\">{user?.email}</div>\n                                        </div>\n\n                                        <button\n                                            onClick={() => {\n                                                setIsMenuOpen(false);\n                                                setShowCollaborators(true);\n                                            }}\n                                            className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[var(--text-primary)] hover:bg-slate-50 rounded-lg transition-colors text-left\"\n                                        >\n                                            <Users size={16} className=\"text-[var(--text-secondary)]\" />\n                                            Collaborators\n                                        </button>\n\n                                        {isAdmin && (\n                                            <button\n                                                onClick={() => {\n                                                    setIsMenuOpen(false);\n                                                    setShowAdminApproval(true);\n                                                }}\n                                                className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-[var(--text-primary)] hover:bg-slate-50 rounded-lg transition-colors text-left\"\n                                            >\n                                                <Shield size={16} className=\"text-[var(--text-secondary)]\" />\n                                                Approve Users\n                                            </button>\n                                        )}\n\n                                        <div className=\"h-px bg-slate-100 my-1\" />\n\n                                        <button\n                                            onClick={() => {\n                                                logout();\n                                                setIsMenuOpen(false);\n                                            }}\n                                            className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors text-left\"\n                                        >\n                                            <LogOut size={16} />\n                                            Log Out\n                                        </button>\n                                    </motion.div>\n                                )}\n                            </AnimatePresence>\n                        </div>\n                    </div>\n                    {/* Header Slot (for Briefing) */}\n                    <div id=\"sam-header-slot\" />\n                </header>\n\n                {/* Modals */}\n                {showAdminApproval && <AdminApprovalView onClose={() => setShowAdminApproval(false)} />}\n                {showCollaborators && user && <CollaboratorsView userId={user.uid} onClose={() => setShowCollaborators(false)} />}\n\n                {/* Main Content Area */}\n                <main className=\"flex-1 overflow-y-auto px-4 pb-[100px]\">\n                    {children}\n                </main>\n\n                {/* Bottom Navigation */}\n                <BottomNav activeTab={activeTab} onNavigate={onNavigate} />\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;;AAQO,MAAM,YAAY,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAkB;;IACzE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAO;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,UAAU,IAAA,uKAAM,EAAiB;IAEvC,mCAAmC;IACnC,IAAA,0KAAS;+BAAC;YACN,MAAM;0DAAqB,CAAC;oBACxB,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;wBACpE,cAAc;oBAClB;gBACJ;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;uCAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QAC3D;8BAAG,EAAE;IAEL,MAAM,eAAe,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK;IACxE,MAAM,UAAU,SAAS,SAAS;IAElC,qBACI,6LAAC;QAAI,WAAU;kBAEX,cAAA,6LAAC;YAAI,WAAU;;8BAGX,6LAAC;oBAAO,WAAU;;sCACd,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CAAuC;;;;;;8CAGtD,6LAAC;oCAAI,WAAU;oCAAW,KAAK;;sDAC3B,6LAAC;4CACG,SAAS,IAAM,cAAc,CAAC;4CAC9B,WAAU;sDAET;;;;;;sDAGL,6LAAC,+MAAe;sDACX,4BACG,6LAAC,uMAAM,CAAC,GAAG;gDACP,SAAS;oDAAE,SAAS;oDAAG,GAAG;oDAAI,OAAO;gDAAK;gDAC1C,SAAS;oDAAE,SAAS;oDAAG,GAAG;oDAAG,OAAO;gDAAE;gDACtC,MAAM;oDAAE,SAAS;oDAAG,GAAG;oDAAI,OAAO;gDAAK;gDACvC,YAAY;oDAAE,UAAU;gDAAI;gDAC5B,WAAU;;kEAEV,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;0EAAkF;;;;;;0EACjG,6LAAC;gEAAI,WAAU;0EAA2D,MAAM;;;;;;;;;;;;kEAGpF,6LAAC;wDACG,SAAS;4DACL,cAAc;4DACd,qBAAqB;wDACzB;wDACA,WAAU;;0EAEV,6LAAC,gNAAK;gEAAC,MAAM;gEAAI,WAAU;;;;;;4DAAiC;;;;;;;oDAI/D,yBACG,6LAAC;wDACG,SAAS;4DACL,cAAc;4DACd,qBAAqB;wDACzB;wDACA,WAAU;;0EAEV,6LAAC,mNAAM;gEAAC,MAAM;gEAAI,WAAU;;;;;;4DAAiC;;;;;;;kEAKrE,6LAAC;wDAAI,WAAU;;;;;;kEAEf,6LAAC;wDACG,SAAS;4DACL;4DACA,cAAc;wDAClB;wDACA,WAAU;;0EAEV,6LAAC,uNAAM;gEAAC,MAAM;;;;;;4DAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAS5C,6LAAC;4BAAI,IAAG;;;;;;;;;;;;gBAIX,mCAAqB,6LAAC,0JAAiB;oBAAC,SAAS,IAAM,qBAAqB;;;;;;gBAC5E,qBAAqB,sBAAQ,6LAAC,0JAAiB;oBAAC,QAAQ,KAAK,GAAG;oBAAE,SAAS,IAAM,qBAAqB;;;;;;8BAGvG,6LAAC;oBAAK,WAAU;8BACX;;;;;;8BAIL,6LAAC,sJAAS;oBAAC,WAAW;oBAAW,YAAY;;;;;;;;;;;;;;;;;AAI7D;GAjHa;;QACyB,4IAAO;;;KADhC"}},
    {"offset": {"line": 2706, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/sam/InventoryItem.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Check, Plus, Minus, MoreVertical, Trash2, Pencil } from 'lucide-react';\n\ninterface InventoryItemProps {\n    name: string;\n    isChecked?: boolean;\n    subtext?: string;\n    isRecurring?: boolean;\n    variant?: 'checkbox' | 'add' | 'quantity';\n\n    // Quantity Controls\n    quantity?: number;\n    showQuantity?: boolean;\n    onIncrement?: () => void;\n    onDecrement?: () => void;\n\n    // Toggle (Checkbox/Add)\n    onToggle?: () => void;\n\n    // Actions\n    onEdit?: () => void;\n    onDelete?: () => void;\n}\n\nexport const InventoryItem = ({\n    name,\n    isChecked = false,\n    subtext,\n    variant = 'checkbox',\n    quantity = 1,\n    showQuantity = false,\n    onToggle,\n    onIncrement,\n    onDecrement,\n    onEdit,\n    onDelete\n}: InventoryItemProps) => {\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    // Close menu when clicking outside\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsMenuOpen(false);\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    // Determine effective showQuantity (backwards compatibility for 'quantity' variant)\n    const shouldShowQuantity = showQuantity || variant === 'quantity';\n\n    return (\n        <div className=\"bg-white p-3 rounded-xl flex items-center gap-3 shadow-sm border border-transparent hover:border-slate-100 transition-colors relative group\">\n\n            {/* Action Icon on the Left */}\n            <div className=\"shrink-0 flex items-center justify-center w-5 h-5\">\n                {variant === 'checkbox' ? (\n                    <label className=\"relative flex items-center justify-center cursor-pointer group/check\">\n                        <input\n                            type=\"checkbox\"\n                            checked={isChecked}\n                            onChange={() => { }}\n                            onClick={(e) => { e.stopPropagation(); onToggle && onToggle(); }}\n                            className=\"appearance-none w-3 h-3 !min-w-[12px] !min-h-[12px] rounded border border-[var(--accent-sage)] checked:bg-[var(--accent-olive)] checked:border-[var(--accent-olive)] transition-colors\"\n                        />\n                        <Check size={8} className=\"absolute text-white opacity-0 group-has-[:checked]:opacity-100 pointer-events-none stroke-[3px]\" />\n                    </label>\n                ) : variant === 'add' ? (\n                    <button\n                        onClick={(e) => { e.stopPropagation(); onToggle && onToggle(); }}\n                        className=\"w-3 h-3 !min-w-[12px] !min-h-[12px] rounded-full bg-[var(--accent-olive)] flex items-center justify-center text-white hover:bg-[var(--accent-sage)] transition-colors shadow-sm\"\n                    >\n                        <Plus size={8} strokeWidth={3} />\n                    </button>\n                ) : (\n                    // Spacer for quantity/other variants\n                    <div className=\"w-5\" />\n                )}\n            </div>\n\n            <div className=\"flex flex-col gap-0.5 flex-1 min-w-0\">\n                <div className={`text-[14px] font-medium leading-tight truncate ${isChecked ? 'text-[var(--text-tertiary)] line-through decoration-[var(--text-tertiary)]' : 'text-[var(--text-primary)]'}`}>\n                    {name}\n                </div>\n                {subtext && (\n                    <div className=\"text-[10px] text-[var(--text-secondary)] mt-0.5 truncate\">{subtext}</div>\n                )}\n            </div>\n\n            {/* Quantity Controls */}\n            {shouldShowQuantity && (\n                <div className=\"flex items-center gap-2 bg-slate-50 rounded-lg p-0.5\" onClick={(e) => e.stopPropagation()}>\n                    <button\n                        onClick={onDecrement}\n                        className=\"w-5 h-5 flex items-center justify-center rounded-md bg-white border border-slate-200 text-slate-400 hover:text-[var(--accent-orange)] hover:border-[var(--accent-orange)] transition-colors shadow-sm\"\n                    >\n                        <Minus size={10} strokeWidth={3} />\n                    </button>\n\n                    <div className=\"w-4 text-center text-[12px] font-semibold text-[var(--text-primary)]\">\n                        {quantity}\n                    </div>\n\n                    <button\n                        onClick={onIncrement}\n                        className=\"w-5 h-5 flex items-center justify-center rounded-md bg-white border border-slate-200 text-slate-400 hover:text-[var(--accent-olive)] hover:border-[var(--accent-olive)] transition-colors shadow-sm\"\n                    >\n                        <Plus size={10} strokeWidth={3} />\n                    </button>\n                </div>\n            )}\n\n            {/* More / Menu Options */}\n            {(onEdit || onDelete) && (\n                <div className=\"relative\" ref={menuRef} onClick={(e) => e.stopPropagation()}>\n                    <button\n                        onClick={() => setIsMenuOpen(!isMenuOpen)}\n                        className=\"w-6 h-6 flex items-center justify-center text-[var(--text-tertiary)] hover:text-[var(--text-secondary)] rounded-full hover:bg-slate-100 transition-colors\"\n                    >\n                        <MoreVertical size={14} />\n                    </button>\n\n                    {/* Popover Menu */}\n                    {isMenuOpen && (\n                        <div className=\"absolute right-0 top-full mt-1 w-32 bg-white rounded-lg shadow-xl border border-slate-100 py-1 z-10 origin-top-right animate-in fade-in zoom-in-95 duration-100\">\n                            {onEdit && (\n                                <button\n                                    onClick={() => { setIsMenuOpen(false); onEdit(); }}\n                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-[12px] text-[var(--text-primary)] hover:bg-slate-50 transition-colors text-left\"\n                                >\n                                    <Pencil size={12} className=\"text-[var(--text-secondary)]\" />\n                                    Edit\n                                </button>\n                            )}\n                            {onDelete && (\n                                <button\n                                    onClick={() => { setIsMenuOpen(false); onDelete(); }}\n                                    className=\"w-full flex items-center gap-2 px-3 py-2 text-[12px] text-red-600 hover:bg-red-50 transition-colors text-left\"\n                                >\n                                    <Trash2 size={12} />\n                                    Delete\n                                </button>\n                            )}\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;AAuBO,MAAM,gBAAgB,CAAC,EAC1B,IAAI,EACJ,YAAY,KAAK,EACjB,OAAO,EACP,UAAU,UAAU,EACpB,WAAW,CAAC,EACZ,eAAe,KAAK,EACpB,QAAQ,EACR,WAAW,EACX,WAAW,EACX,MAAM,EACN,QAAQ,EACS;;IACjB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,UAAU,IAAA,uKAAM,EAAiB;IAEvC,mCAAmC;IACnC,IAAA,0KAAS;mCAAC;YACN,MAAM;8DAAqB,CAAC;oBACxB,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;wBACpE,cAAc;oBAClB;gBACJ;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;2CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QAC3D;kCAAG,EAAE;IAEL,oFAAoF;IACpF,MAAM,qBAAqB,gBAAgB,YAAY;IAEvD,qBACI,6LAAC;QAAI,WAAU;;0BAGX,6LAAC;gBAAI,WAAU;0BACV,YAAY,2BACT,6LAAC;oBAAM,WAAU;;sCACb,6LAAC;4BACG,MAAK;4BACL,SAAS;4BACT,UAAU,KAAQ;4BAClB,SAAS,CAAC;gCAAQ,EAAE,eAAe;gCAAI,YAAY;4BAAY;4BAC/D,WAAU;;;;;;sCAEd,6LAAC,gNAAK;4BAAC,MAAM;4BAAG,WAAU;;;;;;;;;;;+DAE9B,YAAY,sBACZ,6LAAC;oBACG,SAAS,CAAC;wBAAQ,EAAE,eAAe;wBAAI,YAAY;oBAAY;oBAC/D,WAAU;8BAEV,cAAA,6LAAC,6MAAI;wBAAC,MAAM;wBAAG,aAAa;;;;;;;;;;+DAGhC,qCAAqC;8BACrC,6LAAC;oBAAI,WAAU;;;;;;;;;;;0BAIvB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAW,CAAC,+CAA+C,EAAE,YAAY,+EAA+E,8BAA8B;kCACtL;;;;;;oBAEJ,yBACG,6LAAC;wBAAI,WAAU;kCAA4D;;;;;;;;;;;;YAKlF,oCACG,6LAAC;gBAAI,WAAU;gBAAuD,SAAS,CAAC,IAAM,EAAE,eAAe;;kCACnG,6LAAC;wBACG,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,gNAAK;4BAAC,MAAM;4BAAI,aAAa;;;;;;;;;;;kCAGlC,6LAAC;wBAAI,WAAU;kCACV;;;;;;kCAGL,6LAAC;wBACG,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,6MAAI;4BAAC,MAAM;4BAAI,aAAa;;;;;;;;;;;;;;;;;YAMxC,CAAC,UAAU,QAAQ,mBAChB,6LAAC;gBAAI,WAAU;gBAAW,KAAK;gBAAS,SAAS,CAAC,IAAM,EAAE,eAAe;;kCACrE,6LAAC;wBACG,SAAS,IAAM,cAAc,CAAC;wBAC9B,WAAU;kCAEV,cAAA,6LAAC,6OAAY;4BAAC,MAAM;;;;;;;;;;;oBAIvB,4BACG,6LAAC;wBAAI,WAAU;;4BACV,wBACG,6LAAC;gCACG,SAAS;oCAAQ,cAAc;oCAAQ;gCAAU;gCACjD,WAAU;;kDAEV,6LAAC,mNAAM;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAiC;;;;;;;4BAIpE,0BACG,6LAAC;gCACG,SAAS;oCAAQ,cAAc;oCAAQ;gCAAY;gCACnD,WAAU;;kDAEV,6LAAC,uNAAM;wCAAC,MAAM;;;;;;oCAAM;;;;;;;;;;;;;;;;;;;;;;;;;AAUxD;GAhIa;KAAA"}},
    {"offset": {"line": 2981, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACxB"}},
    {"offset": {"line": 2999, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n    React.ElementRef<typeof TabsPrimitive.List>,\n    React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n    <TabsPrimitive.List\n        ref={ref}\n        className={cn(\n            \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n            className\n        )}\n        {...props}\n    />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n    React.ElementRef<typeof TabsPrimitive.Trigger>,\n    React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n    <TabsPrimitive.Trigger\n        ref={ref}\n        className={cn(\n            \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n            className\n        )}\n        {...props}\n    />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n    React.ElementRef<typeof TabsPrimitive.Content>,\n    React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n    <TabsPrimitive.Content\n        ref={ref}\n        className={cn(\n            \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n            className\n        )}\n        {...props}\n    />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,2KAAkB;AAE/B,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,2KAAkB;QACf,KAAK;QACL,WAAW,IAAA,4HAAE,EACT,8FACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,SAAS,WAAW,GAAG,2KAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,8KAAqB;QAClB,KAAK;QACL,WAAW,IAAA,4HAAE,EACT,uYACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC,8KAAqB;QAClB,KAAK;QACL,WAAW,IAAA,4HAAE,EACT,mIACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 3066, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/ChatView.tsx"],"sourcesContent":["\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { collection, query, orderBy, where, Timestamp } from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { UserProfile } from '../types';\nimport { format } from 'date-fns';\nimport { Loader2, User, Bot, Calendar, ShoppingCart, CheckCircle } from 'lucide-react';\n\ninterface Message {\n    id: string;\n    userId: string;\n    text: string;\n    direction: 'in' | 'out';\n    timestamp: number;\n    actionTaken?: {\n        type: string;\n        args: any;\n        result: any;\n    };\n}\n\nexport const ChatView = () => {\n    // 1. Fetch Users Data for mapping\n    const [usersSnapshot] = useCollection(collection(db, 'users'));\n    const usersMap = React.useMemo(() => {\n        const map: Record<string, UserProfile> = {};\n        usersSnapshot?.docs.forEach(doc => {\n            const data = doc.data() as UserProfile;\n            if (data.phoneNumber) {\n                map[data.phoneNumber] = { ...data, uid: doc.id };\n            }\n        });\n        return map;\n    }, [usersSnapshot]);\n\n    // 2. Fetch All Messages Order by Date\n    const q = query(collection(db, 'messages'), orderBy('timestamp', 'asc'));\n    const [messagesSnapshot, loading] = useCollection(q);\n    const messages = messagesSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as Message)) || [];\n\n    const scrollRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (scrollRef.current) {\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    const renderActionBubble = (action: Message['actionTaken']) => {\n        if (!action) return null;\n\n        let icon = <CheckCircle size={16} />;\n        let title = \"Action Taken\";\n        let details = \"\";\n        let colorClass = \"bg-green-50 text-green-700 border-green-100\";\n\n        switch (action.type) {\n            case 'addEvent':\n                icon = <Calendar size={16} />;\n                title = \"Event Scheduled\";\n                details = `\"${action.args.title}\" on ${action.args.date}`;\n                colorClass = \"bg-blue-50 text-blue-700 border-blue-100\";\n                break;\n            case 'addToShoppingList':\n                icon = <ShoppingCart size={16} />;\n                title = \"Added to List\";\n                details = `\"${action.args.item}\"` + (action.args.listName ? ` to ${action.args.listName}` : \"\");\n                colorClass = \"bg-amber-50 text-amber-700 border-amber-100\";\n                break;\n            case 'updatePantryItem':\n                icon = <CheckCircle size={16} />;\n                title = \"Pantry Updated\";\n                details = `${action.args.item}: ${action.args.status}`;\n                colorClass = \"bg-purple-50 text-purple-700 border-purple-100\";\n                break;\n            default:\n                details = JSON.stringify(action.args);\n        }\n\n        return (\n            <div className={`mt-2 mb-1 p-3 rounded-lg border text-sm flex items-start gap-2 ${colorClass}`}>\n                <div className=\"mt-0.5\">{icon}</div>\n                <div>\n                    <div className=\"font-semibold text-xs uppercase tracking-wider opacity-80\">{title}</div>\n                    <div className=\"font-medium\">{details}</div>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"flex flex-col h-[calc(100vh-180px)] md:h-[600px] w-full bg-slate-50 rounded-xl shadow-sm overflow-hidden border border-slate-100\">\n\n            {/* Header */}\n            <div className=\"p-4 border-b border-slate-100 bg-white flex items-center justify-between shadow-sm z-10\">\n                <h2 className=\"font-serif text-lg font-medium text-slate-800 flex items-center gap-2\">\n                    <div className=\"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center\">\n                        <Bot size={18} />\n                    </div>\n                    Hearth Chat\n                </h2>\n                <div className=\"text-xs text-slate-500\">\n                    {messages.length} messages\n                </div>\n            </div>\n\n            {/* Messages Area */}\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-6\" ref={scrollRef}>\n                {loading ? (\n                    <div className=\"flex justify-center p-8\"><Loader2 className=\"animate-spin text-slate-400\" /></div>\n                ) : !messages || messages.length === 0 ? (\n                    <div className=\"text-center text-slate-400 text-sm py-8\">No messages yet.</div>\n                ) : (\n                    messages.map((msg) => {\n                        const isOut = msg.direction === 'out';\n                        const user = usersMap[msg.userId];\n                        const displayName = user?.displayName || msg.userId || \"Unknown\";\n                        const avatarLetter = displayName[0]?.toUpperCase() || '#';\n\n                        return (\n                            <div key={msg.id} className={`flex w-full flex-col ${isOut ? 'items-end' : 'items-start'}`}>\n\n                                {/* Sender Name (User or Assistant) */}\n                                <div className={`text-[11px] text-slate-400 mb-1 px-1 flex items-center gap-1 ${isOut ? 'flex-row-reverse' : ''}`}>\n                                    {isOut ? (\n                                        <>\n                                            <span className=\"font-medium text-indigo-500\">Hearth</span>\n                                            <span className=\"text-[10px]\">• {format(msg.timestamp, 'MMM d, h:mm a')}</span>\n                                        </>\n                                    ) : (\n                                        <>\n                                            <span className=\"font-medium text-slate-600\">{displayName}</span>\n                                            <span className=\"text-[10px]\">• {format(msg.timestamp, 'MMM d, h:mm a')}</span>\n                                        </>\n                                    )}\n                                </div>\n\n                                <div className={`flex max-w-[85%] md:max-w-[70%] gap-2 ${isOut ? 'flex-row-reverse' : ''}`}>\n\n                                    {/* Avatar */}\n                                    <div className={`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold shadow-sm ${isOut ? 'bg-indigo-600 text-white' : 'bg-white text-slate-600 border border-slate-100'}`}>\n                                        {isOut ? <Bot size={16} /> : avatarLetter}\n                                    </div>\n\n                                    {/* Bubble */}\n                                    <div className={`flex flex-col w-full ${isOut ? 'items-end' : 'items-start'}`}>\n                                        <div className={`px-4 py-3 text-sm shadow-sm w-fit ${isOut\n                                            ? 'bg-indigo-600 text-white rounded-2xl rounded-tr-none'\n                                            : 'bg-white text-slate-800 border border-slate-100 rounded-2xl rounded-tl-none'\n                                            }`}>\n                                            <div className=\"whitespace-pre-wrap break-words\">{msg.text}</div>\n                                        </div>\n\n                                        {/* Action Bubble (Rendered outside the text bubble for visual distinction, or inside?) \n                                            Let's render it below the text bubble if it exists.\n                                        */}\n                                        {msg.actionTaken && (\n                                            <div className=\"w-full max-w-sm\">\n                                                {renderActionBubble(msg.actionTaken)}\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })\n                )}\n            </div>\n        </div>\n    );\n};\n\n// Removed inner ChatWindow component as it's no longer used.\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3444, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/SettingsView.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\nimport { auth, db } from '../lib/firebase';\nimport { Loader2, Save, Phone, User as UserIcon, LogOut } from 'lucide-react';\nimport { UserProfile } from '../types';\n\nexport const SettingsView = () => {\n    const [user] = useAuthState(auth);\n    const [loading, setLoading] = useState(false);\n    const [phoneNumber, setPhoneNumber] = useState('');\n    const [displayName, setDisplayName] = useState('');\n    const [successMsg, setSuccessMsg] = useState('');\n    const [errorMsg, setErrorMsg] = useState('');\n\n    useEffect(() => {\n        const fetchProfile = async () => {\n            if (!user) return;\n            try {\n                const userRef = doc(db, 'users', user.uid);\n                const snapshot = await getDoc(userRef);\n                if (snapshot.exists()) {\n                    const data = snapshot.data() as UserProfile;\n                    setPhoneNumber(data.phoneNumber || '');\n                    setDisplayName(data.displayName || user.displayName || '');\n                }\n            } catch (err) {\n                console.error(\"Error fetching profile:\", err);\n            }\n        };\n        fetchProfile();\n    }, [user]);\n\n    const handleSave = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!user) return;\n        setSuccessMsg('');\n        setErrorMsg('');\n        setLoading(true);\n\n        try {\n            // Basic validation for E.164\n            let formattedPhone = phoneNumber.trim();\n            if (formattedPhone && !formattedPhone.startsWith('+')) {\n                // Should we auto-add? Maybe enforce user to add it to avoid locale assumptions.\n                // For now, let's just warn or simplistic check.\n                setErrorMsg(\"Phone number must start with + (e.g. +14155552671)\");\n                setLoading(false);\n                return;\n            }\n\n            const userRef = doc(db, 'users', user.uid);\n            await updateDoc(userRef, {\n                phoneNumber: formattedPhone,\n                displayName: displayName\n            });\n            setSuccessMsg(\"Profile updated successfully!\");\n        } catch (err: any) {\n            console.error(\"Error saving profile:\", err);\n            setErrorMsg(\"Failed to save profile. \" + err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full w-full bg-slate-50 p-4 overflow-y-auto\">\n            <div className=\"max-w-md mx-auto w-full space-y-6\">\n\n                <div className=\"flex flex-col items-center mb-6\">\n                    <div className=\"w-20 h-20 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 mb-4 shadow-sm\">\n                        <UserIcon size={40} />\n                    </div>\n                    <h2 className=\"text-2xl font-serif text-slate-800\">Your Profile</h2>\n                    <p className=\"text-slate-500 text-sm\">{user?.email}</p>\n                </div>\n\n                <div className=\"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden\">\n                    <div className=\"p-4 border-b border-slate-100 bg-slate-50/50\">\n                        <h3 className=\"font-medium text-slate-800\">Contact Details</h3>\n                    </div>\n\n                    <form onSubmit={handleSave} className=\"p-6 space-y-4\">\n\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium text-slate-700\">Display Name</label>\n                            <input\n                                type=\"text\"\n                                className=\"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors\"\n                                placeholder=\"What should we call you?\"\n                                value={displayName}\n                                onChange={(e) => setDisplayName(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <label className=\"text-sm font-medium text-slate-700\">WhatsApp Number</label>\n                            <div className=\"relative\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400\">\n                                    <Phone size={16} />\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    className=\"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors font-mono text-sm\"\n                                    placeholder=\"+1234567890\"\n                                    value={phoneNumber}\n                                    onChange={(e) => setPhoneNumber(e.target.value)}\n                                />\n                            </div>\n                            <p className=\"text-xs text-slate-400\">\n                                Enter your number in E.164 format (e.g. +14155552671). Message this number from WhatsApp to sync.\n                            </p>\n                        </div>\n\n                        {errorMsg && (\n                            <div className=\"p-3 rounded-lg bg-red-50 text-red-600 text-sm\">\n                                {errorMsg}\n                            </div>\n                        )}\n\n                        {successMsg && (\n                            <div className=\"p-3 rounded-lg bg-green-50 text-green-600 text-sm\">\n                                {successMsg}\n                            </div>\n                        )}\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-indigo-600 text-white py-2.5 rounded-lg font-medium hover:bg-indigo-700 active:bg-indigo-800 transition-colors flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed shadow-sm\"\n                        >\n                            {loading ? <Loader2 className=\"animate-spin\" size={18} /> : <Save size={18} />}\n                            Save Changes\n                        </button>\n                    </form>\n                </div>\n\n                <div className=\"text-center pt-4\">\n                    <button\n                        onClick={() => auth.signOut()}\n                        className=\"text-red-600 text-sm font-medium hover:text-red-700 flex items-center justify-center gap-2 mx-auto px-4 py-2 rounded-lg hover:bg-red-50 transition-colors\"\n                    >\n                        <LogOut size={16} />\n                        Sign Out\n                    </button>\n                </div>\n\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3785, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/views/SamDashboard.tsx"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { collection, query, where, addDoc } from 'firebase/firestore';\nimport { auth, db } from '../lib/firebase';\nimport {\n    moveItemToPantry,\n    depleteItemFromPantry,\n    undoMoveToPantry,\n    incrementPantryItem,\n    updateShoppingItemQuantity,\n    deleteShoppingItem,\n    deletePantryItem,\n    updateShoppingItem,\n    updatePantryItem\n} from '../lib/logic';\nimport { type ListItem, type PantryItem } from '../types';\n\nimport { SamLayout } from '../components/sam/SamLayout';\nimport { InventoryItem } from '../components/sam/InventoryItem';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\nimport { ChatView } from './ChatView';\nimport { SettingsView } from './SettingsView';\nimport { AddItemFlyout } from '../components/sam/AddItemFlyout';\n\nexport const SamDashboard = () => {\n    const [user] = useAuthState(auth);\n    // Main Tab State (Bottom Nav)\n    const [activeTab, setActiveTab] = useState<'shopping' | 'events' | 'summary' | 'chat' | 'settings'>('shopping');\n    // Sub Tab State for Shopping view\n    const [activeShoppingTab, setActiveShoppingTab] = useState<'shopping' | 'stock'>('shopping');\n\n    // Local state for items bought in this session (to keep them visible)\n    const [recentlyBought, setRecentlyBought] = useState<ListItem[]>([]);\n\n    // --- Data Fetching ---\n    // 1. Lists (for mapping names)\n    const [listsSnapshot] = useCollection(\n        user ? query(collection(db, 'lists'), where('userId', '==', user.uid)) : null\n    );\n    const listsMap = React.useMemo(() => {\n        const map: Record<string, string> = {};\n        listsSnapshot?.docs.forEach(doc => {\n            map[doc.id] = doc.data().name;\n        });\n        return map;\n    }, [listsSnapshot]);\n\n    // 2. Shopping List Items (Unbought)\n    const [itemsSnapshot] = useCollection(\n        user ? query(collection(db, 'items'), where('userId', '==', user.uid), where('isBought', '==', false)) : null\n    );\n    const shoppingItemsRaw = itemsSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as ListItem)) || [];\n\n    // 3. Pantry Items (Stock)\n    const [pantrySnapshot] = useCollection(\n        user ? query(collection(db, 'pantry'), where('userId', '==', user.uid)) : null\n    );\n    const pantryItems = pantrySnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as PantryItem)) || [];\n\n    // --- Data Munging ---\n    // Combine raw unbought items with recently bought items for display\n    const mergedShoppingItems = React.useMemo(() => {\n        // Filter out any raw items that might also be in recentlyBought (dedup based on ID)\n        // This handles the transition period where Firestore hasn't updated yet but we added to local state\n        const unbought = shoppingItemsRaw.filter(i => !recentlyBought.some(r => r.id === i.id));\n        const combined = [...unbought, ...recentlyBought];\n        // Sort by addedAt desc to keep order stable regardless of bought status\n        return combined.sort((a, b) => (b.addedAt || 0) - (a.addedAt || 0));\n    }, [shoppingItemsRaw, recentlyBought]);\n\n\n    // --- Grouping Logic ---\n    const groupedShopping = React.useMemo(() => {\n        const groups: Record<string, ListItem[]> = {};\n        mergedShoppingItems.forEach(item => {\n            // Group by list name if available, otherwise \"Shopping List\"\n            let listName = 'General';\n            if (item.listId) {\n                listName = listsMap[item.listId] || 'General';\n            }\n\n            if (!groups[listName]) groups[listName] = [];\n            groups[listName].push(item);\n        });\n        return groups;\n    }, [mergedShoppingItems, listsMap]);\n\n    const groupedPantry = React.useMemo(() => {\n        const groups: Record<string, PantryItem[]> = {};\n        pantryItems.forEach(item => {\n            const listName = item.sourceListName || 'General';\n            if (!groups[listName]) groups[listName] = [];\n            groups[listName].push(item);\n        });\n        return groups;\n    }, [pantryItems]);\n\n\n    // --- Handlers ---\n    const handleToggleShopping = async (item: ListItem) => {\n        if (!user) return;\n\n        if (item.isBought) {\n            // Undo: Remove from recently bought and revert DB\n            setRecentlyBought(prev => prev.filter(i => i.id !== item.id));\n            await undoMoveToPantry(user.uid, item);\n        } else {\n            // Buy: Add to recently bought (optimistic) and update DB\n            setRecentlyBought(prev => [...prev, { ...item, isBought: true }]);\n            const listName = listsMap[item.listId] || 'Shopping List';\n            await moveItemToPantry(user.uid, item, listName);\n        }\n    };\n\n    const handleAddToShoppingList = async (item: PantryItem) => {\n        if (!user) return;\n        await depleteItemFromPantry(user.uid, item, true);\n    };\n\n    const handleStockDecrement = async (item: PantryItem) => {\n        if (!user) return;\n        // Decrement (audit), don't add to list automatically (unless using left action)\n        await depleteItemFromPantry(user.uid, item, false);\n    };\n\n    const handleIncrementStock = async (item: PantryItem) => {\n        if (!user) return;\n        await incrementPantryItem(item);\n    };\n\n    // --- Shopping List Handlers ---\n    const handleShoppingIncrement = async (item: ListItem) => {\n        if (!user) return;\n        await updateShoppingItemQuantity(item.id, 1);\n    };\n\n    const handleShoppingDecrement = async (item: ListItem) => {\n        if (!user) return;\n        // If qty is 1, maybe confirm delete? Or just don't decrement below 1?\n        // User said \"implement qty\", preventing < 1 usually safer unless explicit delete.\n        if ((item.quantity || 1) > 1) {\n            await updateShoppingItemQuantity(item.id, -1);\n        } else {\n            // Optional: Allow deleting by decrementing to 0? For now, stick to >1 constraint and use explicit delete.\n            if (window.confirm(`Remove \"${item.name}\" from shopping list?`)) {\n                await deleteShoppingItem(item.id);\n            }\n        }\n    };\n\n    const handleShoppingDelete = async (item: ListItem) => {\n        if (!user || !window.confirm(`Delete \"${item.name}\"?`)) return;\n        await deleteShoppingItem(item.id);\n    };\n\n    const handleShoppingEdit = async (item: ListItem) => {\n        if (!user) return;\n        const newName = window.prompt(\"Rename item:\", item.name);\n        if (newName && newName !== item.name) {\n            await updateShoppingItem(item.id, { name: newName });\n        }\n    };\n\n    // --- Pantry Handlers ---\n    const handlePantryDelete = async (item: PantryItem) => {\n        if (!user || !window.confirm(`Delete \"${item.name}\" from stock?`)) return;\n        await deletePantryItem(item.id);\n    };\n\n    const handlePantryEdit = async (item: PantryItem) => {\n        if (!user) return;\n        const newName = window.prompt(\"Rename item:\", item.name);\n        if (newName && newName !== item.name) {\n            await updatePantryItem(item.id, { name: newName });\n        }\n    };\n\n    // List of lists for the flyout\n    const lists = listsSnapshot?.docs.map(doc => ({ id: doc.id, name: doc.data().name })) || [];\n\n    const handleAddItemFlyout = async (name: string, listId: string) => {\n        if (!user) return;\n\n        if (activeShoppingTab === 'shopping') {\n            // Add to Shopping List\n            await addDoc(collection(db, 'items'), {\n                name,\n                listId,\n                userId: user.uid,\n                isBought: false,\n                quantity: 1,\n                addedAt: Date.now()\n            });\n        } else {\n            // Add to Pantry\n            const list = lists.find(l => l.id === listId);\n            const listName = list ? list.name : 'Unknown List';\n\n            await addDoc(collection(db, 'pantry'), {\n                name,\n                quantity: 1,\n                userId: user.uid,\n                sourceListId: listId,\n                sourceListName: listName,\n                lastUpdated: Date.now()\n            });\n        }\n    };\n\n    const handleAddListFlyout = async (name: string) => {\n        if (!user) return;\n        await addDoc(collection(db, 'lists'), {\n            name,\n            userId: user.uid,\n            createdAt: Date.now()\n        });\n    };\n\n    return (\n        <SamLayout activeTab={activeTab} onNavigate={(tab) => setActiveTab(tab)}>\n\n            {/* Main Scroll Content */}\n            <div className=\"mt-4\">\n\n\n                {/* SHOPPING VIEW with Tabs */}\n                {activeTab === 'shopping' && (\n                    <Tabs defaultValue=\"shopping\" value={activeShoppingTab} onValueChange={(val: string) => setActiveShoppingTab(val as 'shopping' | 'stock')} className=\"w-full\">\n\n                        <div className=\"flex items-center justify-between mb-6\">\n                            <TabsList className=\"bg-slate-100 p-1 rounded-full h-auto inline-flex justify-start\">\n                                <TabsTrigger\n                                    value=\"shopping\"\n                                    className=\"rounded-full px-6 py-2 data-[state=active]:bg-white data-[state=active]:text-[var(--text-primary)] data-[state=active]:shadow-sm text-[var(--text-secondary)] font-medium\"\n                                >\n                                    Shopping\n                                </TabsTrigger>\n                                <TabsTrigger\n                                    value=\"stock\"\n                                    className=\"rounded-full px-6 py-2 data-[state=active]:bg-white data-[state=active]:text-[var(--text-primary)] data-[state=active]:shadow-sm text-[var(--text-secondary)] font-medium\"\n                                >\n                                    Stock\n                                </TabsTrigger>\n                            </TabsList>\n\n                            <div className=\"flex items-center gap-2\">\n                                <AddItemPopover\n                                    lists={lists}\n                                    onAddItem={handleAddItemFlyout}\n                                />\n                                <AddListPopover\n                                    onAddList={handleAddListFlyout}\n                                />\n                            </div>\n                        </div>\n\n                        <TabsContent value=\"shopping\" className=\"mt-0\">\n                            {/* Content */}\n                            <div className=\"flex flex-col gap-2\">\n                                {mergedShoppingItems.length === 0 && (\n                                    <div className=\"text-center text-[var(--text-secondary)] py-8 text-sm italic\">\n                                        Your shopping list is empty!\n                                    </div>\n                                )}\n                                {Object.entries(groupedShopping).map(([listName, items]) => (\n                                    <div key={listName} className=\"mb-2\">\n                                        <div className=\"text-[11px] uppercase tracking-wider text-[var(--text-secondary)] font-semibold mt-4 mb-2 pl-1\">{listName}</div>\n                                        <div className=\"flex flex-col gap-2\">\n                                            {items.map(item => (\n                                                <InventoryItem\n                                                    key={item.id}\n                                                    name={item.name}\n                                                    isChecked={item.isBought}\n                                                    onToggle={() => handleToggleShopping(item)}\n\n                                                    // Quantity\n                                                    showQuantity={true}\n                                                    quantity={item.quantity || 1}\n                                                    onIncrement={() => handleShoppingIncrement(item)}\n                                                    onDecrement={() => handleShoppingDecrement(item)}\n\n                                                    // Actions\n                                                    onEdit={() => handleShoppingEdit(item)}\n                                                    onDelete={() => handleShoppingDelete(item)}\n                                                />\n                                            ))}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </TabsContent>\n\n                        <TabsContent value=\"stock\" className=\"mt-0\">\n                            <div className=\"flex flex-col gap-2\">\n                                {pantryItems.length === 0 && (\n                                    <div className=\"text-center text-[var(--text-secondary)] py-8 text-sm italic\">\n                                        Your pantry is empty.\n                                    </div>\n                                )}\n                                {Object.entries(groupedPantry).map(([listName, items]) => (\n                                    <div key={listName} className=\"mb-2\">\n                                        <div className=\"text-[11px] uppercase tracking-wider text-[var(--text-secondary)] font-semibold mt-4 mb-2 pl-1\">{listName}</div>\n                                        <div className=\"flex flex-col gap-2\">\n                                            {items.map(item => (\n                                                <InventoryItem\n                                                    key={item.id}\n                                                    name={item.name}\n                                                    variant=\"add\"\n                                                    showQuantity={true}\n                                                    quantity={item.quantity}\n                                                    onToggle={() => handleAddToShoppingList(item)}\n\n                                                    onDecrement={() => handleStockDecrement(item)}\n                                                    onIncrement={() => handleIncrementStock(item)}\n\n                                                    // Actions\n                                                    onEdit={() => handlePantryEdit(item)}\n                                                    onDelete={() => handlePantryDelete(item)}\n                                                />\n                                            ))}\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </TabsContent>\n                    </Tabs>\n                )}\n\n\n                {/* EVENTS VIEW */}\n                {activeTab === 'events' && (\n                    <div className=\"text-center text-[var(--text-secondary)] py-8 text-sm italic\">\n                        <h2 className=\"text-lg font-serif text-[var(--text-primary)] mb-2\">Upcoming Events</h2>\n                        <p>No upcoming events.</p>\n                    </div>\n                )}\n\n                {/* SUMMARY VIEW (Placeholder) */}\n                {activeTab === 'summary' && (\n                    <div className=\"text-center text-[var(--text-secondary)] py-8 text-sm italic\">\n                        <h2 className=\"text-lg font-serif text-[var(--text-primary)] mb-2\">Summary</h2>\n                        <p>Summary dashboard coming soon.</p>\n                    </div>\n                )}\n\n                {/* CHAT VIEW */}\n                {activeTab === 'chat' && (\n                    <ChatView />\n                )}\n\n                {/* SETUP VIEW */}\n                {activeTab === 'setup' && (\n                    <SettingsView />\n                )}\n\n            </div>\n        </SamLayout>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4326, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/App.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth, db } from './lib/firebase';\nimport { LandingView } from './views/LandingView';\nimport { PantryView } from './views/PantryView';\nimport { WaitApprovalView } from './views/WaitApprovalView';\nimport { HelpView } from './views/HelpView';\nimport { CalendarView } from './views/CalendarView';\nimport { Layout } from './components/Layout';\nimport { SamDashboard } from './views/SamDashboard';\nimport { TaskListView } from './components/TaskListView';\nimport { Loader2, LogOut } from 'lucide-react';\nimport { doc, setDoc, onSnapshot } from 'firebase/firestore';\nimport { UserProfile } from './types';\n\nfunction App() {\n  const [user, loading, error] = useAuthState(auth);\n  const [appUser, setAppUser] = useState<UserProfile | null>(null);\n  const [isAppUserLoading, setIsAppUserLoading] = useState(false);\n  const [currentView, setCurrentView] = useState<string>('today');\n  const [timedOut, setTimedOut] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Fetch or Create Firestore User\n  useEffect(() => {\n    let unsubscribe = () => { };\n\n    const syncUser = async () => {\n      if (!user) {\n        setAppUser(null);\n        return;\n      }\n\n      setIsAppUserLoading(true);\n      try {\n        const userRef = doc(db, 'users', user.uid);\n        // Use onSnapshot to listen for changes (like approval) in real-time\n        unsubscribe = onSnapshot(userRef, async (snapshot) => {\n          if (snapshot.exists()) {\n            setAppUser({ uid: user.uid, ...snapshot.data() } as UserProfile);\n          } else {\n            // New user registration\n            const newUser: UserProfile = {\n              uid: user.uid,\n              email: user.email,\n              displayName: user.displayName,\n              role: 'user',\n              isApproved: false,\n              preferences: {\n                autoAddBackToShoppingList: true\n              }\n            };\n            await setDoc(userRef, newUser);\n            // Snapshot listener will pick this up immediately\n          }\n          setIsAppUserLoading(false);\n        });\n      } catch (err) {\n        console.error(\"Error fetching user doc:\", err);\n        setIsAppUserLoading(false);\n      }\n    };\n\n    syncUser();\n    return () => unsubscribe();\n  }, [user]);\n\n  // Prevent hydration mismatch\n  if (!isMounted) return null;\n\n  if ((loading || (user && isAppUserLoading)) && !timedOut) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface\">\n        <div className=\"text-center\">\n          <Loader2 className=\"text-primary animate-spin mx-auto mb-4\" size={48} />\n          <p className=\"text-slate-500 animate-pulse\">Connecting...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || (timedOut && !user && !loading)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface p-6 text-center\">\n        <div className=\"max-w-xs\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <LogOut className=\"text-red-600\" size={32} />\n          </div>\n          <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Connection Issue</h2>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"w-full bg-slate-900 text-white py-3 rounded-xl font-bold\"\n          >\n            Retry Connection\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <LandingView onLoginSuccess={() => setCurrentView('today')} />;\n  }\n\n  // Check approval status\n  if (appUser && !appUser.isApproved) {\n    return <WaitApprovalView onLogout={() => auth.signOut()} email={user?.email || ''} />;\n  }\n\n  if (currentView === 'landing') {\n    return (\n      <LandingView\n        onLoginSuccess={() => setCurrentView('today')}\n        isLoggedIn={true}\n        onGoToDashboard={() => setCurrentView('today')}\n      />\n    );\n  }\n\n  return (\n    <SamDashboard />\n  );\n}\nexport default App;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4558, "column": 0}, "map": {"version":3,"sources":["file:///Users/sramakrishna/Documents/Personal%20Projects/Bilbo/web/src/app/page.tsx"],"sourcesContent":["\"use client\";\nimport App from '../App';\n\nexport default function Home() {\n    return <App />;\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS;IACpB,qBAAO,6LAAC,yHAAG;;;;;AACf;KAFwB"}}]
}