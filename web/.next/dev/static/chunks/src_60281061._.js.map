{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\n// These values will be filled in once we have the Firebase project setup\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCH55GbqW6y87TNoblFx4T47LlvfbhdwhQ\",\n    authDomain: \"listpantry-app-88888.firebaseapp.com\",\n    projectId: \"listpantry-app-88888\",\n    storageBucket: \"listpantry-app-88888.firebasestorage.app\",\n    messagingSenderId: \"485783598276\",\n    appId: \"1:485783598276:web:3d884109927b416ca28591\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport default app;\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,yEAAyE;AACzE,MAAM,iBAAiB;IACnB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACX;AAEA,MAAM,MAAM,IAAA,oLAAa,EAAC;AACnB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;uCAChB"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/StatusCard.tsx"],"sourcesContent":["import { LucideIcon } from 'lucide-react';\nimport { clsx } from 'clsx';\n\ninterface StatusCardProps {\n    title: string;\n    count: number;\n    icon: LucideIcon;\n    variant: 'blue' | 'yellow' | 'green' | 'pink';\n}\n\nexport const StatusCard = ({ title, count, icon: Icon, variant }: StatusCardProps) => {\n    const variants = {\n        blue: 'bg-card-blue text-on-card-blue',\n        yellow: 'bg-card-yellow text-on-card-yellow',\n        green: 'bg-card-green text-on-card-green',\n        pink: 'bg-card-pink text-on-card-pink'\n    };\n\n    return (\n        <div className={clsx(\n            \"rounded-[var(--radius-lg)] p-4 flex flex-col justify-between aspect-square material-shadow-1 transition-transform active:scale-95 cursor-pointer\",\n            variants[variant]\n        )}>\n            <div className=\"flex justify-between items-start\">\n                <div className=\"w-10 h-10 rounded-full bg-white/40 flex items-center justify-center backdrop-blur-sm\">\n                    <Icon size={20} strokeWidth={2.5} />\n                </div>\n            </div>\n\n            <div className=\"mt-2\">\n                <p className=\"text-sm font-medium opacity-90 mb-1\">{title}</p>\n                <h3 className=\"text-3xl font-bold\">{count}</h3>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AACA;;;AASO,MAAM,aAAa,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,OAAO,EAAmB;IAC7E,MAAM,WAAW;QACb,MAAM;QACN,QAAQ;QACR,OAAO;QACP,MAAM;IACV;IAEA,qBACI,6LAAC;QAAI,WAAW,IAAA,gJAAI,EAChB,oJACA,QAAQ,CAAC,QAAQ;;0BAEjB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAK,MAAM;wBAAI,aAAa;;;;;;;;;;;;;;;;0BAIrC,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCAAuC;;;;;;kCACpD,6LAAC;wBAAG,WAAU;kCAAsB;;;;;;;;;;;;;;;;;;AAIpD;KAzBa"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/TaskItem.tsx"],"sourcesContent":["import { Trash2, GripVertical, Check } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface TaskItemProps {\n    id: string;\n    title: string;\n    completed: boolean;\n    timestamp?: string;\n    onToggle: () => void;\n    onDelete: () => void;\n}\n\nexport const TaskItem = ({ id, title, completed, timestamp, onToggle, onDelete }: TaskItemProps) => {\n    return (\n        <motion.div\n            layoutId={id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"group relative bg-white rounded-[var(--radius-lg)] p-4 mb-3 flex items-start space-x-4 material-shadow-1 hover:shadow-md transition-shadow\"\n        >\n            {/* Custom Radio/Checkbox */}\n            <button\n                onClick={onToggle}\n                className={`mt-1 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${completed\n                        ? 'bg-primary border-primary text-white'\n                        : 'border-slate-300 hover:border-primary'\n                    }`}\n            >\n                {completed && <Check size={14} strokeWidth={3} />}\n            </button>\n\n            <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                        {timestamp && (\n                            <div className=\"flex items-center space-x-2 text-xs text-slate-400 mb-1\">\n                                <span>{timestamp}</span>\n                            </div>\n                        )}\n                        <h4 className={`text-base font-medium leading-relaxed transition-all ${completed ? 'text-slate-400 line-through decoration-2 decoration-slate-200' : 'text-slate-800'\n                            }`}>\n                            {title}\n                        </h4>\n                    </div>\n                </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"opacity-0 group-hover:opacity-100 transition-opacity absolute right-4 top-4 flex items-center bg-white pl-2\">\n                <button\n                    onClick={onDelete}\n                    className=\"p-2 text-slate-300 hover:text-red-500 transition-colors\"\n                >\n                    <Trash2 size={18} />\n                </button>\n            </div>\n        </motion.div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAWO,MAAM,WAAW,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAiB;IAC3F,qBACI,6LAAC,uMAAM,CAAC,GAAG;QACP,UAAU;QACV,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAU;;0BAGV,6LAAC;gBACG,SAAS;gBACT,WAAW,CAAC,oGAAoG,EAAE,YACxG,yCACA,yCACJ;0BAEL,2BAAa,6LAAC,gNAAK;oBAAC,MAAM;oBAAI,aAAa;;;;;;;;;;;0BAGhD,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;8BACX,cAAA,6LAAC;wBAAI,WAAU;;4BACV,2BACG,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;8CAAM;;;;;;;;;;;0CAGf,6LAAC;gCAAG,WAAW,CAAC,qDAAqD,EAAE,YAAY,kEAAkE,kBAC/I;0CACD;;;;;;;;;;;;;;;;;;;;;;0BAOjB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBACG,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,uNAAM;wBAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;AAKlC;KA9Ca"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/FloatingActionButton.tsx"],"sourcesContent":["import { Plus } from 'lucide-react';\n\ninterface FloatingActionButtonProps {\n    onClick: () => void;\n}\n\nexport const FloatingActionButton = ({ onClick }: FloatingActionButtonProps) => {\n    return (\n        <button\n            onClick={onClick}\n            className=\"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 rounded-full text-white shadow-xl flex items-center justify-center hover:bg-blue-700 active:scale-90 transition-all z-50 material-fab-shadow\"\n            aria-label=\"Add Item\"\n        >\n            <Plus size={32} strokeWidth={2.5} />\n        </button>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAMO,MAAM,uBAAuB,CAAC,EAAE,OAAO,EAA6B;IACvE,qBACI,6LAAC;QACG,SAAS;QACT,WAAU;QACV,cAAW;kBAEX,cAAA,6LAAC,6MAAI;YAAC,MAAM;YAAI,aAAa;;;;;;;;;;;AAGzC;KAVa"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/views/DashboardView.tsx"],"sourcesContent":["import {\n    Clock,\n    Calendar,\n    Layers,\n    AlertCircle,\n    Bell,\n    Grip\n} from 'lucide-react';\nimport { StatusCard } from '../components/StatusCard';\nimport { TaskItem } from '../components/TaskItem';\nimport { FloatingActionButton } from '../components/FloatingActionButton';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth } from '../lib/firebase';\nimport { useState } from 'react';\n\ninterface DashboardViewProps {\n    userName?: string | null;\n    onNavigateToLists: () => void;\n}\n\nexport const DashboardView = ({ userName, onNavigateToLists }: DashboardViewProps) => {\n    // Mock data for now, ideally this comes from Firestore\n    const [tasks, setTasks] = useState([\n        { id: '1', title: 'Project retrospective', completed: false, timestamp: 'Today, 4:50 PM' },\n        { id: '2', title: 'Evening team meeting', completed: false, timestamp: 'Today, 4:50 PM' },\n        { id: '3', title: 'Create monthly deck', completed: false, timestamp: 'Today' },\n        { id: '4', title: 'Shop for groceries', completed: false, timestamp: 'Today, 6:00 PM' },\n        { id: '5', title: 'Read book', completed: false, timestamp: 'Yesterday, 10:30 PM' },\n    ]);\n\n    const handleToggle = (id: string) => {\n        setTasks(prev => prev.map(t => t.id === id ? { ...t, completed: !t.completed } : t));\n    };\n\n    return (\n        <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n            {/* Header */}\n            <div className=\"flex justify-between items-start mb-8\">\n                <div>\n                    <h1 className=\"text-3xl font-bold text-slate-900\">Hello {userName?.split(' ')[0] || 'User'},</h1>\n                    <p className=\"text-slate-500 mt-1\">You have work today</p>\n                </div>\n                <div className=\"flex gap-4\">\n                    <button className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                        <Bell size={24} />\n                    </button>\n                    <button\n                        onClick={onNavigateToLists}\n                        className=\"text-slate-400 hover:text-slate-600 transition-colors\"\n                    >\n                        <Grip size={24} />\n                    </button>\n                </div>\n            </div>\n\n            {/* Status Grid */}\n            <div className=\"grid grid-cols-2 gap-4 mb-10\">\n                <StatusCard\n                    title=\"Today\"\n                    count={9}\n                    icon={Clock}\n                    variant=\"blue\"\n                />\n                <StatusCard\n                    title=\"Scheduled\"\n                    count={5}\n                    icon={Calendar}\n                    variant=\"yellow\"\n                />\n                <StatusCard\n                    title=\"All\"\n                    count={14}\n                    icon={Layers}\n                    variant=\"green\"\n                />\n                <StatusCard\n                    title=\"Overdue\"\n                    count={3}\n                    icon={AlertCircle}\n                    variant=\"pink\"\n                />\n            </div>\n\n            {/* Tasks List */}\n            <div>\n                <h2 className=\"text-lg font-bold text-slate-800 mb-6\">Today's Task</h2>\n                <div className=\"space-y-1\">\n                    {tasks.map(task => (\n                        <TaskItem\n                            key={task.id}\n                            id={task.id}\n                            title={task.title}\n                            completed={task.completed}\n                            timestamp={task.timestamp}\n                            onToggle={() => handleToggle(task.id)}\n                            onDelete={() => { }}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            <FloatingActionButton onClick={() => console.log('Add')} />\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAGA;;;;;;;;AAOO,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,iBAAiB,EAAsB;;IAC7E,uDAAuD;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;QAC/B;YAAE,IAAI;YAAK,OAAO;YAAyB,WAAW;YAAO,WAAW;QAAiB;QACzF;YAAE,IAAI;YAAK,OAAO;YAAwB,WAAW;YAAO,WAAW;QAAiB;QACxF;YAAE,IAAI;YAAK,OAAO;YAAuB,WAAW;YAAO,WAAW;QAAQ;QAC9E;YAAE,IAAI;YAAK,OAAO;YAAsB,WAAW;YAAO,WAAW;QAAiB;QACtF;YAAE,IAAI;YAAK,OAAO;YAAa,WAAW;YAAO,WAAW;QAAsB;KACrF;IAED,MAAM,eAAe,CAAC;QAClB,SAAS,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAE,GAAG,CAAC;oBAAE,WAAW,CAAC,EAAE,SAAS;gBAAC,IAAI;IACrF;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;;oCAAoC;oCAAO,UAAU,MAAM,IAAI,CAAC,EAAE,IAAI;oCAAO;;;;;;;0CAC3F,6LAAC;gCAAE,WAAU;0CAAsB;;;;;;;;;;;;kCAEvC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAO,WAAU;0CACd,cAAA,6LAAC,6MAAI;oCAAC,MAAM;;;;;;;;;;;0CAEhB,6LAAC;gCACG,SAAS;gCACT,WAAU;0CAEV,cAAA,6LAAC,6MAAI;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;0BAMxB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,gNAAK;wBACX,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,yNAAQ;wBACd,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,mNAAM;wBACZ,SAAQ;;;;;;kCAEZ,6LAAC,iJAAU;wBACP,OAAM;wBACN,OAAO;wBACP,MAAM,sOAAW;wBACjB,SAAQ;;;;;;;;;;;;0BAKhB,6LAAC;;kCACG,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,6LAAC;wBAAI,WAAU;kCACV,MAAM,GAAG,CAAC,CAAA,qBACP,6LAAC,6IAAQ;gCAEL,IAAI,KAAK,EAAE;gCACX,OAAO,KAAK,KAAK;gCACjB,WAAW,KAAK,SAAS;gCACzB,WAAW,KAAK,SAAS;gCACzB,UAAU,IAAM,aAAa,KAAK,EAAE;gCACpC,UAAU,KAAQ;+BANb,KAAK,EAAE;;;;;;;;;;;;;;;;0BAY5B,6LAAC,qKAAoB;gBAAC,SAAS,IAAM,QAAQ,GAAG,CAAC;;;;;;;;;;;;AAG7D;GApFa;KAAA"}},
    {"offset": {"line": 534, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/ListCard.tsx"],"sourcesContent":["import { ArrowUpRight } from 'lucide-react';\nimport { clsx } from 'clsx';\n\ninterface ListCardProps {\n    title: string;\n    itemsCount: number;\n    pantryCount: number;\n    variant: 'blue' | 'yellow' | 'green' | 'pink' | 'purple';\n    activeTab: 'shopping' | 'pantry';\n    onClick?: () => void;\n}\n\nexport const ListCard = ({ title, itemsCount, pantryCount, variant, activeTab, onClick }: ListCardProps) => {\n    const variants = {\n        blue: 'bg-card-blue text-on-card-blue',\n        yellow: 'bg-card-yellow text-on-card-yellow',\n        green: 'bg-card-green text-on-card-green',\n        pink: 'bg-card-pink text-on-card-pink',\n        purple: 'bg-purple-200 text-purple-900'\n    };\n\n    const isShopping = activeTab === 'shopping';\n\n    return (\n        <div\n            onClick={onClick}\n            className={clsx(\n                \"rounded-[var(--radius-xl)] p-6 relative overflow-hidden material-shadow-1 transition-transform active:scale-98 cursor-pointer group h-40 flex flex-col justify-between\",\n                variants[variant]\n            )}\n        >\n            <div className=\"flex justify-between items-start\">\n                <h3 className=\"text-xl font-bold tracking-tight\">{title}</h3>\n                <div className=\"bg-white/30 px-3 py-1 rounded-full backdrop-blur-sm\">\n                    {/* Dynamic badge based on what's interesting? Show both for now or just one? Prompt said \"instead of pills... show 7 in pantry\". Let's show Pantry count prominently */}\n                    <span className=\"text-xs font-semibold\">\n                        {isShopping ? `${itemsCount} To Buy` : `${pantryCount} In Pantry`}\n                    </span>\n                </div>\n            </div>\n\n            <div className=\"flex justify-between items-end\">\n                <p className=\"text-sm font-medium opacity-80\">\n                    {isShopping ? `${pantryCount} In Pantry` : `${itemsCount} To Buy`}\n                </p>\n                <button className=\"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center transition-colors group-hover:bg-black/20\">\n                    <ArrowUpRight size={20} />\n                </button>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAWO,MAAM,WAAW,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAiB;IACnG,MAAM,WAAW;QACb,MAAM;QACN,QAAQ;QACR,OAAO;QACP,MAAM;QACN,QAAQ;IACZ;IAEA,MAAM,aAAa,cAAc;IAEjC,qBACI,6LAAC;QACG,SAAS;QACT,WAAW,IAAA,gJAAI,EACX,0KACA,QAAQ,CAAC,QAAQ;;0BAGrB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAI,WAAU;kCAEX,cAAA,6LAAC;4BAAK,WAAU;sCACX,aAAa,GAAG,WAAW,OAAO,CAAC,GAAG,GAAG,YAAY,UAAU,CAAC;;;;;;;;;;;;;;;;;0BAK7E,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAE,WAAU;kCACR,aAAa,GAAG,YAAY,UAAU,CAAC,GAAG,GAAG,WAAW,OAAO,CAAC;;;;;;kCAErE,6LAAC;wBAAO,WAAU;kCACd,cAAA,6LAAC,6OAAY;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;AAKxC;KAvCa"}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/TabSwitcher.tsx"],"sourcesContent":["import clsx from 'clsx';\n\ninterface TabSwitcherProps {\n    activeTab: 'shopping' | 'pantry';\n    onTabChange: (tab: 'shopping' | 'pantry') => void;\n    className?: string;\n}\n\nexport const TabSwitcher = ({ activeTab, onTabChange, className }: TabSwitcherProps) => {\n    return (\n        <div className={clsx(\"flex p-1 rounded-full mb-6 relative\", className || \"bg-slate-200\")}>\n            <button\n                onClick={() => onTabChange('shopping')}\n                className={clsx(\n                    \"flex-1 py-3 text-sm font-bold rounded-full transition-all z-10\",\n                    activeTab === 'shopping' ? \"bg-white text-slate-900 shadow-sm\" : \"text-current opacity-60 hover:opacity-100\"\n                )}\n            >\n                Shopping List\n            </button>\n            <button\n                onClick={() => onTabChange('pantry')}\n                className={clsx(\n                    \"flex-1 py-3 text-sm font-bold rounded-full transition-all z-10\",\n                    activeTab === 'pantry' ? \"bg-white text-slate-900 shadow-sm\" : \"text-current opacity-60 hover:opacity-100\"\n                )}\n            >\n                What's in Pantry\n            </button>\n        </div>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAQO,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,EAAoB;IAC/E,qBACI,6LAAC;QAAI,WAAW,IAAA,mJAAI,EAAC,uCAAuC,aAAa;;0BACrE,6LAAC;gBACG,SAAS,IAAM,YAAY;gBAC3B,WAAW,IAAA,mJAAI,EACX,kEACA,cAAc,aAAa,sCAAsC;0BAExE;;;;;;0BAGD,6LAAC;gBACG,SAAS,IAAM,YAAY;gBAC3B,WAAW,IAAA,mJAAI,EACX,kEACA,cAAc,WAAW,sCAAsC;0BAEtE;;;;;;;;;;;;AAKb;KAvBa"}},
    {"offset": {"line": 684, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/lib/logic.ts"],"sourcesContent":["import { db } from './firebase';\nimport {\n    collection,\n    addDoc,\n    updateDoc,\n    doc,\n    deleteDoc,\n    increment\n} from 'firebase/firestore';\nimport type { ListItem, PantryItem } from '../types';\n\nexport const moveItemToPantry = async (userId: string, item: ListItem, listName: string) => {\n    try {\n        // 1. Mark as bought in the list\n        const itemRef = doc(db, 'items', item.id);\n        await updateDoc(itemRef, { isBought: true });\n\n        // 2. Add to pantry\n        const pantryRef = collection(db, 'pantry');\n        await addDoc(pantryRef, {\n            name: item.name,\n            quantity: 1, // Default to 1 for now\n            unit: item.unit || '',\n            sourceListId: item.listId,\n            sourceListName: listName,\n            lastUpdated: Date.now(),\n            userId: userId\n        });\n    } catch (error) {\n        console.error(\"Error moving item to pantry:\", error);\n        throw error;\n    }\n};\n\nexport const depleteItemFromPantry = async (userId: string, item: PantryItem, addBackToList: boolean = false) => {\n    try {\n        // 1. Remove from pantry (or decrement)\n        const itemRef = doc(db, 'pantry', item.id);\n        if (item.quantity > 1) {\n            await updateDoc(itemRef, { quantity: increment(-1), lastUpdated: Date.now() });\n        } else {\n            await deleteDoc(itemRef);\n        }\n\n        // 2. Add back to shopping list if requested\n        if (addBackToList) {\n            const listId = item.sourceListId || 'default';\n            const itemsRef = collection(db, 'items');\n            await addDoc(itemsRef, {\n                name: item.name,\n                listId: listId,\n                isBought: false,\n                quantity: 1,\n                addedAt: Date.now(),\n                userId: userId\n            });\n        }\n    } catch (error) {\n        console.error(\"Error depleting item from pantry:\", error);\n        throw error;\n    }\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAUO,MAAM,mBAAmB,OAAO,QAAgB,MAAgB;IACnE,IAAI;QACA,gCAAgC;QAChC,MAAM,UAAU,IAAA,yKAAG,EAAC,+HAAE,EAAE,SAAS,KAAK,EAAE;QACxC,MAAM,IAAA,+KAAS,EAAC,SAAS;YAAE,UAAU;QAAK;QAE1C,mBAAmB;QACnB,MAAM,YAAY,IAAA,gLAAU,EAAC,+HAAE,EAAE;QACjC,MAAM,IAAA,4KAAM,EAAC,WAAW;YACpB,MAAM,KAAK,IAAI;YACf,UAAU;YACV,MAAM,KAAK,IAAI,IAAI;YACnB,cAAc,KAAK,MAAM;YACzB,gBAAgB;YAChB,aAAa,KAAK,GAAG;YACrB,QAAQ;QACZ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACV;AACJ;AAEO,MAAM,wBAAwB,OAAO,QAAgB,MAAkB,gBAAyB,KAAK;IACxG,IAAI;QACA,uCAAuC;QACvC,MAAM,UAAU,IAAA,yKAAG,EAAC,+HAAE,EAAE,UAAU,KAAK,EAAE;QACzC,IAAI,KAAK,QAAQ,GAAG,GAAG;YACnB,MAAM,IAAA,+KAAS,EAAC,SAAS;gBAAE,UAAU,IAAA,+KAAS,EAAC,CAAC;gBAAI,aAAa,KAAK,GAAG;YAAG;QAChF,OAAO;YACH,MAAM,IAAA,+KAAS,EAAC;QACpB;QAEA,4CAA4C;QAC5C,IAAI,eAAe;YACf,MAAM,SAAS,KAAK,YAAY,IAAI;YACpC,MAAM,WAAW,IAAA,gLAAU,EAAC,+HAAE,EAAE;YAChC,MAAM,IAAA,4KAAM,EAAC,UAAU;gBACnB,MAAM,KAAK,IAAI;gBACf,QAAQ;gBACR,UAAU;gBACV,UAAU;gBACV,SAAS,KAAK,GAAG;gBACjB,QAAQ;YACZ;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACV;AACJ"}},
    {"offset": {"line": 755, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/ExpandedListView.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { ArrowLeft, Plus, Trash2, Check, Minus } from 'lucide-react';\nimport { TabSwitcher } from './TabSwitcher';\nimport {\n    collection,\n    addDoc,\n    deleteDoc,\n    doc,\n    updateDoc\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { query, where } from 'firebase/firestore';\nimport { moveItemToPantry, depleteItemFromPantry } from '../lib/logic';\nimport type { ListItem, PantryItem } from '../types';\n\ninterface ExpandedListViewProps {\n    listId: string;\n    listName: string;\n    userId: string;\n    variant: 'blue' | 'yellow' | 'green' | 'pink' | 'purple';\n    activeTab: 'shopping' | 'pantry'; // Initial tab\n    onBack: () => void;\n}\n\nexport const ExpandedListView = ({\n    listId,\n    listName,\n    userId,\n    variant,\n    activeTab: initialTab,\n    onBack\n}: ExpandedListViewProps) => {\n    const [currentTab, setCurrentTab] = useState<'shopping' | 'pantry'>(initialTab);\n    const [newItemName, setNewItemName] = useState('');\n\n    // Query Items (Shopping List)\n    const [itemsQuery] = useCollection(\n        query(\n            collection(db, 'items'),\n            where('listId', '==', listId),\n            where('isBought', '==', false) // Only show unbought items in shopping list\n        )\n    );\n\n    // Query Pantry (Items from this list)\n    const [pantryQuery] = useCollection(\n        query(\n            collection(db, 'pantry'),\n            where('sourceListId', '==', listId),\n            where('userId', '==', userId)\n        )\n    );\n\n    const items = itemsQuery?.docs.map(d => ({ id: d.id, ...d.data() } as ListItem)) || [];\n    const pantryItems = pantryQuery?.docs.map(d => ({ id: d.id, ...d.data() } as PantryItem)) || [];\n\n    const handleAddItem = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newItemName.trim()) return;\n\n        await addDoc(collection(db, 'items'), {\n            listId,\n            userId,\n            name: newItemName,\n            isBought: false,\n            quantity: 1,\n            addedAt: Date.now()\n        });\n        setNewItemName('');\n    };\n\n    const handleBuyItem = async (item: ListItem) => {\n        await moveItemToPantry(userId, item, listName);\n    };\n\n    const handleConsumeItem = async (item: PantryItem) => {\n        await depleteItemFromPantry(userId, item, true);\n    };\n\n    const handleRestockItem = async (item: PantryItem) => {\n        await addDoc(collection(db, 'items'), {\n            listId: item.sourceListId || listId,\n            userId,\n            name: item.name,\n            isBought: false,\n            quantity: 1,\n            addedAt: Date.now()\n        });\n    };\n\n    const handleDeletePantryItem = async (item: PantryItem) => {\n        await deleteDoc(doc(db, 'pantry', item.id));\n    };\n\n    // Color theme classes\n    const themes = {\n        blue: { bg: 'bg-card-blue', text: 'text-on-card-blue', input: 'placeholder-indigo-300' },\n        yellow: { bg: 'bg-card-yellow', text: 'text-on-card-yellow', input: 'placeholder-yellow-600' },\n        green: { bg: 'bg-card-green', text: 'text-on-card-green', input: 'placeholder-emerald-600' },\n        pink: { bg: 'bg-card-pink', text: 'text-on-card-pink', input: 'placeholder-pink-400' },\n        purple: { bg: 'bg-purple-200', text: 'text-purple-900', input: 'placeholder-purple-400' },\n    };\n    const theme = themes[variant];\n\n    return (\n        <div className={`min-h-[60vh] rounded-[var(--radius-xl)] p-6 ${theme.bg} ${theme.text} material-shadow-2 flex flex-col`}>\n            {/* Header */}\n            <div className=\"flex items-center gap-4 mb-4\">\n                <button\n                    onClick={onBack}\n                    className=\"w-10 h-10 rounded-full bg-black/10 flex items-center justify-center hover:bg-black/20 transition-colors\"\n                >\n                    <ArrowLeft size={20} />\n                </button>\n                <h2 className=\"text-2xl font-bold\">{listName}</h2>\n            </div>\n\n            {/* Local Tab Switcher if needed, utilizing translucent bg */}\n            <div className=\"mb-4\">\n                <TabSwitcher activeTab={currentTab} onTabChange={setCurrentTab} className=\"bg-black/10\" />\n            </div>\n\n            {/* List */}\n            <div className=\"flex-1 space-y-3 overflow-y-auto mb-6\">\n                {currentTab === 'shopping' ? (\n                    items.length === 0 ? (\n                        <p className=\"opacity-60 text-center py-8\">Your list is empty.</p>\n                    ) : (\n                        items.map(item => (\n                            <div key={item.id} className=\"flex items-center gap-3 bg-white/40 p-3 rounded-xl backdrop-blur-sm\">\n                                <button\n                                    onClick={() => handleBuyItem(item)}\n                                    className=\"w-6 h-6 rounded-full border-2 border-current flex items-center justify-center hover:bg-black/10\"\n                                >\n                                </button>\n                                <span className=\"flex-1 font-medium\">{item.name}</span>\n                                <button\n                                    onClick={() => deleteDoc(doc(db, 'items', item.id))}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                >\n                                    <Trash2 size={16} />\n                                </button>\n                            </div>\n                        ))\n                    )\n                ) : (\n                    pantryItems.length === 0 ? (\n                        <p className=\"opacity-60 text-center py-8\">Nothing in pantry from this list.</p>\n                    ) : (\n                        pantryItems.map(item => (\n                            <div key={item.id} className=\"flex items-center gap-2 bg-white/40 p-3 rounded-xl backdrop-blur-sm\">\n                                <div className=\"w-8 h-8 rounded-full bg-white/50 flex items-center justify-center text-xs font-bold\">\n                                    {item.quantity}\n                                </div>\n                                <span className=\"flex-1 font-medium\">{item.name}</span>\n                                <button\n                                    onClick={() => handleRestockItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                    title=\"Add to List\"\n                                >\n                                    <Plus size={16} />\n                                </button>\n                                <button\n                                    onClick={() => handleConsumeItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2\"\n                                    title=\"Consume\"\n                                >\n                                    <Minus size={16} />\n                                </button>\n                                <button\n                                    onClick={() => handleDeletePantryItem(item)}\n                                    className=\"opacity-50 hover:opacity-100 p-2 text-red-600\"\n                                    title=\"Delete\"\n                                >\n                                    <Trash2 size={16} />\n                                </button>\n                            </div>\n                        ))\n                    )\n                )}\n            </div>\n\n            {/* Add Item Input */}\n            {currentTab === 'shopping' && (\n                <form onSubmit={handleAddItem} className=\"relative\">\n                    <input\n                        type=\"text\"\n                        value={newItemName}\n                        onChange={(e) => setNewItemName(e.target.value)}\n                        placeholder=\"Add new item...\"\n                        className={`w-full bg-white/50 backdrop-blur-sm rounded-xl py-4 pl-4 pr-12 font-medium focus:outline-none focus:ring-2 focus:ring-black/10 ${theme.input} placeholder-opacity-60`}\n                        autoFocus\n                    />\n                    <button\n                        type=\"submit\"\n                        className=\"absolute right-2 top-2 bottom-2 w-10 bg-black/10 rounded-lg flex items-center justify-center hover:bg-black/20 text-current\"\n                    >\n                        <Plus size={20} />\n                    </button>\n                </form>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/components/UserMenu.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { LogOut, UserPlus, Check, X, Trash2, Users } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { sendSignInLinkToEmail } from 'firebase/auth';\nimport { collection, query, where, deleteDoc, doc } from 'firebase/firestore';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport { auth, db } from '../lib/firebase';\n\ninterface UserMenuProps {\n    userName?: string | null;\n    userId: string;\n    onLogout: () => void;\n}\n\nexport const UserMenu = ({ userName, userId, onLogout }: UserMenuProps) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [isInviting, setIsInviting] = useState(false);\n    const [inviteEmail, setInviteEmail] = useState('');\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    // List active collaborations where I am the inviter\n    const [collaborationsSnapshot] = useCollection(\n        userId ? query(collection(db, 'collaborations'), where('inviterId', '==', userId)) : null\n    );\n\n    // Close on click outside\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsOpen(false);\n                setIsInviting(false);\n            }\n        };\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const handleInviteSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!inviteEmail) return;\n\n        try {\n            const actionCodeSettings = {\n                // Return to the root URL with the inviterId parameter\n                url: window.location.origin + `/?inviterId=${userId}`,\n                handleCodeInApp: true,\n            };\n\n            await sendSignInLinkToEmail(auth, inviteEmail, actionCodeSettings);\n\n            // Save email locally to avoid asking user again if they open on same device (optional but good practice)\n            window.localStorage.setItem('emailForSignIn', inviteEmail);\n\n            alert(`Invite sent to ${inviteEmail}!`);\n            setInviteEmail('');\n            setIsInviting(false);\n        } catch (error: any) {\n            console.error('Error sending invite:', error);\n            alert('Failed to send invite: ' + error.message);\n        }\n    };\n\n    const handleRemoveCollaborator = async (collabId: string) => {\n        if (!confirm('Are you sure you want to remove this collaborator? They will lose access to your lists.')) return;\n        try {\n            await deleteDoc(doc(db, 'collaborations', collabId));\n        } catch (error) {\n            console.error(\"Error removing collaborator:\", error);\n        }\n    };\n\n    return (\n        <div className=\"relative font-display\" ref={menuRef}>\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"text-2xl font-bold text-slate-900 flex items-center gap-2 hover:opacity-80 transition-opacity\"\n            >\n                Hi <span className=\"text-primary\">{userName || 'User'}</span>\n            </button>\n\n            {isOpen && (\n                <div className=\"absolute top-full left-0 mt-2 w-80 bg-white rounded-[var(--radius-lg)] material-shadow-2 z-50 overflow-hidden border border-slate-100 p-2 text-sm\">\n\n                    {/* Invite Action */}\n                    <div className=\"mb-1\">\n                        {!isInviting ? (\n                            <button\n                                onClick={() => setIsInviting(true)}\n                                className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-slate-50 flex items-center gap-3 transition-colors text-slate-700 font-medium\"\n                            >\n                                <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-600\">\n                                    <UserPlus size={18} />\n                                </div>\n                                Invite Collaborator\n                            </button>\n                        ) : (\n                            <form onSubmit={handleInviteSubmit} className=\"p-2 flex gap-2 bg-slate-50 rounded-lg items-center\">\n                                <input\n                                    type=\"email\"\n                                    autoFocus\n                                    className=\"flex-1 bg-transparent text-sm font-medium placeholder-slate-400 focus:outline-none min-w-0 h-8\"\n                                    placeholder=\"friend@email.com\"\n                                    value={inviteEmail}\n                                    onChange={(e) => setInviteEmail(e.target.value)}\n                                />\n                                <div className=\"flex gap-1 shrink-0\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={() => setIsInviting(false)}\n                                        className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-200 transition-colors\"\n                                    >\n                                        <X size={16} />\n                                    </button>\n                                    <button\n                                        type=\"submit\"\n                                        className=\"w-8 h-8 flex items-center justify-center text-white bg-green-500 hover:bg-green-600 rounded-full shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                                        disabled={!inviteEmail}\n                                    >\n                                        <Check size={16} />\n                                    </button>\n                                </div>\n                            </form>\n                        )}\n                    </div>\n\n                    {/* Collaborators List */}\n                    {collaborationsSnapshot && !collaborationsSnapshot.empty && (\n                        <div className=\"mb-2 px-2\">\n                            <div className=\"flex items-center gap-2 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 px-2\">\n                                <Users size={12} />\n                                Collaborators\n                            </div>\n                            <div className=\"space-y-1\">\n                                {collaborationsSnapshot.docs.map(doc => {\n                                    const data = doc.data();\n                                    return (\n                                        <div key={doc.id} className=\"flex items-center justify-between p-2 rounded-md hover:bg-slate-50 group\">\n                                            <span className=\"text-slate-600 truncate max-w-[180px]\" title={data.inviteeEmail || 'Unknown'}>\n                                                {data.inviteeEmail || 'User'}\n                                            </span>\n                                            <button\n                                                onClick={() => handleRemoveCollaborator(doc.id)}\n                                                className=\"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all p-1\"\n                                                title=\"Remove access\"\n                                            >\n                                                <Trash2 size={14} />\n                                            </button>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                    )}\n\n                    {/* Divider */}\n                    <div className=\"h-px bg-slate-100 my-1 mx-2\" />\n\n                    {/* Logout Action */}\n                    <button\n                        onClick={onLogout}\n                        className=\"w-full text-left px-4 py-3 rounded-lg hover:bg-red-50 flex items-center gap-3 transition-colors text-red-600 font-medium group\"\n                    >\n                        <div className=\"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-600 group-hover:bg-red-200 transition-colors\">\n                            <LogOut size={18} />\n                        </div>\n                        Log Out\n                    </button>\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1432, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/views/AllListsView.tsx"],"sourcesContent":["import { useState, useMemo } from 'react';\nimport { Plus } from 'lucide-react';\nimport { ListCard } from '../components/ListCard';\nimport { TabSwitcher } from '../components/TabSwitcher';\nimport { ExpandedListView } from '../components/ExpandedListView';\nimport {\n    collection,\n    addDoc,\n    query,\n    where\n} from 'firebase/firestore';\nimport { db } from '../lib/firebase';\nimport { useCollection } from 'react-firebase-hooks/firestore';\nimport type { ShoppingList, ListItem, PantryItem } from '../types';\n\nimport { UserMenu } from '../components/UserMenu';\n\ninterface AllListsViewProps {\n    userId: string;\n    userName?: string | null;\n    onLogout: () => void;\n    onBack: () => void;\n}\n\nexport const AllListsView = ({ userId, userName, onLogout, onBack }: AllListsViewProps) => {\n    const [activeTab, setActiveTab] = useState<'shopping' | 'pantry'>('shopping');\n    const [expandedListId, setExpandedListId] = useState<string | null>(null);\n    const [isCreating, setIsCreating] = useState(false);\n    const [newListName, setNewListName] = useState('');\n\n    // --- Data Fetching ---\n\n    // 0. Collaborations (Shared with me)\n    const [collabSnapshot] = useCollection(\n        query(collection(db, 'collaborations'), where('inviteeId', '==', userId))\n    );\n\n    const allowedUserIds = useMemo(() => {\n        const sharedIds = collabSnapshot?.docs.map(d => d.data().inviterId) || [];\n        // Firestore 'in' limit is 30. We prioritize the current user + first 29 collaborators.\n        const allIds = [userId, ...sharedIds];\n        return [...new Set(allIds)].slice(0, 30);\n    }, [collabSnapshot, userId]);\n\n    // 1. Lists\n    const listQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'lists'), where('userId', 'in', allowedUserIds))\n            : null\n        , [allowedUserIds]);\n\n    const [listsSnapshot] = useCollection(listQuery);\n\n    const lists = useMemo(() =>\n        listsSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as ShoppingList)) || [],\n        [listsSnapshot]);\n\n    // 2. All Items (for counts)\n    const itemsQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'items'), where('userId', 'in', allowedUserIds), where('isBought', '==', false))\n            : null\n        , [allowedUserIds]);\n\n    const [itemsSnapshot] = useCollection(itemsQuery);\n\n    const allItems = useMemo(() =>\n        itemsSnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as ListItem)) || [],\n        [itemsSnapshot]);\n\n    // 3. All Pantry Items (for counts)\n    const pantryQuery = useMemo(() =>\n        allowedUserIds.length > 0\n            ? query(collection(db, 'pantry'), where('userId', 'in', allowedUserIds))\n            : null\n        , [allowedUserIds]);\n\n    const [pantrySnapshot] = useCollection(pantryQuery);\n\n    const allPantryItems = useMemo(() =>\n        pantrySnapshot?.docs.map(d => ({ id: d.id, ...d.data() } as PantryItem)) || [],\n        [pantrySnapshot]);\n\n    // --- Derived State ---\n\n    const getListStats = (listId: string) => {\n        const itemsCount = allItems.filter(i => i.listId === listId).length;\n        const pantryCount = allPantryItems.filter(i => i.sourceListId === listId).length;\n        return { itemsCount, pantryCount };\n    };\n\n    const getColorForList = (index: number) => {\n        const colors = ['purple', 'blue', 'yellow', 'green', 'pink'] as const;\n        return colors[index % colors.length];\n    };\n\n    // --- Handlers ---\n\n    const handleCreateList = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!newListName.trim()) {\n            setIsCreating(false);\n            return;\n        }\n\n        const docRef = await addDoc(collection(db, 'lists'), {\n            userId,\n            name: newListName,\n            createdAt: Date.now(),\n            ownerEmail: '' // Optional or verify auth provider\n        });\n\n        setNewListName('');\n        setIsCreating(false);\n        // Optionally expand the new list immediately\n        setExpandedListId(docRef.id);\n    };\n\n    // --- Render ---\n\n    // 1. Expanded View?\n    if (expandedListId) {\n        const list = lists.find(l => l.id === expandedListId);\n        if (list) {\n            const index = lists.findIndex(l => l.id === expandedListId);\n            return (\n                <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n                    <ExpandedListView\n                        listId={list.id}\n                        listName={list.name}\n                        userId={userId} // Pass userId so we know who is viewing\n                        variant={getColorForList(index)}\n                        activeTab={activeTab}\n                        onBack={() => setExpandedListId(null)}\n                    />\n                </div>\n            );\n        }\n    }\n\n    // 2. Main List View\n    return (\n        <div className=\"pb-24 px-6 pt-12 max-w-md mx-auto min-h-screen bg-surface\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center mb-6\">\n                <UserMenu userName={userName} userId={userId} onLogout={onLogout} />\n                <button\n                    onClick={() => setIsCreating(true)}\n                    className=\"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center hover:bg-slate-700 transition-colors shadow-lg\"\n                    aria-label=\"Create New List\"\n                >\n                    <Plus size={24} />\n                </button>\n            </div>\n\n            {/* Tabs */}\n            <TabSwitcher activeTab={activeTab} onTabChange={setActiveTab} />\n\n            {/* Content */}\n            <div className=\"grid grid-cols-1 gap-4\">\n                {/* Creation Card */}\n                {isCreating && (\n                    <div className=\"rounded-[var(--radius-xl)] p-6 bg-slate-100 material-shadow-1 border-2 border-dashed border-slate-300\">\n                        <form onSubmit={handleCreateList}>\n                            <input\n                                autoFocus\n                                type=\"text\"\n                                placeholder=\"List Name...\"\n                                className=\"w-full bg-transparent text-xl font-bold placeholder-slate-400 focus:outline-none\"\n                                value={newListName}\n                                onChange={e => setNewListName(e.target.value)}\n                                onBlur={() => !newListName && setIsCreating(false)}\n                                onKeyDown={e => e.key === 'Escape' && setIsCreating(false)}\n                            />\n                            <div className=\"flex justify-end mt-4\">\n                                <button\n                                    type=\"submit\"\n                                    className=\"px-4 py-2 bg-slate-900 text-white rounded-lg text-sm font-bold\"\n                                >\n                                    Save\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                )}\n\n                {/* Lists */}\n                {lists.length === 0 && !isCreating ? (\n                    <div className=\"text-center py-10 opacity-50\">\n                        <p>No lists found. Click + to create one.</p>\n                    </div>\n                ) : (\n                    lists.map((list, index) => {\n                        const { itemsCount, pantryCount } = getListStats(list.id);\n                        return (\n                            <ListCard\n                                key={list.id}\n                                title={list.name}\n                                itemsCount={itemsCount}\n                                pantryCount={pantryCount}\n                                variant={getColorForList(index)}\n                                activeTab={activeTab}\n                                onClick={() => setExpandedListId(list.id)}\n                            />\n                        );\n                    })\n                )}\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1754, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/views/LandingView.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ShoppingCart, Zap, Box, ArrowRight, Loader2 } from 'lucide-react';\nimport { auth, db } from '../lib/firebase';\nimport { signInWithPopup, GoogleAuthProvider, isSignInWithEmailLink, signInWithEmailLink } from 'firebase/auth';\nimport { doc, setDoc, serverTimestamp } from 'firebase/firestore';\n\ninterface LandingViewProps {\n    onLoginSuccess: () => void;\n}\n\nexport const LandingView = ({ onLoginSuccess }: LandingViewProps) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Handle Email Link Sign-in\n    useEffect(() => {\n        if (isSignInWithEmailLink(auth, window.location.href)) {\n            setIsLoading(true);\n            let email = window.localStorage.getItem('emailForSignIn');\n\n            if (!email) {\n                email = window.prompt('Please provide your email for confirmation');\n            }\n\n            if (email) {\n                signInWithEmailLink(auth, email, window.location.href)\n                    .then(async (result) => {\n                        window.localStorage.removeItem('emailForSignIn');\n                        if (result.user) {\n                            await setDoc(doc(db, 'users', result.user.uid), {\n                                uid: result.user.uid,\n                                email: result.user.email,\n                                displayName: result.user.displayName || email?.split('@')[0],\n                                photoURL: result.user.photoURL,\n                                lastLogin: serverTimestamp()\n                            }, { merge: true });\n                        }\n                        onLoginSuccess();\n                    })\n                    .catch((err) => {\n                        console.error(\"Email link sign-in failed:\", err);\n                        setError(err.message);\n                        setIsLoading(false);\n                    });\n            } else {\n                setIsLoading(false);\n                setError(\"Email is required to complete sign-in.\");\n            }\n        }\n    }, [onLoginSuccess]);\n\n    const handleLogin = async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const provider = new GoogleAuthProvider();\n            const result = await signInWithPopup(auth, provider);\n\n            if (result.user) {\n                await setDoc(doc(db, 'users', result.user.uid), {\n                    uid: result.user.uid,\n                    email: result.user.email,\n                    displayName: result.user.displayName,\n                    photoURL: result.user.photoURL,\n                    lastLogin: serverTimestamp()\n                }, { merge: true });\n            }\n\n            onLoginSuccess();\n        } catch (err: any) {\n            console.error(\"Login failed:\", err);\n            if (err.code === 'auth/popup-blocked') {\n                setError(\"Popup blocked! Please allow popups for this site and try again.\");\n            } else if (err.code === 'auth/configuration-not-found') {\n                setError(\"Firebase Authentication is not configured. Please enable Google Sign-In in the Firebase Console.\");\n            } else {\n                setError(err.message || \"Failed to sign in. Please try again.\");\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-white\">\n            <div className=\"max-w-md mx-auto px-6 pt-20 pb-10 flex flex-col items-center\">\n                <div className=\"w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center shadow-xl shadow-indigo-200 mb-8\">\n                    <ShoppingCart className=\"text-white\" size={40} />\n                </div>\n\n                <h1 className=\"text-4xl font-extrabold text-slate-900 text-center mb-4 tracking-tight\">\n                    List<span className=\"text-indigo-600\">Pantry</span>\n                </h1>\n                <p className=\"text-slate-500 text-center text-lg mb-12\">\n                    The smartest way to bridge the gap between your shopping list and your kitchen inventory.\n                </p>\n\n                {error && (\n                    <div className=\"w-full p-4 mb-6 bg-red-50 border border-red-100 text-red-600 rounded-2xl text-sm text-center\">\n                        {error}\n                    </div>\n                )}\n\n                <div className=\"space-y-6 w-full mb-12\">\n                    <FeatureCard\n                        icon={<Zap className=\"text-amber-500\" />}\n                        title=\"Auto-Replenish\"\n                        description=\"Items bought on your shopping list automatically appear in your pantry.\"\n                    />\n                    <FeatureCard\n                        icon={<Box className=\"text-emerald-500\" />}\n                        title=\"Smart Pantry\"\n                        description=\"Track what's in stock and get prompted to re-add items when they run out.\"\n                    />\n                </div>\n\n                <button\n                    onClick={handleLogin}\n                    disabled={isLoading}\n                    className=\"w-full bg-slate-900 text-white py-4 px-8 rounded-2xl font-bold flex items-center justify-center space-x-3 hover:bg-slate-800 transition-all shadow-xl active:scale-[0.98] disabled:opacity-70\"\n                >\n                    {isLoading ? (\n                        <Loader2 className=\"animate-spin\" size={20} />\n                    ) : (\n                        <>\n                            <span>Get Started</span>\n                            <ArrowRight size={20} />\n                        </>\n                    )}\n                </button>\n\n                <p className=\"mt-8 text-slate-400 text-sm\">\n                    Powered by Firebase Authentication\n                </p>\n            </div>\n        </div>\n    );\n};\n\nconst FeatureCard = ({ icon, title, description }: { icon: React.ReactNode, title: string, description: string }) => (\n    <div className=\"flex items-start space-x-4 p-4 rounded-2xl bg-slate-50 border border-slate-100\">\n        <div className=\"p-2 bg-white rounded-xl shadow-sm\">\n            {icon}\n        </div>\n        <div>\n            <h3 className=\"font-bold text-slate-800\">{title}</h3>\n            <p className=\"text-slate-500 text-sm\">{description}</p>\n        </div>\n    </div>\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2055, "column": 0}, "map": {"version":3,"sources":["file:///Users/srinivasramakrishnan/Projects/ListApp/src/App.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { auth, db } from './lib/firebase';\nimport { DashboardView } from './views/DashboardView';\nimport { AllListsView } from './views/AllListsView';\nimport { LandingView } from './views/LandingView';\nimport { Loader2, LogOut } from 'lucide-react';\nimport { doc, setDoc } from 'firebase/firestore';\n\nfunction App() {\n  const [user, loading, error] = useAuthState(auth);\n  const [currentView, setCurrentView] = useState<'dashboard' | 'all-lists'>('all-lists');\n  const [timedOut, setTimedOut] = useState(false);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Handle Invitation Link\n  useEffect(() => {\n    const handleInvite = async () => {\n      if (!user) return;\n      const params = new URLSearchParams(window.location.search);\n      const inviterId = params.get('inviterId');\n\n      if (inviterId && inviterId !== user.uid) {\n        try {\n          const collabId = `${inviterId}_${user.uid}`;\n          await setDoc(doc(db, 'collaborations', collabId), {\n            inviterId,\n            inviteeId: user.uid,\n            inviteeEmail: user.email,\n            createdAt: Date.now()\n          }, { merge: true });\n\n          window.history.replaceState({}, '', window.location.pathname);\n          alert(\"You have joined the collaborator's lists!\");\n        } catch (e) {\n          console.error(\"Failed to accept invite\", e);\n        }\n      }\n    };\n    handleInvite();\n  }, [user]);\n\n  // Safety timeout for auth initialization\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (loading) {\n        setTimedOut(true);\n      }\n    }, 5000);\n    return () => clearTimeout(timer);\n  }, [loading]);\n\n  // Prevent hydration mismatch by not rendering until mounted\n  if (!isMounted) {\n    return null;\n  }\n\n  if (loading && !timedOut) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface\">\n        <div className=\"text-center\">\n          <Loader2 className=\"text-primary animate-spin mx-auto mb-4\" size={48} />\n          <p className=\"text-slate-500 animate-pulse\">Connecting to Firebase...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || (timedOut && !user)) {\n    // ... (Existing error UI, slightly customized for new theme)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-surface p-6 text-center\">\n        <div className=\"max-w-xs\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <LogOut className=\"text-red-600\" size={32} />\n          </div>\n          <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">Connection Issue</h2>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"w-full bg-slate-900 text-white py-3 rounded-xl font-bold\"\n          >\n            Retry Connection\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <LandingView onLoginSuccess={() => setCurrentView('all-lists')} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-surface font-sans text-on-surface selection:bg-primary selection:text-white\">\n      {currentView === 'dashboard' && (\n        <DashboardView\n          userName={user.displayName}\n          onNavigateToLists={() => setCurrentView('all-lists')}\n        />\n      )}\n      {currentView === 'all-lists' && (\n        <AllListsView\n          userId={user.uid}\n          userName={user.displayName}\n          onLogout={() => auth.signOut()}\n          onBack={() => setCurrentView('dashboard')}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AARA;;;;;;;;;AAUA,SAAS;;IACP,MAAM,CAAC,MAAM,SAAS,MAAM,GAAG,IAAA,6LAAY,EAAC,iIAAI;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAA4B;IAC1E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;yBAAC;YACR,aAAa;QACf;wBAAG,EAAE;IAEL,yBAAyB;IACzB,IAAA,0KAAS;yBAAC;YACR,MAAM;8CAAe;oBACnB,IAAI,CAAC,MAAM;oBACX,MAAM,SAAS,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;oBACzD,MAAM,YAAY,OAAO,GAAG,CAAC;oBAE7B,IAAI,aAAa,cAAc,KAAK,GAAG,EAAE;wBACvC,IAAI;4BACF,MAAM,WAAW,GAAG,UAAU,CAAC,EAAE,KAAK,GAAG,EAAE;4BAC3C,MAAM,IAAA,4KAAM,EAAC,IAAA,yKAAG,EAAC,+HAAE,EAAE,kBAAkB,WAAW;gCAChD;gCACA,WAAW,KAAK,GAAG;gCACnB,cAAc,KAAK,KAAK;gCACxB,WAAW,KAAK,GAAG;4BACrB,GAAG;gCAAE,OAAO;4BAAK;4BAEjB,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,OAAO,QAAQ,CAAC,QAAQ;4BAC5D,MAAM;wBACR,EAAE,OAAO,GAAG;4BACV,QAAQ,KAAK,CAAC,2BAA2B;wBAC3C;oBACF;gBACF;;YACA;QACF;wBAAG;QAAC;KAAK;IAET,yCAAyC;IACzC,IAAA,0KAAS;yBAAC;YACR,MAAM,QAAQ;uCAAW;oBACvB,IAAI,SAAS;wBACX,YAAY;oBACd;gBACF;sCAAG;YACH;iCAAO,IAAM,aAAa;;QAC5B;wBAAG;QAAC;KAAQ;IAEZ,4DAA4D;IAC5D,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,IAAI,WAAW,CAAC,UAAU;QACxB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+NAAO;wBAAC,WAAU;wBAAyC,MAAM;;;;;;kCAClE,6LAAC;wBAAE,WAAU;kCAA+B;;;;;;;;;;;;;;;;;IAIpD;IAEA,IAAI,SAAU,YAAY,CAAC,MAAO;QAChC,6DAA6D;QAC7D,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,uNAAM;4BAAC,WAAU;4BAAe,MAAM;;;;;;;;;;;kCAEzC,6LAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,6LAAC;wBACC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;wBACrC,WAAU;kCACX;;;;;;;;;;;;;;;;;IAMT;IAEA,IAAI,CAAC,MAAM;QACT,qBAAO,6LAAC,8IAAW;YAAC,gBAAgB,IAAM,eAAe;;;;;;IAC3D;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,gBAAgB,6BACf,6LAAC,kJAAa;gBACZ,UAAU,KAAK,WAAW;gBAC1B,mBAAmB,IAAM,eAAe;;;;;;YAG3C,gBAAgB,6BACf,6LAAC,gJAAY;gBACX,QAAQ,KAAK,GAAG;gBAChB,UAAU,KAAK,WAAW;gBAC1B,UAAU,IAAM,iIAAI,CAAC,OAAO;gBAC5B,QAAQ,IAAM,eAAe;;;;;;;;;;;;AAKvC;GAzGS;;QACwB,6LAAY;;;KADpC;uCA2GM"}}]
}